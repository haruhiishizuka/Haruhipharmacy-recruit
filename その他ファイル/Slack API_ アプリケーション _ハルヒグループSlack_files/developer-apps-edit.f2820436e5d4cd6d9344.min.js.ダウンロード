(()=>{var Cp=Object.defineProperty;var d=(ie,Be)=>Cp(ie,"name",{value:Be,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["developer-apps-edit"],{1367540903:(ie,Be,u)=>{"use strict";var ye=u(1469597489),je=u.n(ye),qe=u(8909839414),e=u(3134334389),E=u(1867814188),xe=u(3297051565),s=u.n(xe),ge=u(4099691419),ct=u(4844578989),ce=u.n(ct),x=u(5026051994),H=u(4958410084),G=u(9711842200),S=u(9587308454),Pe=u(1233924953),h=u(8510437202),na=u(7383096940);const fe=s().shape({id:s().string.isRequired,description:s().string,methods:s().arrayOf(s().string),reason:s().string,is_required:s().bool,is_selected:s().bool,is_deprecated:s().bool});var pt=u(3082371541),F=u(6973979297);const re=new F.Ay("app-config"),he={scope:fe.isRequired,scopeReason:s().string,unselectScope:s().func,onUpdateScopeReason:s().func,isEditingReasons:s().bool,isFirst:s().bool,isDeletable:s().bool,showUpgradeToolLinks:s().bool,showAppHomeTooltip:s().bool,forSubmission:s().bool,canManageReasons:s().bool},Ae={isFirst:!1,unselectScope:E.noop,scopeReason:void 0,onUpdateScopeReason:E.noop,isEditingReasons:!1,isDeletable:!0,showUpgradeToolLinks:!1,showAppHomeTooltip:!1,forSubmission:!1,canManageReasons:!1},dt=`https://api.${(0,pt.Xk)()}`;function ke(a){let{scope:t,isEditingReasons:n,isDeletable:o,isFirst:r,scopeReason:l,onUpdateScopeReason:i,unselectScope:c,showUpgradeToolLinks:p,showAppHomeTooltip:m,forSubmission:f,canManageReasons:b}=a;const g=p&&(t.is_deprecated||t.id==="bot"),_=g||t.reason||n||(0,E.isEmpty)(t.reason),y=(0,e.useRef)(null);(0,e.useEffect)(()=>{n&&r&&y.current&&y.current.focus()},[n,r]);const I=(0,e.useCallback)(()=>{c(t)},[t,c]),T=(0,e.useCallback)(O=>{i(t.id,O)},[t,i]);return e.createElement("div",{role:"row",key:t.id,className:ce()("p-app-scopes-list__row",{"p-app-scopes-list__row--sub":_}),"data-qa":`app_scopes_list_row_${t.id}`,tabIndex:"-1"},e.createElement("div",{role:"cell",className:"p-app-scopes-list__row__scope_col","data-qa":"app_scopes_list_row_scope"},e.createElement(S.A,{href:`${dt}/scopes/${t.id}`,tabIndex:"-1",target:"_blank"},e.createElement(na.A,{lines:3,breakWords:!1},t.id))),e.createElement("div",{role:"cell",className:"p-app-scopes-list__row__description_col","data-qa":"app_scopes_list_row_description"},t.description),!n&&!f?e.createElement("div",{role:"cell",className:"p-app-scopes-list__row__actions_col","data-qa":"app_scopes_list_row_actions"},t.is_required&&e.createElement(h.Ay,{tip:re.t("This scope is required by your app\u2019s functionality and can\u2019t be removed.")},e.createElement(G.A,{"aria-label":re.t("Remove {scopeName} OAuth scope",{scopeName:t.id,fallbackHash:"4d6b9dc06c6e225b2a369d3e2241bd4b4a354ad1"}),className:"p-app-scopes-list__row__delete-disabled","data-qa":`app_scopes_list_unselect_${t.id}`,"aria-disabled":!0,svgIconProps:{name:"trash"}})),!t.is_required&&o&&m&&e.createElement(h.Ay,{tip:re.t("This scope is needed for the App Home beta. Removing this will turn off the home tab for your app.")},e.createElement(G.A,{"aria-label":re.t("Remove {scopeName} OAuth scope",{scopeName:t.id,fallbackHash:"4d6b9dc06c6e225b2a369d3e2241bd4b4a354ad1"}),onClick:I,"data-qa":`app_scopes_list_unselect_${t.id}`,svgIconProps:{name:"trash"}})),!t.is_required&&o&&!m&&e.createElement(G.A,{"aria-label":re.t("Remove {scopeName} OAuth scope",{scopeName:t.id,fallbackHash:"4d6b9dc06c6e225b2a369d3e2241bd4b4a354ad1"}),onClick:I,"data-qa":`app_scopes_list_unselect_${t.id}`,svgIconProps:{name:"trash"}}),!t.is_required&&!o&&e.createElement(h.Ay,{tip:re.t("Your app must have at least one permission scope.")},e.createElement(G.A,{"aria-label":re.t("Remove {scopeName} OAuth scope",{scopeName:t.id,fallbackHash:"4d6b9dc06c6e225b2a369d3e2241bd4b4a354ad1"}),className:"p-app-scopes-list__row__delete-disabled","data-qa":`app_scopes_list_unselect_${t.id}`,"aria-disabled":!0,svgIconProps:{name:"trash"}}))):e.createElement("div",{role:"cell",className:"p-app-scopes-list__row__actions_col","data-qa":"app_scopes_list_row_actions"}),_&&e.createElement("div",{className:"p-app-scopes-list__row__sub"},n&&e.createElement(H.A,{ref:y,id:`reason_${t.id}`,name:`reason_${t.id}`,"data-qa":`app_scopes_list_reason_input_${t.id}`,placeholder:re.t("Please add a detailed reason for using the {scopeName} OAuth scope...",{scopeName:t.id,fallbackHash:"d30d6813fde31126c17782ea6d08e830d635377b"}),value:l,onChange:T}),!n&&t.reason&&e.createElement("div",{className:"p-app-scopes-list_row__reason"},e.createElement("span",{className:"p-app-scopes-list_row__reason-label"},re.t("Request Reason: ")),e.createElement("span",{"data-qa":`app_scopes_list_reason_${t.id}`},t.reason)),e.createElement("div",null,(0,E.isEmpty)(t.reason)&&b&&e.createElement("div",{className:"p-app-scopes-error__row__sub sk_raspberry_red"},e.createElement("div",{className:"p-app_scopes_list_row__reason-icon"},e.createElement(Pe.A,{name:"warning"}),re.t("Please add reasons for your app to request this scope."))),t.reason&&t.reason.length<=75&&e.createElement("div",{className:"p-app-scopes-error__row__sub sk_raspberry_red"},e.createElement("div",{className:"p-app_scopes_list_row__reason-icon"},e.createElement(Pe.A,{name:"warning"}),re.t("Your scope reasons must have at least 75 characters.")))),!n&&g&&e.createElement(x.Ay,{level:"warning"},re.rt("This scope is deprecated. Please <ButtonLink>update scopes</ButtonLink> to use granular permissions.",null,O=>{let{text:R}=O;return e.createElement(S.A,{className:"c-list",href:"update-to-granular-scopes"},R)}))))}d(ke,"AppScopesListRow"),ke.displayName="AppScopesListRow",ke.propTypes=he,ke.defaultProps=Ae;const Tt=ke;function De(a){let{scopes:t,updateScopesReason:n}=a;const[o,r]=(0,e.useState)(!1),[l,i]=(0,e.useState)({}),c=(0,e.useCallback)(()=>{o||(i(t.reduce((b,g)=>(b[g.id]=g.reason,b),{})),r(!0))},[o,t]),p=(0,e.useCallback)(()=>{o&&(r(!1),i({}),n(l))},[o,l,n]),m=(0,e.useCallback)(()=>{r(!1),i({})},[]),f=(0,e.useCallback)((b,g)=>{Object.prototype.hasOwnProperty.call(l,b)&&i({...l,[b]:g})},[l]);return{isEditingReasons:o,scopeReasons:l,onManageReasons:c,onSaveReasons:p,onDiscardReasons:m,onUpdateScopeReason:f}}d(De,"useAppScopesReasonsManagement");var Ze=u(635030213),br=u(2776692052);function ln(){return ln=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},ln.apply(this,arguments)}d(ln,"_extends");const Er=new F.Ay("app-config");function Ar(a){let{scopes:t,onScopeSelected:n,...o}=a;const r=(0,e.useMemo)(()=>t.map(i=>{var c;return{label:i.id,value:i.id,optionFilterableValues:`${i.id} ${i.description} ${(c=i.methods)===null||c===void 0?void 0:c.join("")}`.toLocaleLowerCase(),originalScope:i}}),[t]),l=(0,e.useCallback)(i=>n(i.originalScope),[n]);return e.createElement(Ze.Ay,ln({focusOnMount:!0,placeholderText:Er.t("Add permission by Scope or API method..."),onOptionSelected:l,renderOption:xo,filter:vr,options:r,selectDataQa:"app_scopes_picker",ariaLabel:"Select Scopes",size:br.hu.MEDIUM,width:"100%",optionsRowHeight:50},o))}d(Ar,"AppScopesPicker");function xo(a){const{originalScope:t}=a;return e.createElement("div",{className:"p-app-scopes-picker__option"},e.createElement("div",null,t.id),e.createElement("div",{className:"p-app-scopes-picker__option-description"},t.description))}d(xo,"renderAppScopesOption"),xo.displayName="renderAppScopesOption";function vr(a,t){const{filterQuery:n}=t,o=n?n.toLocaleLowerCase():void 0;return{...t,options:o?a.filter(r=>{let{optionFilterableValues:l}=r;return l.indexOf(o)>-1}):a}}d(vr,"filterAppScopesOptions");var W=u(3168912582),V=u(3636056028),Je=u(4591588828);function cn(){return cn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},cn.apply(this,arguments)}d(cn,"app_scopes_list_extends");const yr={selectedScopes:s().arrayOf(fe).isRequired,availableScopes:s().arrayOf(fe).isRequired,sortInfo:s().object,selectScope:s().func,unselectScope:s().func,updateScopesReason:s().func,sortSelectedScopes:s().func,canManageReasons:s().bool,canDeleteScopes:s().bool,showAppHomeTooltip:s().bool,emptyMessage:s().string,showUpgradeToolLinks:s().bool,addButtonText:s().string,scopeHeadingText:s().string,forSubmission:s().bool},kr={sortInfo:{key:void 0,descending:!1},selectScope:E.noop,unselectScope:E.noop,sortSelectedScopes:E.noop,updateScopesReason:E.noop,canManageReasons:!1,canDeleteScopes:!1,showAppHomeTooltip:!1,emptyMessage:void 0,showUpgradeToolLinks:!1,addButtonText:void 0,scopeHeadingText:void 0,forSubmission:!1},Ct=new F.Ay("app-config");function Po(a,t){return a===t.key?t.descending?"descending":"ascending":"none"}d(Po,"getSort");function oa(a){let{selectedScopes:t,availableScopes:n,sortInfo:o,selectScope:r,unselectScope:l,updateScopesReason:i,sortSelectedScopes:c,canManageReasons:p,canDeleteScopes:m,showAppHomeTooltip:f,emptyMessage:b,showUpgradeToolLinks:g,addButtonText:_,scopeHeadingText:y,forSubmission:I,...T}=a;const[O,R]=(0,e.useState)(!1),M=(0,e.useCallback)(()=>R(!0),[R]),k=(0,e.useCallback)(()=>R(!1),[R]),A=(0,e.useCallback)($=>{k();const Z=$.parent_scope?n.find(K=>{let{id:ue}=K;return ue===$.parent_scope}):void 0;r($,Z)},[n,k,r]),w=(0,e.useCallback)($=>{const Z=$.child_scopes?(0,E.compact)($.child_scopes.map(K=>t.find(ue=>{let{id:Y}=ue;return Y===K}))):void 0;l($,(0,E.isEmpty)(Z)?void 0:Z)},[t,l]),{isEditingReasons:C,scopeReasons:P,onManageReasons:D,onSaveReasons:B,onDiscardReasons:Oe,onUpdateScopeReason:se}=De({scopes:t,updateScopesReason:i});return e.createElement(e.Fragment,null,e.createElement("div",cn({className:"p-app-scopes-list"},T,{role:"table"}),e.createElement("div",{role:"rowgroup"},e.createElement("div",{className:"p-app-scopes-list__row p-app-scopes-list__row--header",role:"row"},e.createElement("div",{role:"columnheader","aria-sort":Po("id",o),tabIndex:0,className:"p-app-scopes-list__row__scope_col p-app-scopes-list__header_col",onClick:()=>c("id",o.key==="id"&&!o.descending),onKeyDown:$=>$.keyCode===ge.Fm&&c("id",o.key==="id"&&!o.descending)},y??Ct.t("OAuth Scope")," ",o.key==="id"&&e.createElement(Je.A,{type:o.descending?"arrow-up":"arrow-down"})),e.createElement("div",{role:"columnheader","aria-sort":Po("description",o),tabIndex:0,className:"p-app-scopes-list__row__description_col p-app-scopes-list__header_col",onClick:()=>c("description",o.key==="description"&&!o.descending),onKeyDown:$=>$.keyCode===ge.Fm&&c("description",o.key==="description"&&!o.descending)},Ct.t("Description")," ",o.key==="description"&&e.createElement(Je.A,{type:o.descending?"arrow-up":"arrow-down"})),e.createElement("div",{className:"p-app-scopes-list__row__actions_col p-app-scopes-list__header_col"},"\xA0"))),e.createElement("div",{role:"rowgroup"},(!t||t.length===0)&&e.createElement("div",{role:"row","data-qa":"app_scopes_list_row_empty",className:"p-app-scopes-list__row p-app-scopes-list__row--empty"},e.createElement("div",{className:"p-app-scopes-list__row__empty_col"},b)),t.map(($,Z)=>e.createElement(Tt,{isFirst:Z===0,key:$.id,scope:$,scopeReason:P[$.id],isEditingReasons:C,isDeletable:m,showAppHomeTooltip:f,onUpdateScopeReason:se,unselectScope:w,showUpgradeToolLinks:g,forSubmission:I,canManageReasons:p})))),O&&e.createElement("div",{className:"p-app-scopes-list__picker-container"},e.createElement(Ar,{scopes:n,onScopeSelected:A,className:"p-app-scopes-list__picker"}),e.createElement(G.A,{onClick:k,"aria-label":Ct.t("Cancel adding an OAuth scope"),"data-qa":"app_scopes_list_cancel_add_oauth_scope",svgIconProps:{name:"close"}})),e.createElement("div",{className:"p-app-scopes-list__buttons"},!C&&!(0,E.isEmpty)(n)&&e.createElement(W.Ay,{type:V.QE.outline,size:V.F0.small,onClick:M,disabled:O,"data-qa":"app_scopes_list_add_oauth_scope",className:"margin_right_50"},_??Ct.t("Add an OAuth Scope")),p&&!C&&e.createElement(W.Ay,{type:V.QE.outline,size:V.F0.small,onClick:D,"data-qa":"app_scopes_list_manage_reasons"},Ct.t("Manage Reasons")),p&&C&&e.createElement(e.Fragment,null,e.createElement(W.Ay,{type:V.QE.outline,size:V.F0.small,onClick:Oe,"data-qa":"app_scopes_list_discard_changes",className:"margin_right_50"},Ct.t("Discard Changes")),e.createElement(W.Ay,{type:V.QE.primary,size:V.F0.small,onClick:B,"data-qa":"app_scopes_list_save_changes"},Ct.t("Save Changes")))))}d(oa,"AppScopesList"),oa.displayName="AppScopesList",oa.propTypes=yr,oa.defaultProps=kr;const sa=oa;var Sr=u(7113903252);const wr={title:s().string.isRequired,subtitle:s().string,children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired,className:s().string,descriptionId:s().string},Tr={className:void 0,subtitle:void 0,descriptionId:void 0};function ra(a){let{title:t,subtitle:n,children:o,className:r,descriptionId:l}=a;const[i,c]=(0,e.useState)(!1),p=(0,e.useMemo)(()=>(0,Sr.r9)(),[]);return e.createElement(e.Fragment,null,e.createElement("div",{role:"button",tabIndex:0,"aria-controls":p,"aria-expanded":!i,"data-qa":"app_scopes_list_container_toggle_collapse",className:ce()("p-app-scopes-list-container__header",r),onClick:()=>c(!i),onKeyDown:m=>m.keyCode===ge.Fm&&c(!i)},e.createElement("div",{"data-qa":"app_scopes_list_container_title",className:"p-app-scopes-list-container__title",id:!n&&l?l:void 0},t),e.createElement(Je.A,{type:i?"caret-right":"caret-down"})),e.createElement("div",{id:p,"data-qa":"app_scopes_list_container_list",className:ce()("p-app-scopes-list-container__list",{"p-app-scopes-list-container__list--collapsed":i})},n&&e.createElement("p",{"data-qa":"app_scopes_list_container_subtitle",className:"p-app-scopes-list-container__subtitle",id:l},n),o))}d(ra,"AppScopesListContainer"),ra.propTypes=wr,ra.defaultProps=Tr;const pn=new F.Ay("app-config");function Cr(){return e.createElement("div",{className:"p-update-app-scopes-banner"},e.createElement("div",{className:"p-update-app-scopes-banner__content"},e.createElement("h4",null,pn.t("Update your app\u2019s scopes")),e.createElement("p",{className:"p-update-app-scopes-banner__copy"},pn.t("You can now request more specific and granular permissions for your app. Ensuring your app only asks for the information it needs to function keeps your app and your customers more secure. We\u2019ll guide you through updating your app\u2019s scopes.")),e.createElement("a",{className:"c-link c-button c-button--primary c-button--medium no_underline",href:"update-to-granular-scopes"},pn.t("Update Scopes"))),e.createElement("div",{className:"p-update-app-scopes-banner__graphic"}))}d(Cr,"UpdateAppScopesBanner");var ze=u(1009030376),be=u(1753738215),Le=u(7391488148),la=u(3367235417);function Nr(a,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const o=a.search(new RegExp(`(\\?|&)${t}=`)),r=o+1,l=a.indexOf("&",r),i=l===-1?void 0:l,c=(0,E.isEmpty)(n)?"":`${t}=${n}`;return o<0?c?`${a}${a.indexOf("?")===-1?"?":"&"}${c}`:a:(0,E.isEmpty)(c)?`${a.slice(0,r-1)}${i?a.slice(i):""}`:`${a.slice(0,r)}${c}${i?a.slice(i):""}`}d(Nr,"updateUrl");function Wt(){let{installUrl:a,isGranularBotScopesApp:t,selectedScopes:n,scopeList:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!a)return;const r=!t||o==="scope_bot"?"scope":"user_scope",l=n.map(i=>i.id).join(",");return Nr(a,r,l)}d(Wt,"getReinstallUrl");var Fe=u(5021104278),Ro=u(5374209227);const le=(0,Fe.Ay)(function(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=typeof t=="string"?t:t.appId,o=(0,Ro.tV)(a,"app_to_edit");return o&&o.encoded_id===n?o:null});le.meta={name:"createSelector",key:"createSelectorgetAppToEdit",description:function(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=typeof t=="string"?t:t.appId,o=(0,Ro.tV)(a,"app_to_edit");return o&&o.encoded_id===n?o:null}};const dn=(0,Fe.Ay)((a,t)=>{const n=le(a,{appId:t});return!!(n&&n.payload&&n.payload.app_home&&n.payload.app_home.home_tab_enabled)});dn.meta={name:"createSelector",key:"createSelectorisAppHomeTabEnabled",description:(a,t)=>{const n=le(a,{appId:t});return!!(n&&n.payload&&n.payload.app_home&&n.payload.app_home.home_tab_enabled)}};const Mo=(0,Fe.Ay)((a,t)=>{const n=le(a,t);return n&&n.name});Mo.meta={name:"createSelector",key:"createSelectorgetAppName",description:(a,t)=>{const n=le(a,t);return n&&n.name}};const Bo=(0,Fe.Ay)((a,t)=>{const n=le(a,t);return n&&n.payload&&n.payload.icons||{}});Bo.meta={name:"createSelector",key:"createSelectorgetAppIcons",description:(a,t)=>{const n=le(a,t);return n&&n.payload&&n.payload.icons||{}}};const Ir=(0,Fe.Ay)((a,t)=>{const n=le(a,t);return n&&n.directory_payload&&n.directory_payload.developer_email});Ir.meta={name:"createSelector",key:"createSelectorgetAppDeveloperEmail",description:(a,t)=>{const n=le(a,t);return n&&n.directory_payload&&n.directory_payload.developer_email}};const Or=(0,Fe.Ay)((a,t)=>{const n=le(a,t);return n&&n.scope});Or.meta={name:"createSelector",key:"createSelectorgetAppScopes",description:(a,t)=>{const n=le(a,t);return n&&n.scope}};const un=(0,Fe.Ay)((a,t)=>{const n=le(a,{appId:t});return n&&n.payload&&n.payload.bot||{}});un.meta={name:"createSelector",key:"createSelectorgetAppBot",description:(a,t)=>{const n=le(a,{appId:t});return n&&n.payload&&n.payload.bot||{}}};const Lo=(0,Fe.Ay)((a,t)=>{const n=le(a,{appId:t});return n&&n.is_granular_bot_app});Lo.meta={name:"createSelector",key:"createSelectorisGranularBotScope",description:(a,t)=>{const n=le(a,{appId:t});return n&&n.is_granular_bot_app}};const xr=(0,Fe.Ay)((a,t)=>{const n=le(a,{appId:t});return n&&n.scope_bot?n.scope_bot:null});xr.meta={name:"createSelector",key:"createSelectorgetGranularBotScopes",description:(a,t)=>{const n=le(a,{appId:t});return n&&n.scope_bot?n.scope_bot:null}};const Uo=(0,Fe.Ay)((a,t)=>{const n=le(a,{appId:t});return n&&n.num_teams?n.num_teams:null});Uo.meta={name:"createSelector",key:"createSelectorgetAppNumTeams",description:(a,t)=>{const n=le(a,{appId:t});return n&&n.num_teams?n.num_teams:null}};const mn=(0,Le.Mz)(a=>a.appConfig&&a.appConfig&&!!a.appConfig.submissionId);mn.meta={name:"createSelector",key:"createSelectorisDistributionActivated",description:a=>a.appConfig&&a.appConfig&&!!a.appConfig.submissionId};const _n=(0,Le.Mz)(a=>a.appConfig&&a.appConfig&&a.appConfig.installUrl);_n.meta={name:"createSelector",key:"createSelectorgetInstallUrl",description:a=>a.appConfig&&a.appConfig&&a.appConfig.installUrl};const gn=(0,Le.Mz)(a=>a.appConfig&&a.appConfig.isGranularBotScopesApp);gn.meta={name:"createSelector",key:"createSelectorgetIsGranularBotScopesApp",description:a=>a.appConfig&&a.appConfig.isGranularBotScopesApp};const Gt=(0,Le.Mz)((a,t)=>a.appConfig&&a.appConfig[t]&&a.appConfig[t].initialScopes);Gt.meta={name:"createSelector",key:"createSelectorgetScopeListInitialScopes",description:(a,t)=>a.appConfig&&a.appConfig[t]&&a.appConfig[t].initialScopes};const Se=(0,Le.Mz)((a,t)=>a.appConfig&&a.appConfig[t]&&a.appConfig[t].selectedScopes);Se.meta={name:"createSelector",key:"createSelectorgetScopeListSelectedScopes",description:(a,t)=>a.appConfig&&a.appConfig[t]&&a.appConfig[t].selectedScopes};const fn=(0,Le.Mz)(a=>{const t=Se(a,"scope")||[],n=Se(a,"scope_bot")||[];return t.length+n.length});fn.meta={name:"createSelector",key:"createSelectorgetSelectedScopesCount",description:a=>{const t=Se(a,"scope")||[],n=Se(a,"scope_bot")||[];return t.length+n.length}};const Do=d(function(a){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((n,o)=>{const r=o.requires.filter(l=>!!a[l]);return r.length===1&&(n[r[0]]=!0),n},{})},"getRequiredScopes"),ia=(0,Le.Mz)((a,t,n)=>t==="scope_bot"&&dn(a,n)&&(Se(a,"scope_bot")||[]).length===1);ia.meta={name:"createSelector",key:"createSelectorshowAppHomeTooltip",description:(a,t,n)=>t==="scope_bot"&&dn(a,n)&&(Se(a,"scope_bot")||[]).length===1};const He=(0,Le.Mz)((a,t,n,o)=>{const r=a.appConfig&&a.appConfig[t];if(n&&n.length>0&&r){const i=r.selectedScopes,c=(0,E.keyBy)(i,"id"),p=Do(c,r.constraints);var l;const m=d(g=>(0,E.isEmpty)(r.constraints)?g:{...g,is_required:(l=p[g.id])!==null&&l!==void 0?l:!1},"applyConstraints"),{key:f,descending:b}=r.sortInfo;return{selectedScopes:i.map(m).sort((g,_)=>b?(0,la.Ay)(_[f],g[f]):(0,la.Ay)(g[f],_[f])),availableScopes:n.filter(g=>!c[g.id]),sortInfo:r.sortInfo,canDeleteScopes:!mn(a)||fn(a)>1,showAppHomeTooltip:ia(a,t,o)}}});He.meta={name:"createSelector",key:"createSelectorgetScopeListAttributes",description:(a,t,n,o)=>{const r=a.appConfig&&a.appConfig[t];if(n&&n.length>0&&r){const i=r.selectedScopes,c=(0,E.keyBy)(i,"id"),p=Do(c,r.constraints);var l;const m=d(g=>(0,E.isEmpty)(r.constraints)?g:{...g,is_required:(l=p[g.id])!==null&&l!==void 0?l:!1},"applyConstraints"),{key:f,descending:b}=r.sortInfo;return{selectedScopes:i.map(m).sort((g,_)=>b?(0,la.Ay)(_[f],g[f]):(0,la.Ay)(g[f],_[f])),availableScopes:n.filter(g=>!c[g.id]),sortInfo:r.sortInfo,canDeleteScopes:!mn(a)||fn(a)>1,showAppHomeTooltip:ia(a,t,o)}}}};const ca=d((a,t)=>{const n=(0,E.differenceBy)(t,a,"id");return{isEmpty:t.length===0,hasChanges:n.length>0,hasNonIdentityChanges:(0,E.some)(n,o=>o.id.indexOf("identity")===-1)}},"getChangeInfo"),hn=(0,Le.Mz)(a=>{const t=gn(a),n=Gt(a,"scope"),o=Se(a,"scope"),r=ca(n,o),l=Wt({installUrl:_n(a),isGranularBotScopesApp:!!t,selectedScopes:o,scopeList:"scope"});if(!t)return{...r,installUrl:l};const i=Gt(a,"scope_bot"),c=Se(a,"scope_bot"),p=ca(i,c);return{installUrl:Wt({installUrl:l,isGranularBotScopesApp:t,selectedScopes:c,scopeList:"scope_bot"}),hasChanges:r.hasChanges||p.hasChanges,hasNonIdentityChanges:r.hasNonIdentityChanges||p.hasNonIdentityChanges,isEmpty:r.isEmpty&&p.isEmpty}});hn.meta={name:"createSelector",key:"createSelectorgetUrlInfo",description:a=>{const t=gn(a),n=Gt(a,"scope"),o=Se(a,"scope"),r=ca(n,o),l=Wt({installUrl:_n(a),isGranularBotScopesApp:!!t,selectedScopes:o,scopeList:"scope"});if(!t)return{...r,installUrl:l};const i=Gt(a,"scope_bot"),c=Se(a,"scope_bot"),p=ca(i,c);return{installUrl:Wt({installUrl:l,isGranularBotScopesApp:t,selectedScopes:c,scopeList:"scope_bot"}),hasChanges:r.hasChanges||p.hasChanges,hasNonIdentityChanges:r.hasNonIdentityChanges||p.hasNonIdentityChanges,isEmpty:r.isEmpty&&p.isEmpty}}};const Pr=(0,Le.Mz)((a,t,n)=>{var o,r,l,i,c,p;return{botScopesAttributes:(o=He(a,"scope_bot",n==null?void 0:n.botScopes,t))===null||o===void 0||(r=o.selectedScopes)===null||r===void 0?void 0:r.filter(m=>m.is_selected),userScopesAttributes:(l=He(a,"scope",n==null?void 0:n.userScopes,t))===null||l===void 0||(i=l.selectedScopes)===null||i===void 0?void 0:i.filter(m=>m.is_selected),legacyScopesAttributes:(c=He(a,"scope",n==null?void 0:n.legacyScopes,t))===null||c===void 0||(p=c.selectedScopes)===null||p===void 0?void 0:p.filter(m=>m.is_selected)}});Pr.meta={name:"createSelector",key:"createSelectorgetSelectedScopesAttributes",description:(a,t,n)=>{var o,r,l,i,c,p;return{botScopesAttributes:(o=He(a,"scope_bot",n==null?void 0:n.botScopes,t))===null||o===void 0||(r=o.selectedScopes)===null||r===void 0?void 0:r.filter(m=>m.is_selected),userScopesAttributes:(l=He(a,"scope",n==null?void 0:n.userScopes,t))===null||l===void 0||(i=l.selectedScopes)===null||i===void 0?void 0:i.filter(m=>m.is_selected),legacyScopesAttributes:(c=He(a,"scope",n==null?void 0:n.legacyScopes,t))===null||c===void 0||(p=c.selectedScopes)===null||p===void 0?void 0:p.filter(m=>m.is_selected)}}};var et=u(6202395333),v=u(841722021),Rr=u(1831654287),tt=u(1433140080);const ut=new F.Ay("app-config"),Mr={onConfirm:s().func.isRequired,onClose:s().func.isRequired,childScopes:s().arrayOf(s().string),parentScope:s().string,targetScope:s().string.isRequired,featureUpdatingMissingAriaLabelsGroupTreatment:s().string},Br={childScopes:void 0,parentScope:void 0,featureUpdatingMissingAriaLabelsGroupTreatment:"off"},pa=d(a=>{let{onConfirm:t,onClose:n,childScopes:o,parentScope:r,targetScope:l,featureUpdatingMissingAriaLabelsGroupTreatment:i}=a,c,p,m;if(r)c=ut.t("Additional scope required"),p=ut.rt("To add <code>{targetScope}</code>, you\u2019ll also need to add <code>{parentScope}</code>. Do you want to add both of these scopes to your app?",{targetScope:l,parentScope:r}),m=ut.t("Add Scopes");else if(!(0,E.isEmpty)(o))c=ut.t("Additional {childScopeCount, plural, =1 {scope} other {scopes}} will be removed",{childScopeCount:o.length}),p=ut.rt("Removing <code>{targetScope}</code> will remove scopes that depend on it, such as {childScopes}.",{targetScope:l,childScopes:(0,Rr.A)(o.map(f=>e.createElement("code",{key:f},f)),{react:!0})}),m=ut.t("Remove Scopes");else return null;return e.createElement(v.dW,{closeModal:n,centered:!0,contentLabel:i==="on"?ut.t("App dependencies"):""},e.createElement(v.rQ,null,e.createElement(v.Rc,{title:c})),e.createElement(v.$m,null,e.createElement(v.qf,null,e.createElement("p",null,p))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(v.s_,{type:"outline","aria-label":ut.t("Cancel")},ut.t("Cancel")),e.createElement(W.Ay,{onClick:t},m))))},"AppScopesDependencyModal");pa.displayName="AppScopesDependencyModal",pa.propTypes=Mr,pa.defaultProps=Br;const Lr=d(a=>({featureUpdatingMissingAriaLabelsGroupTreatment:(0,tt._Z)(a,"updating_missing_aria_labels")}),"mapStateToProps"),qo=(0,be.N)(Lr)(pa);var ve=u(2757479062),te=u(4920110199),Fo=u(1580564193);const Ho=(0,Fo.Ay)("TS.developer_apps.onScopesChange",E.noop),Wo=(0,Fo.Ay)("TS.developer_apps.updateReinstallBanner",E.noop);var mt=u(625074947),Nt=u(8193048097);const bn=d(function(){let{appId:a,submissionId:t,scopes:n,scopeList:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t?(0,Nt.l3)({submissionId:t,scopes:n,scopeList:o}):(0,Nt.Qc)({appId:a,scopes:n,scopeList:o})},"persistScopes"),En=(0,et.Ay)("Selects a scope and updates the backend",function(a,t){let{scope:n,scopeList:o,appId:r,submissionId:l,parentScope:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Se(t(),o);a((0,mt.D6)({scopeList:o,scope:n})),i&&a((0,mt.D6)({scopeList:o,scope:i}));const p=Se(t(),o);a(bn({appId:r,submissionId:l,scopes:p,scopeList:o})).then(()=>Ho(hn(t()))).catch(()=>{a((0,mt.vK)({scopeList:o,scopes:c}))})});En.meta={name:"createThunk",key:"createThunkselectScopeAndPersist",description:"Selects a scope and updates the backend"};const Go=(0,et.Ay)("Unselects a scope and persists after getting confirmation from the user",function(a,t){let{scope:n,scopeList:o,appId:r,submissionId:l,parentScope:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i){const c=e.createElement(qo,{onConfirm:()=>{a(En({scope:n,scopeList:o,appId:r,submissionId:l,parentScope:i})),a((0,te.O)())},onClose:()=>a((0,te.O)()),targetScope:n.id,parentScope:i.id});a((0,ve.q)({element:c,name:"app-home-dependency-modal"}))}else a(En({scope:n,scopeList:o,appId:r,submissionId:l}))});Go.meta={name:"createThunk",key:"createThunkselectScopeAndPersistAfterConfirm",description:"Unselects a scope and persists after getting confirmation from the user"};const $t=new F.Ay("app-config"),Ur={onRequestDelete:s().func.isRequired,onRequestClose:s().func.isRequired},Dr={},da=d(a=>{let{onRequestDelete:t,onRequestClose:n}=a;return e.createElement(v.dW,{closeModal:n,centered:!0},e.createElement(v.rQ,null,e.createElement(v.Rc,{title:$t.t("Are you sure you want to delete this scope?")})),e.createElement(v.$m,null,e.createElement(v.qf,null,e.createElement("p",null,$t.t("Your app is using the beta App Home feature. Deleting this scope will mean your users will no longer see the \u201CHome\u201D tab in your app home. Are you sure you\u2019d like to delete it?")))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(v.s_,{type:"outline","aria-label":$t.t("Cancel")},$t.t("Cancel")),e.createElement(W.Ay,{onClick:t,type:"danger"},$t.t("Delete")))))},"AppScopesWarningModal");da.displayName="AppScopesWarningModal",da.propTypes=Ur,da.defaultProps=Dr;const qr=da,ua=(0,et.Ay)("Unselects a scope and updates the backend",function(a,t){let{scope:n,scopeList:o,appId:r,submissionId:l,childScopes:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Se(t(),o);a((0,mt._9)({scopeList:o,scope:n})),i&&i.forEach(m=>a((0,mt._9)({scopeList:o,scope:m})));const p=Se(t(),o);a(bn({appId:r,submissionId:l,scopes:p,scopeList:o})).then(()=>Ho(hn(t()))).catch(()=>{a((0,mt.vK)({scopeList:o,scopes:c}))})});ua.meta={name:"createThunk",key:"createThunkunselectScopeAndPersist",description:"Unselects a scope and updates the backend"};const $o=(0,et.Ay)("Unselects a scope and persists after getting confirmation from the user",function(a,t){let{scope:n,scopeList:o,appId:r,submissionId:l,childScopes:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(o==="scope_bot"&&ia(t(),o,r)){const c=e.createElement(qr,{onRequestDelete:()=>{a(ua({scope:n,scopeList:o,appId:r,submissionId:l})),a((0,te.O)())},onRequestClose:()=>a((0,te.O)())});a((0,ve.q)({element:c,name:"app-home-warning-modal"}))}else if(i){const c=e.createElement(qo,{onConfirm:()=>{a(ua({scope:n,scopeList:o,appId:r,submissionId:l,childScopes:i})),a((0,te.O)())},onClose:()=>a((0,te.O)()),targetScope:n.id,childScopes:i.map(p=>p.id)});a((0,ve.q)({element:c,name:"app-home-dependency-modal"}))}else a(ua({scope:n,scopeList:o,appId:r,submissionId:l}))});$o.meta={name:"createThunk",key:"createThunkunselectScopeAndPersistAfterConfirm",description:"Unselects a scope and persists after getting confirmation from the user"};const jo=(0,et.Ay)("Updates scopes reason and persists them in the backend",function(a,t){let{reasonsById:n,scopeList:o,appId:r,submissionId:l}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};a((0,mt.Dl)({scopeList:o,reasonsById:n}));const i=Se(t(),o);a(bn({appId:r,submissionId:l,scopes:i,scopeList:o}))});jo.meta={name:"createThunk",key:"createThunkupdateScopesReasonAndPersist",description:"Updates scopes reason and persists them in the backend"};const An=d(function(){let{appId:a,submissionId:t,scopeList:n,dispatch:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{selectScope:(r,l)=>o(Go({scopeList:n,scope:r,appId:a,submissionId:t,parentScope:l})),unselectScope:(r,l)=>o($o({scopeList:n,scope:r,appId:a,submissionId:t,childScopes:l})),sortSelectedScopes:(r,l)=>o((0,mt.dk)({scopeList:n,key:r,descending:l})),updateScopesReason:r=>o(jo({scopeList:n,reasonsById:r,appId:a,submissionId:t}))}},"getScopeListActions"),zo=(0,et.Ay)("Initializes the state for the app config page",function(a,t){let{submissionId:n,installUrl:o,legacyScopes:r,botTokenScopes:l,userTokenScopes:i,scopeConstraints:c}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const p=!r||r.length===0,m=d(b=>b.is_selected,"isSelected"),f=p?{scope:i?i.filter(m):[],scope_bot:l?l.filter(m):[]}:{scope:r?r.filter(m):[]};a((0,mt.m$)({submissionId:n,installUrl:o,isGranularBotScopesApp:p,selectedScopes:f,scopeConstraints:c}))});zo.meta={name:"createThunk",key:"createThunkinitializeState",description:"Initializes the state for the app config page"};function jt(){return jt=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},jt.apply(this,arguments)}d(jt,"app_scopes_manager_extends");const vn=s().shape({selectScope:s().func,unselectScope:s().func,sortSelectedScopes:s().func,updateScopesReason:s().func}),Fr={installUrl:s().string,submissionId:s().string,appId:s().string,legacyScopes:s().arrayOf(fe),botTokenScopes:s().arrayOf(fe),userTokenScopes:s().arrayOf(fe),legacyScopesAttributes:s().object,botTokenScopesAttributes:s().object,userTokenScopesAttributes:s().object,legacyScopesActions:vn,userTokenScopesActions:vn,botTokenScopesActions:vn,initializeState:s().func,showUpgradeToolLinks:s().bool,scopeConstraints:s().shape({user:s().array,bot:s().array}),forSubmission:s().bool,setError:s().func,useTokenManagement:s().bool,experimentAiSearchAppOptinGroupOn:s().bool},Hr={installUrl:void 0,appId:void 0,submissionId:void 0,legacyScopes:void 0,botTokenScopes:void 0,userTokenScopes:void 0,legacyScopesAttributes:void 0,botTokenScopesAttributes:void 0,userTokenScopesAttributes:void 0,legacyScopesActions:void 0,userTokenScopesActions:void 0,botTokenScopesActions:void 0,initializeState:void 0,showUpgradeToolLinks:!1,scopeConstraints:void 0,forSubmission:!1,setError:void 0,useTokenManagement:!1,experimentAiSearchAppOptinGroupOn:!1},we=new F.Ay("app-config"),Ko="botScopesTableDescription",Yo="userScopesTableDescription";function ma(a){let{installUrl:t,submissionId:n,legacyScopes:o,botTokenScopes:r,userTokenScopes:l,legacyScopesAttributes:i,botTokenScopesAttributes:c,userTokenScopesAttributes:p,legacyScopesActions:m,userTokenScopesActions:f,botTokenScopesActions:b,initializeState:g,showUpgradeToolLinks:_,scopeConstraints:y,forSubmission:I,setError:T,useTokenManagement:O,experimentAiSearchAppOptinGroupOn:R}=a;const M=(0,e.useMemo)(()=>O&&!!p,[O,p]),k=!!n;(0,e.useEffect)(()=>{g({submissionId:n,installUrl:t,legacyScopes:o,botTokenScopes:r,userTokenScopes:l,scopeConstraints:y,experimentAiSearchAppOptinGroupOn:R})},[]);const A=d(P=>{let{text:D}=P;return e.createElement(S.A,{href:"/scopes",target:"_blank"},D)},"scopesCopyi18nReplacement"),w=d(P=>{let{text:D}=P;return e.createElement(S.A,{href:`https://api.${(0,pt.Xk)()}/start/distributing/guidelines#data`,target:"_blank"},D)},"subScopesCopy"),C=d(P=>{let{text:D}=P;return e.createElement("strong",null,D)},"manageReasonsCopyReplacement");return(0,e.useEffect)(()=>{T&&(T(!1),c&&c.selectedScopes.forEach(D=>{if(D.is_selected){var B;((0,E.isEmpty)(D.reason)||((B=D.reason)===null||B===void 0?void 0:B.length)<=75)&&T(!0)}}),M&&p.selectedScopes.forEach(D=>{if(D.is_selected){var B;((0,E.isEmpty)(D.reason)||((B=D.reason)===null||B===void 0?void 0:B.length)<=75)&&T(!0)}}),i&&i.selectedScopes.forEach(D=>{if(D.is_selected){var B;((0,E.isEmpty)(D.reason)||((B=D.reason)===null||B===void 0?void 0:B.length)<=75)&&T(!0)}}))},[c,p,i,T,M]),e.createElement("div",{className:"p-app-scopes-manager card clearfix"},c&&!(0,E.isEmpty)(c.selectedScopes)&&window.location.search.indexOf("from_app_home")>-1&&e.createElement(x.Ay,{className:"margin_bottom_125",level:"info",heading:we.t("You can now show tabs on App Home")},we.rt("Manage which tabs your user sees in your app\u2019s home. <Link>Go to App Home</Link>",null,P=>{let{text:D}=P;return e.createElement(ze.A,{href:"app-home"},D)})),!I&&e.createElement("h2",null,we.t("Scopes")),_&&e.createElement(Cr,null),I?e.createElement("p",null,we.rt("A Slack app\u2019s capabilities and permissions are governed by the scopes it requests. Include any scopes that your app is requesting during OAuth and remove any that your app is not currently using. Then, click <bold>Manage Reasons</bold> to include clear explanations about what each scope allows your app to do.",null,C),e.createElement("br",null)," ",e.createElement("br",null),we.rt("We review both the scopes and reasons. Review our <Link>guidelines</Link> to ensure you\u2019re requesting the appropriate scopes and providing sufficient reasoning for each scope.",null,w),e.createElement("br",null)," ",e.createElement("br",null)):e.createElement("p",null,c?we.rt("A Slack app's capabilities and permissions are governed by the <Link>scopes</Link> it requests.",null,A):we.rt("<Link>OAuth scopes</Link> let you specify exactly how your app needs to access a Slack user\u2019s account.",null,A)),!I&&k&&e.createElement("p",null,we.t("If your app is submitted to the Slack Marketplace, we\u2019ll review your reasons for requesting each scope. After your app is listed in the Marketplace, it will only be able to use permission scopes Slack has approved.")),i&&e.createElement(sa,jt({canManageReasons:k,forSubmission:I,emptyMessage:we.t("You haven\u2019t added any OAuth Scopes."),className:"p-app-scopes-manager__list",showUpgradeToolLinks:_},i,m)),c&&e.createElement(ra,{title:we.t("Bot Token Scopes"),subtitle:we.t("Scopes that govern what your app can access."),className:"p-app-scopes-manager__list",descriptionId:Ko},e.createElement(sa,jt({canManageReasons:k,forSubmission:I,emptyMessage:we.t("You haven\u2019t added any OAuth Scopes for your Bot token."),"aria-describedby":Ko},c,b))),c&&M&&e.createElement("hr",{className:"p-app-scopes-manager__list-divider"}),M&&e.createElement(ra,{title:we.t("User Token Scopes"),subtitle:we.t("Scopes that access user data and act on behalf of users that authorize them."),className:"p-app-scopes-manager__list",descriptionId:Yo},e.createElement(sa,jt({canManageReasons:k,forSubmission:I,emptyMessage:we.t("You haven\u2019t added any OAuth Scopes for your User token."),"aria-describedby":Yo},p,f))),!I&&e.createElement("p",{className:"p-app-scopes-manager__scopes-caption"},we.rt("Scopes define the <a-methods>API methods</a-methods> an app is allowed to call, which information and capabilities are available on the workspace it\u2019s installed on. Many scopes are restricted to specific <a-types>resources</a-types> like channels or files.",null,P=>{let{tag:D,text:B}=P;const Oe=D.indexOf("-")>-1?D.split("-")[1]:"#";return e.createElement(S.A,{href:`/${Oe}`,target:"_blank"},B)})))}d(ma,"AppScopesManager"),ma.displayName="AppScopesManager",ma.propTypes=Fr,ma.defaultProps=Hr;const Wr=d((a,t)=>{let{legacyScopes:n,botTokenScopes:o,userTokenScopes:r,appId:l,experimentAiSearchAppOptinGroupOn:i}=t;const c=He(a,"scope",n),p=["search:read.public","search:read.private","search:read.im","search:read.mpim","search:read.files"];if(!i){const m=He(a,"scope_bot",o,l);if(m){const f=m.availableScopes.filter(b=>!p.includes(b.id));m.availableScopes=f}return{legacyScopesAttributes:c,userTokenScopesAttributes:He(a,"scope",r),botTokenScopesAttributes:m}}return{legacyScopesAttributes:c,userTokenScopesAttributes:He(a,"scope",r),botTokenScopesAttributes:He(a,"scope_bot",o,l)}},"app_scopes_manager_mapStateToProps"),Gr=d((a,t)=>{let{appId:n,submissionId:o}=t;return{initializeState:function(){for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return a(zo(...l))},legacyScopesActions:An({appId:n,submissionId:o,scopeList:"scope",dispatch:a}),userTokenScopesActions:An({appId:n,submissionId:o,scopeList:"scope",dispatch:a}),botTokenScopesActions:An({appId:n,submissionId:o,scopeList:"scope_bot",dispatch:a})}},"mapDispatchToProps"),$r=(0,be.N)(Wr,Gr)(ma);var jr=u(4589189233),zr=u(4409711828),Vo=u(7613732684),Re=u(7290912176);function yn(){return yn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},yn.apply(this,arguments)}d(yn,"with_wip_warning_extends");function Kr(a){return d(class extends e.PureComponent{componentDidMount(){((0,Vo.Cu)()||(0,Vo.M8)())&&(0,Re.Wo)().warn(`\u{1F6A8}\u26A0\uFE0F\u{1F6A8} WIP WARNING \u{1F6A8}\u26A0\uFE0F\u{1F6A8}
"${a.displayName}" is a work in progress and should not be used in production!`)}render(){return e.createElement(a,yn({},this.props))}},"WIPWarningWrapper")}d(Kr,"withWIPWarning");var N=u(6174912703),Yr=u(5007820203),zt=u(6620442619);function kn(){return kn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},kn.apply(this,arguments)}d(kn,"app_scopes_table_extends");const Vr={id:s().string,scopes:s().arrayOf(fe).isRequired,title:s().string.isRequired,subtitle:s().string,onToggleScope:s().func,onToggleScopes:s().func,isEditable:s().bool,className:s().string,emptyMessage:s().string},Qr={id:void 0,subtitle:void 0,onToggleScope:void 0,onToggleScopes:void 0,isEditable:!0,className:void 0,emptyMessage:void 0},_a=new N.A("app-config");function vt(a){let{id:t,title:n,subtitle:o,scopes:r=[],onToggleScope:l,onToggleScopes:i,isEditable:c,emptyMessage:p,className:m,...f}=a;const b=t||"app-scopes-table",{isAllSelected:g,scopeIds:_}=(0,e.useMemo)(()=>({isAllSelected:(0,E.every)(r,"is_selected"),scopeIds:r.map(A=>A.id)}),[r]),y=(0,e.useMemo)(()=>(0,E.times)(r.length+1,()=>[e.createRef(),e.createRef()]),[r.length]),I=(0,e.useCallback)(A=>i(_,A.target.checked),[i,_]),[[T,O],R]=(0,e.useState)([-1,0]),M=T+1,k=(0,e.useCallback)(A=>{switch(A.keyCode){case ge.n6:R([Math.min(T+1,r.length-1),O]),A.preventDefault();break;case ge.i7:R([Math.max(T-1,-1),O]),A.preventDefault();break;case ge.UQ:R([T,Math.max(0,O-1)]),A.preventDefault();break;case ge.LE:R([T,Math.min(1,O+1)]),A.preventDefault();break;default:break}return!0},[T,O,R,r.length]);return(0,e.useEffect)(()=>{y[M][O]&&y[M][O].current&&y[M][O].current.focus()},[O,T,y,M]),e.createElement(Yr.A,null,e.createElement("div",kn({className:m,id:b},f),n&&e.createElement("div",{id:`${b}_title`},e.createElement("strong",null,n)),o&&e.createElement("p",null,o),e.createElement("div",{className:"p-app_scopes_table",role:"table","aria-describedby":`${b}_title`,onKeyDown:k},e.createElement("div",{role:"rowgroup"},e.createElement("div",{className:ce()("p-app_scopes_table__row","p-app_scopes_table__row--header",{"p-app_scopes_table__row--editable":c}),role:"row"},c&&e.createElement("div",{role:"columnheader",className:"p-app_scopes_table__toggle_col p-app_scopes_table__header_col"},e.createElement(zt.A,{name:"app_scopes_table_row_toggle_all",type:"checkbox",checked:g,onChange:I,"data-qa":"app_scopes_table_row_toggle_all","aria-controls":_.join(","),tabIndex:T===-1?0:-1,"aria-label":g?_a.t("Deselect all scopes",{fallbackHash:"85cce1e14782f67cb830f74002ebe5603783c674",fallbackHashNs:"selection_bar"}):_a.t("Select all scopes",{fallbackHash:"913afff1faf79724f1f685fe8b1e36a729123ca2",fallbackHashNs:"selection_bar"}),ref:y[0][0]})),e.createElement("div",{role:"columnheader",className:"p-app_scopes_table__scope_col p-app_scopes_table__header_col"},_a.t("OAuth Scope")),e.createElement("div",{role:"columnheader",className:"p-app_scopes_table__description_col p-app_scopes_table__header_col"},_a.t("Description")))),e.createElement("div",{role:"rowgroup"},r.length===0&&e.createElement("div",{className:"p-app_scopes_table__row p-app_scopes_table__row--empty","data-qa":"app_scopes_table_row_empty",role:"row"},e.createElement("div",{className:"p-app_scopes_table__empty_col"},p)),r.map((A,w)=>e.createElement("div",{className:ce()("p-app_scopes_table__row",{"p-app_scopes_table__row--editable":c}),role:"row",key:A.id,"data-qa":`app_scopes_table_row_${A.id}`},c&&e.createElement("div",{className:"p-app_scopes_table__toggle_col","data-qa":"app_scopes_table_row_toggle",role:"cell"},e.createElement(zt.A,{id:A.id,name:A.id,type:"checkbox",checked:A.is_selected,onChange:l,"data-qa":`app_scopes_table_row_toggle_${A.id}`,"aria-labelledby":`app_scopes_id_${A.id}`,tabIndex:T===w&&O===0?0:-1,ref:y[w+1][0],onKeyDown:k})),e.createElement("div",{className:"p-app_scopes_table__row__scope_col","data-qa":"app_scopes_table_row_scope",role:"cell"},e.createElement(S.A,{id:`app_scopes_id_${A.id}`,"data-qa":`app_scopes_id_${A.id}`,href:`/scopes/${A.id}`,target:"_blank",rel:"noopener noreferrer",tabIndex:T===w&&O===1?0:-1,ref:y[w+1][1]},A.id)),e.createElement("div",{className:"p-app_scopes_table__row__description_col","data-qa":"app_scopes_table_row_description",role:"cell"},A.description)))))))}d(vt,"AppScopesTable"),vt.propTypes=Vr,vt.defaultProps=Qr;var Xr=u(7674362300);const Zr={"incoming-webhook":!0,commands:!0},Jr={"channels:read":!0,"chat:write:bot":!0,"dnd:read":!0,"groups:read":!0,"im:history":!0,"im:read":!0,"im:write":!0,"mpim:read":!0,"mpim:write":!0,"mpim:history":!0,"pins:write":!0,"reactions:read":!0,"reactions:write":!0,"rtm:stream":!0,"stars:write":!0,"team:read":!0,"tokens.basic":!0,"users:read":!0,"users:read.email":!0,"users:write":!0,"remote_files:read":!0,"remote_files:write":!0,"remote_files:share":!0,"calls:read":!0,"calls:write":!0,"emails:write":!0,"files:write:user":!0,"files:read":!0,"chat:write":!0};function el(a){let t="granular";return Zr[a.id]?t="special":Jr[a.id]&&(t="existing"),t}d(el,"getBotScopeCategory");var yt=u(5586034336),J=u(7160360373),ae=u(6709722494),It=u(5512723025);const Np={AppNotFound:"app_not_found",AlreadyGranularBotApp:"already_granular_bot_app",NoPermission:"no_permission"},Qo=(0,ae.A)("developer.apps.migration.isClassicAppAbandoned generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.migration.isClassicAppAbandoned",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.migration.isClassicAppAbandoned
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));Qo.meta={name:"createFetcher",key:"createFetcherdeveloperAppsMigrationIsClassicAppAbandonedFetcher",description:"developer.apps.migration.isClassicAppAbandoned generated fetcher"};var We=u(6122756707);const Ue=new N.A("update-scopes-tool"),tl={appId:s().string.isRequired,botTokenScopes:s().arrayOf(fe).isRequired,onToggleScope:s().func.isRequired,onToggleScopes:s().func.isRequired,goToNext:s().func.isRequired,isClassicAppAbandoned:s().number.isRequired};function Xo(a){let{appId:t,botTokenScopes:n,onToggleScope:o,onToggleScopes:r,goToNext:l,isClassicAppAbandoned:i}=a;const{special:c,existing:p,granular:m}=(0,E.groupBy)(n,el),f=(0,We.wA)(),b=(0,e.useCallback)(()=>f(Qo({app:t,isAbandoned:!1})).then(()=>{(0,Xr.yQ)()}),[f,t]);return e.createElement(e.Fragment,null,i===1?e.createElement(x.Ay,{level:x.A_.warning,align:x.AO.left,className:"margin_bottom_100"},Ue.rt("<p>App Status: <strong>Inactive</strong></p> <p>Our records show that this app has not made any API calls to our platform in over a year. To maintain the health of our systems, we are reviewing apps that are not being used and identifying them as inactive. Inactive apps will have functionality blocked and we will take action to clean them up in the future. If you\u2019re still using your app, you can mark your app as active by selecting the button below.</p>",{fallbackHash:"66c0e46e7c01febb04b7483a1d16e22485674b1f"}),e.createElement(W.Ay,{type:V.QE.primary,onClick:b},Ue.t("My App is Active"))):null,i===2?e.createElement(x.Ay,{level:x.A_.success,align:x.AO.left,className:"margin_bottom_100"},Ue.rt("App Status: <strong>Active</strong>")):null,e.createElement(x.Ay,{level:x.A_.info,align:x.AO.left,className:"margin_bottom_100"},Ue.rt("<strong>The RTM API is not accessible to updated Bot Tokens.</strong> If your app requires RTM functionality, please exit this update and continue using your existing scopes.",{fallbackHash:"d18ef941a8ff5acf638623cd8cdb9cde1cf1b788"})),e.createElement("p",null,Ue.t("We\u2019ve made major improvements to the way scopes work for apps. The bot token now gives you the flexibility to request only the specific permissions needed for your app to function. We\u2019ll guide you through how to update your app\u2019s scopes.")),e.createElement("p",null,Ue.rt("<strong>We recommend selecting only the scopes your app needs.</strong> Requesting too many scopes can cause your app to be restricted by a team\u2019s Admin or App Manager.")),e.createElement("h2",{"data-qa":"update_scopes_step_title"},Ue.t("Step 1: Select bot token scopes")),e.createElement(vt,{id:"special_scopes",className:"margin_top_50 margin_bottom_100",title:Ue.t("Special scopes for bots"),subtitle:Ue.t("These scopes were previously available to your app with the user token, but are now part of the bot token."),onToggleScope:o,onToggleScopes:r,scopes:c}),e.createElement(vt,{id:"existing_scopes",className:"padding_top_100 margin_bottom_100",title:Ue.t("Scopes that cover what your app currently has access to through the bot token"),subtitle:Ue.t("These scopes include what your app may be using for its bot events and API calls."),onToggleScope:o,onToggleScopes:r,scopes:p}),e.createElement(vt,{id:"new_scopes",className:"padding_top_100",title:Ue.t("New scopes that are now available for bots",{fallbackHash:"9f9b7586fdb62262b6f6e620b621514ae9f4c4b7"}),subtitle:Ue.t("These are scopes that unlock all-new functionality for bots."),onToggleScope:o,onToggleScopes:r,scopes:m}),e.createElement("div",{className:"p-update_scopes_actions"},e.createElement(W.Ay,{type:V.QE.outline,onClick:l,"data-qa":"update_scopes_step_next"},Ue.t("Continue"))))}d(Xo,"SelectBotScopesStep"),Xo.propTypes=tl;const Kt=new N.A("update-scopes-tool"),al={userTokenScopes:s().arrayOf(fe).isRequired,onToggleScope:s().func.isRequired,onToggleScopes:s().func.isRequired,goToNext:s().func.isRequired,goToPrevious:s().func.isRequired};function Zo(a){let{userTokenScopes:t,onToggleScope:n,onToggleScopes:o,goToNext:r,goToPrevious:l}=a;return e.createElement(e.Fragment,null,e.createElement("h2",{"data-qa":"update_scopes_step_title"},Kt.t("Step 2: Select user token scopes")),e.createElement(vt,{className:"margin_top_50",title:Kt.t("Scopes that access user data and act on behalf of authorizing users"),subtitle:Kt.t("These scopes will be requested for each user that installs your app."),onToggleScope:n,onToggleScopes:o,scopes:t}),e.createElement("div",{className:"p-update_scopes_actions"},e.createElement(W.Ay,{type:V.QE.outline,onClick:l,"data-qa":"update_scopes_step_previous"},Kt.t("Back")),e.createElement(W.Ay,{type:V.QE.outline,onClick:r,"data-qa":"update_scopes_step_next"},Kt.t("Continue"))))}d(Zo,"SelectUserScopesStep"),Zo.propTypes=al;const Ke=new N.A("update-scopes-tool"),nl={appId:s().string.isRequired,botTokenScopes:s().arrayOf(fe).isRequired,userTokenScopes:s().arrayOf(fe).isRequired,goToNext:s().func.isRequired,goToPrevious:s().func.isRequired,error:s().string,isSubmitting:s().bool},ol={error:void 0,isSubmitting:!1};function Sn(a){let{appId:t,botTokenScopes:n,userTokenScopes:o,goToNext:r,goToPrevious:l,error:i,isSubmitting:c}=a;const p=n.filter(_=>_.is_selected),m=o.filter(_=>_.is_selected),f=p.length+m.length===0,b=p.length!==0,g=`/apps/${t}/app-home?`;return e.createElement(e.Fragment,null,e.createElement(x.Ay,{level:x.A_.info,align:x.AO.left,className:"margin_bottom_100"},Ke.rt("<strong>The RTM API is not accessible to updated Bot Tokens.</strong> If your app requires RTM functionality, please exit this update and continue using your existing scopes.",{fallbackHash:"d18ef941a8ff5acf638623cd8cdb9cde1cf1b788"})),e.createElement("h2",{"data-qa":"update_scopes_step_title"},Ke.t("Step 3: Verify your scope selections")),b&&e.createElement("p",null,Ke.rt("Selecting bot token scopes requires a <a>bot user</a>. If your app doesn\u2019t have a bot user, we\u2019ll add one for you.",null,_=>{let{text:y,tag:I}=_;return I==="a"?e.createElement(S.A,{href:g},y):null})),e.createElement(vt,{"data-qa":"update_scopes_verify_bot_scopes",className:"margin_top_100 margin_bottom_100",title:Ke.t("Bot token scopes"),isEditable:!1,scopes:p,emptyMessage:Ke.t("You haven\u2019t added any OAuth Scopes for your Bot token.")}),e.createElement(vt,{"data-qa":"update_scopes_verify_user_scopes",className:"padding_top_100",title:Ke.t("User token scopes"),isEditable:!1,scopes:m,emptyMessage:Ke.t("You haven\u2019t added any OAuth Scopes for your User token.")}),e.createElement("p",{className:"margin_top_100"},Ke.rt("Thank you for picking out new scopes for your app! Confirm that the scopes selected have the capabilities your app needs. If these aren\u2019t correct, please <Link>edit these scopes</Link> before continuing.",null,_=>{let{text:y}=_;return e.createElement(S.A,{onClick:l,"data-qa":"update_scopes_step_link_first"},y)})),f&&e.createElement(x.Ay,{level:x.A_.error,className:"margin_top_100","data-qa":"update_scopes_no_selected_scopes"},e.createElement("span",null,Ke.t("You must select at least one scope in order to proceed."))),i&&e.createElement(x.Ay,{level:x.A_.error,className:"margin_top_100"},e.createElement("span",null,i)),e.createElement("div",{className:"p-update_scopes_actions"},e.createElement(W.Ay,{type:V.QE.outline,disabled:c,onClick:l,"data-qa":"update_scopes_step_first"},Ke.t("No, edit scopes")),e.createElement(W.Ay,{type:V.QE.primary,disabled:f||c,onClick:r,"data-qa":"update_scopes_step_next"},Ke.t("Yes, migrate my app"))))}d(Sn,"VerifySelectionStep"),Sn.propTypes=nl,Sn.defaultProps=ol;var Jo=u(4090204812),wn=u(403717885),ga=u(122369044);const Ye=new N.A("update-scopes-tool"),sl={installUrl:s().string.isRequired,botTokenScopes:s().arrayOf(fe).isRequired,userTokenScopes:s().arrayOf(fe).isRequired,enqueueToast:s().func.isRequired};function Tn(a){let{installUrl:t,botTokenScopes:n,userTokenScopes:o,enqueueToast:r}=a;const l=n.filter(m=>m.is_selected),i=o.filter(m=>m.is_selected),c=[{selectedScopes:i,scopeList:"scope"},{selectedScopes:l,scopeList:"scope_bot"}].reduce((m,f)=>Wt({...f,installUrl:m,isGranularBotScopesApp:!0}),t),p=(0,e.useCallback)(()=>{(0,Jo.x3)(c),r({element:e.createElement(ga.Ay,{position:"bottom-right",shouldAutoFade:!0},Ye.t("Copied to your clipboard"))})},[c,r]);return e.createElement(e.Fragment,null,e.createElement("h2",{"data-qa":"update_scopes_step_title",className:"margin_bottom_100"},Ye.t("Step 4: Update and test your app")),e.createElement("p",null,Ye.t("In order for your app to issue tokens with your chosen scopes, you\u2019ll need to make some changes in your OAuth code to reflect these scopes and handle the new response format.")),e.createElement("h3",null,Ye.t("Your app should request these scopes")),l.length>0&&e.createElement("div",null,e.createElement("div",{className:"p-update_scopes__should_request_title"},Ye.t("Bot token scopes")),e.createElement("div",{className:"p-update_scopes__scope_container"},l.map(m=>e.createElement("span",{className:"p-update_scopes__scope_tag",key:m.id},m.id)))),i.length>0&&e.createElement("div",null,e.createElement("div",{className:"p-update_scopes__should_request_title"},Ye.t("User token scopes")),e.createElement("div",{className:"p-update_scopes__scope_container"},i.map(m=>e.createElement("span",{className:"p-update_scopes__scope_tag",key:m.id},m.id)))),e.createElement("h3",{className:"margin_top_200 margin_bottom_100"},Ye.t("Change your app\u2019s authentication URL to look like this:")),e.createElement("pre",{className:"p-update_scopes__install_url"},c),e.createElement(W.Ay,{type:V.QE.outline,size:V.F0.small,onClick:p},Ye.t("Copy URL")),e.createElement(x.Ay,{level:x.A_.info,align:"left",className:"margin_top_200"},e.createElement("strong",null,Ye.t("Give it a go!")),e.createElement("p",null,Ye.rt("Be sure to test your app and issue at least one token with granular scopes before continuing. If you already have a token for your app, be sure to <Link>revoke it</Link> first.",null,m=>{let{text:f}=m;return e.createElement(S.A,{href:"/docs/oauth#revoking_tokens",target:"_blank",onClick:E.noop},f)}))),e.createElement("div",{className:"p-update_scopes_actions"},e.createElement(W.Ay,{type:V.QE.primary,href:`oauth${window.location.search?window.location.search:""}`,className:"no_underline","data-qa":"update_scopes_step_done"},Ye.t("I\u2019ve updated my app"))))}d(Tn,"UpdateAndTestStep"),Tn.displayName="UpdateAndTestStep",Tn.propTypes=sl;const rl=d(a=>({enqueueToast:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return a((0,wn.M)(...n))}}),"update_and_test_step_mapDispatchToProps"),ll=(0,be.N)(null,rl)(Tn),Ip={AppNotFound:"app_not_found",NoPermission:"no_permission"},es=(0,ae.A)("developer.apps.migration.willConvertToGranularBotApp generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.migration.willConvertToGranularBotApp",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.migration.willConvertToGranularBotApp
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));es.meta={name:"createFetcher",key:"createFetcherdeveloperAppsMigrationWillConvertToGranularBotAppFetcher",description:"developer.apps.migration.willConvertToGranularBotApp generated fetcher"};var ts=u(8677069495);function il(a,t){let{serialize:n=E.identity,deserialize:o=E.identity,days:r=0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const[l,i]=(0,e.useState)(()=>o((0,ts.v8)(t),a)||a);return[l,c=>{i(c),(0,ts.n0)(t,n(c),r)}]}d(il,"useStateWithCookie");var as=u(7400045148);const cl={installUrl:s().string.isRequired,appId:s().string.isRequired,isGranularBotApp:s().bool.isRequired,isDirectoryApproved:s().bool.isRequired,userTokenScopes:s().arrayOf(fe).isRequired,botTokenScopes:s().arrayOf(fe).isRequired,updateAppScopes:s().func.isRequired,openModal:s().func.isRequired,closeModal:s().func.isRequired,willConvertToGranularBotApp:s().func.isRequired,isClassicAppAbandoned:s().number.isRequired},Te=new N.A("update-scopes-tool"),pl=[Xo,Zo,Sn,ll],ns=d(a=>a.filter(t=>t.is_selected).map(t=>t.id),"getSelectedScopeIds"),dl=d(a=>{let{step:t,currentBotTokenScopes:n,currentUserTokenScopes:o}=a;return JSON.stringify({step:t,currentUserTokenScopes:ns(o),currentBotTokenScopes:ns(n)})},"serializeState"),ul=d((a,t)=>{if(a!==null){const n=JSON.parse(a);return{step:Math.max(t.step,n.step),currentUserTokenScopes:t.currentUserTokenScopes.map(o=>({...o,is_selected:n.currentUserTokenScopes.indexOf(o.id)>-1})),currentBotTokenScopes:t.currentBotTokenScopes.map(o=>({...o,is_selected:n.currentBotTokenScopes.indexOf(o.id)>-1}))}}},"deserializeState");function Cn(a){let{installUrl:t,appId:n,isGranularBotApp:o,isDirectoryApproved:r,userTokenScopes:l,botTokenScopes:i,updateAppScopes:c,openModal:p,closeModal:m,willConvertToGranularBotApp:f,isClassicAppAbandoned:b}=a;const[g,_]=il({step:o?4:1,currentUserTokenScopes:l,currentBotTokenScopes:i},`${n}_update_scopes`,{serialize:dl,deserialize:ul}),[y,I]=(0,e.useState)(t),[T,O]=(0,e.useState)(void 0),[R,M]=(0,e.useState)(!1),{step:k,currentUserTokenScopes:A,currentBotTokenScopes:w}=g;(0,e.useEffect)(()=>{window.scrollTo(0,0)},[k]),(0,e.useEffect)(()=>{f()},[]);const C=(0,e.useCallback)(()=>(M(!0),m(),c({userScopes:A.filter(Y=>Y.is_selected),botScopes:w.filter(Y=>Y.is_selected)}).then(Y=>{let{install_url:ee}=Y;I(ee),_({...g,step:k+1}),O(void 0)}).catch(()=>{O(Te.t("Rats, there was an error updating your app. Try again?"))}).finally(()=>M(!1))),[m,w,A,_,g,k,c]),{goToPrevious:P,goToNext:D}=(0,e.useMemo)(()=>({goToPrevious:()=>{O(void 0),M(!1),_(k===3?{...g,step:1}:{...g,step:Math.max(k-1,1)})},goToNext:()=>{k<3?(M(!1),_({...g,step:k+1})):k===3&&p({element:e.createElement(as.A,{onClose:m,onCancel:m,onSubmit:C,cancelButtonText:r?Te.t("Cancel"):Te.t("No, go back"),submitButtonText:r?Te.t("Upgrade"):Te.t("Yes, I\u2019m sure"),submitButtonType:r?"danger":"primary",title:r?Te.t("Upgrade your published app"):Te.t("Are you sure you want to update your app?")},r?e.createElement(e.Fragment,null,e.createElement("p",null,Te.t("Before upgrading your app to use granular permissions, here\u2019s what you should know:")),e.createElement("ul",null,e.createElement("li",null,Te.t("You can\u2019t reverse the upgrade.")),e.createElement("li",null,Te.rt("Your installation flow must use the new <a>v2 OAuth flow</a>.",null,Y=>{let{text:ee}=Y;return e.createElement(S.A,{href:"/authentication/oauth-v2"},ee)})),e.createElement("li",null,Te.t("You should only select the scopes your app needs to function, and avoid unnecessary duplication across bot and user tokens.")),e.createElement("li",null,Te.rt("You\u2019ll need to resubmit your app for review and may need to meet <a>additional guidelines</a> before changes are applied.",null,Y=>{let{text:ee}=Y;return e.createElement(S.A,{href:"/reference/slack-apps/directory-submission-checklist"},ee)})),e.createElement("li",null,Te.t("When resubmitting your app for review, please provide installation instructions for a staging version of your app (with the new granular permissions) for testing purposes.")),e.createElement("li",null,Te.rt("The <a>RTM API</a> is no longer supported with granular scopes.",null,Y=>{let{text:ee}=Y;return e.createElement(S.A,{href:"/rtm"},ee)}))),e.createElement("p",null,Te.rt("See our <a>documentation</a> for more information.",null,Y=>{let{text:ee}=Y;return e.createElement(S.A,{href:"/start/distributing/directory#resubmitting"},ee)}))):e.createElement("p",null,Te.rt("Please ensure that your app does not require the <a>RTM API</a>, as it is no longer supported with granular scopes.",null,Y=>{let{text:ee}=Y;return e.createElement(S.A,{href:"/rtm"},ee)})))})}}),[m,r,p,_,g,k,C]),B=(0,e.useCallback)(Y=>{const ee=Y.target.name;_({...g,currentBotTokenScopes:w.map(me=>me.id===ee?{...me,is_selected:Y.target.checked}:me)})},[w,_,g]),Oe=(0,e.useCallback)((Y,ee)=>{_({...g,currentBotTokenScopes:w.map(me=>Y.indexOf(me.id)>-1?{...me,is_selected:ee}:me)})},[w,_,g]),se=(0,e.useCallback)(Y=>{const ee=Y.target.name;_({...g,currentUserTokenScopes:A.map(me=>me.id===ee?{...me,is_selected:Y.target.checked}:me)})},[A,_,g]),$=(0,e.useCallback)((Y,ee)=>{_({...g,currentUserTokenScopes:A.map(me=>Y.indexOf(me.id)>-1?{...me,is_selected:ee}:me)})},[A,_,g]);let Z=E.noop,K=E.noop;k===1?(Z=B,K=Oe):k===2&&(Z=se,K=$);const ue=pl[k-1];return e.createElement(ue,{installUrl:y,appId:n,isClassicAppAbandoned:b,error:T,isSubmitting:R,botTokenScopes:w,userTokenScopes:A,goToPrevious:P,goToNext:D,onToggleScope:Z,onToggleScopes:K})}d(Cn,"BaseUpdateScopesTool"),Cn.displayName="BaseUpdateScopesTool",Cn.propTypes=cl;const ml=d((a,t)=>{let{appId:n}=t;return{updateAppScopes:o=>{let{userScopes:r,botScopes:l}=o;return a((0,Nt.$l)({appId:n,userScopes:r,botScopes:l}))},willConvertToGranularBotApp:()=>a(es({app:n,willConvert:!0})),openModal:function(){for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return a((0,ve.q)(...r))},closeModal:function(){for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return a((0,te.O)(...r))}}},"update_scopes_tool_mapDispatchToProps"),_l=Kr((0,be.N)(null,ml)(Cn));var gl=u(8995927630),fa=u(4240099559);const os=(0,Fe.Ay)(a=>{var t;return(t=a.appOrgAwareness)===null||t===void 0?void 0:t.isOrgAware});os.meta={name:"createSelector",key:"createSelectorgetIsOrgAware",description:a=>{var t;return(t=a.appOrgAwareness)===null||t===void 0?void 0:t.isOrgAware}};const ss=(0,Fe.Ay)(a=>{var t;return(t=a.appOrgAwareness)===null||t===void 0?void 0:t.showError});ss.meta={name:"createSelector",key:"createSelectorgetShowError",description:a=>{var t;return(t=a.appOrgAwareness)===null||t===void 0?void 0:t.showError}};const Nn=(0,ae.A)("sets an app to be org ready using an app id",async function(a,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};await a((0,J.H)({method:"developer.apps.migration.orgReady",args:n}))});Nn.meta={name:"createFetcher",key:"createFetchersetOrgReady",description:"sets an app to be org ready using an app id"},Nn.propTypes={app:s().string.isRequired};const fl=Nn,rs=(0,et.Ay)("Request the app be made org aware from the API and update orgAwareness on the store",(a,t,n)=>(a((0,fa.N)(null)),a(fl({app:n})).then(()=>{a((0,fa.N)(!0))}).catch(()=>a((0,fa.U)(!0)))));rs.meta={name:"createThunk",key:"createThunkoptInToOrgAwareness",description:"Request the app be made org aware from the API and update orgAwareness on the store"};const hl=rs;var at=u(1754261232);const Yt=new N.A("org_level_apps_developer"),bl={appId:s().string.isRequired,isGranularBotApp:s().bool.isRequired,hasIncomingWebhooksBotScope:s().bool.isRequired,showError:s().bool,isOrgAware:s().bool},El={showError:!1,isOrgAware:!1};function ha(a){let{isGranularBotApp:t,hasIncomingWebhooksBotScope:n,appId:o,showError:r,isOrgAware:l}=a,i=null,c="";return r&&(c="-error",i=e.createElement("span",null,Yt.t("There was a problem enabling org-wide distribution of your app. Please try again in a few minutes."))),!l&&!t&&(c="-update-scopes",i=e.createElement(e.Fragment,null,e.createElement("p",null,e.createElement("b",null,Yt.rt("Update your app\u2019s scopes"))),e.createElement("span",null,Yt.rt("To enable org-readiness, please update your scopes to use granular permissions. <a>Update scopes</a>",null,p=>{let{text:m}=p;return e.createElement("a",{href:`/apps/${o}/update-to-granular-scopes`},e.createElement("span",null,m))})))),n&&(c="-incoming-webhooks",i=e.createElement(e.Fragment,null,e.createElement("p",null,e.createElement("b",null,Yt.rt("No support for incoming webhooks"))),e.createElement("span",null,Yt.rt("Org-readiness doesn\u2019t currently support apps with incoming webhooks. Your app can still be installed at the org level, but incoming webhooks will not.")))),i?e.createElement(x.Ay,{type:"boxed",level:r?"error":"info",align:"left","data-qa":`org-level-apps-alert${c}`},i):null}d(ha,"OrgLevelAppsAlert"),ha.displayName="OrgLevelAppsAlert",ha.propTypes=bl,ha.defaultProps=El;const Al=ha,ba=new N.A("org_level_apps_developer"),vl={isOrgAware:s().bool},yl={isOrgAware:!1};function Ea(a){let{isOrgAware:t}=a;return e.createElement(e.Fragment,null,t&&e.createElement("p",{"data-qa":"org-level-apps-greeting-enabled"},e.createElement("b",null,ba.t("Org-readiness is enabled",{fallbackHash:"4d337cfa5e73f10903d89295eff063a435bc75b3"}))),e.createElement("p",null,ba.rt("An org-ready app is installed one time in your organization.")),e.createElement("p",null,ba.rt("After installation, your app can then be made accessible to one, many, or all workspaces within the organization. Access is managed by your organization administrator.")),e.createElement("p",null,ba.rt("Certain app features require org-readiness in order to function properly. <Link>Learn more</Link>.",null,n=>{let{text:o}=n;return e.createElement(S.A,{href:"https://api.slack.com/enterprise/apps"},e.createElement("span",null,o))})))}d(Ea,"OrgLevelAppsGreeting"),Ea.displayName="OrgLevelAppsGreeting",Ea.propTypes=vl,Ea.defaultProps=yl;const kl=Ea;var Ot=u(2554874446);const Sl={isGranularBotApp:s().bool.isRequired,isOrgAware:s().bool,showError:s().bool,notAvailableLabel:s().oneOfType([s().object,s().array,s().string]),onClick:s().func.isRequired,children:s().oneOfType([s().arrayOf(s().node),s().node]).isRequired},wl={showError:!1,notAvailableLabel:"",isOrgAware:!1};function In(a){let{isGranularBotApp:t,isOrgAware:n,showError:o,onClick:r,notAvailableLabel:l,children:i}=a;return n?null:o||!t?e.createElement("div",{className:"opt-action--disabled","data-qa":"org-level-apps-opt-in-disabled"},e.createElement(Je.A,{type:"info-circle"})," ",l):n===null?e.createElement(W.Ay,{className:"opt-action--loading",size:"medium",disabled:!0,"data-qa":"org-level-apps-opt-in-loading"},e.createElement(Ot.A,{color:"blue",size:"medium"})):e.createElement(W.Ay,{className:"opt-action--enabled",type:"primary",size:"medium",onClick:r,"data-qa":"org-level-apps-opt-in-available"},i)}d(In,"OrgLevelAppsActionButton"),In.propTypes=Sl,In.defaultProps=wl;var pe=u(5801635383);const Bt=new N.A("org_level_apps_developer"),Tl={isVisible:s().bool,onClose:s().func.isRequired,onOptIn:s().func.isRequired},Cl={isVisible:!1};function Aa(a){let{isVisible:t,onClose:n,onOptIn:o}=a;const[r,l]=(0,e.useState)(!1);return e.createElement(v.dW,{closeModal:n,isOpen:t,className:"p-org_level_apps__speed-bump-modal",dataQa:"p-org_level_apps__speed-bump-modal",contentLabel:Bt.t("Enable Org-Readiness")},e.createElement(v.rQ,null,e.createElement(v.Rc,{title:Bt.rt("Enable Org-Readiness")})),e.createElement(v.$m,{"data-qa":"org-level-apps-speed-bump-content"},e.createElement(v.qf,null,e.createElement(pe.A,{text:Bt.t("I understand that opting out of this feature cannot be easily done. Opting out will require submitting a request into Slack Help Center.",{fallbackHash:"e4ea7f98f60dd73515da5a752b68ae2e1756e90e"}),type:"inline",cursor:"pointer",className:"speed-bump-modal__agree"},e.createElement(zt.A,{id:"i-agree-field",name:"i-agree-field",checked:!!r,onChange:()=>l(!r),"data-qa":"org_level_apps_speed_bump__understand"})))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(v.s_,{type:"outline","aria-label":Bt.t("Cancel")},Bt.t("Cancel")),e.createElement(W.Ay,{type:"primary",onClick:o,disabled:!r},Bt.rt("Yes, Enable",{fallbackHash:"2e02623966f9391facf6eaefc8b079ed5b630bee"})))))}d(Aa,"OrgLevelAppsModal"),Aa.displayName="OrgLevelAppsModal",Aa.propTypes=Tl,Aa.defaultProps=Cl;const Nl=Aa,va=new N.A("org_level_apps_developer"),Il={appId:s().string.isRequired,appName:s().string.isRequired,isGranularBotApp:s().bool.isRequired,hasIncomingWebhooksBotScope:s().bool.isRequired,isOrgAwareOnPageLoad:s().bool,actionSetIsOrgAware:s().func.isRequired,actionOptInToOrgAwareness:s().func.isRequired,isOrgAware:s().bool,showError:s().bool},Ol={isOrgAwareOnPageLoad:void 0,isOrgAware:null,showError:!1},ya=d(a=>{let{isOrgAwareOnPageLoad:t,actionSetIsOrgAware:n,actionOptInToOrgAwareness:o,isOrgAware:r,isGranularBotApp:l,hasIncomingWebhooksBotScope:i,appId:c,appName:p,showError:m}=a;(0,e.useEffect)(()=>(n(t),E.noop),[t,n]);const[f,b]=(0,e.useState)(!1);return e.createElement("div",{"data-qa":"org-level-apps-component"},e.createElement(Al,{isGranularBotApp:l,hasIncomingWebhooksBotScope:i,appId:c,showError:m,isOrgAware:r}),e.createElement("h2",null,va.rt("Enable org-readiness",{fallbackHash:"bf1fceda38deee481730230d79bf203f46cc4d72"})),e.createElement(kl,{isOrgAware:r}),e.createElement(In,{isGranularBotApp:l,isOrgAware:r,showError:m,onClick:()=>b(!0),notAvailableLabel:va.rt("Opt-in not available")},va.rt("Enable Org-Readiness")),e.createElement(Nl,{isVisible:f,onClose:()=>{b(!1)},onOptIn:()=>{o(c),b(!1)}}),!t&&r?e.createElement(at.Ay,{type:"success",showCloseButton:!0,isFixedPosition:!1,topOffset:80,"data-qa":"org-level-apps-success-banner"},e.createElement("span",null,va.rt("{appName} has enabled org-readiness. <a>Learn more</a>.",{appName:p},g=>{let{text:_}=g;return e.createElement(S.A,{href:"https://api.slack.com/enterprise/apps"},e.createElement("span",null,_))}))):null)},"OrgLevelApps");ya.displayName="OrgLevelApps",ya.propTypes=Il,ya.defaultProps=Ol;const xl=d(a=>({actionOptInToOrgAwareness:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return a(hl(...n))},actionSetIsOrgAware:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return a((0,fa.N)(...n))}}),"org_level_apps_mapDispatchToProps"),Pl=d(a=>({isOrgAware:os(a),showError:ss(a)}),"org_level_apps_mapStateToProps"),Rl=(0,gl.N)(Pl,xl)(ya),ls=d(a=>{let{id:t,labelText:n,labelSubtext:o,value:r}=a;return e.createElement(e.Fragment,null,e.createElement(pe.A,{text:n,subtext:o,htmlFor:t}),e.createElement(H.A,{"data-qa":t,id:t,name:t,type:"text",readOnly:!0,value:r,className:"overflow_ellipsis sk_foreground_min_solid_bg neutral_grey_bg"}))},"AppDetailsItem");ls.displayName="AppDetailsItem";const is=ls;var nt=u(4105466432),Ce=u(6898274218),Ml=u(8579629782),Bl=u.n(Ml);function On(){return On=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},On.apply(this,arguments)}d(On,"section_extends");const Ll=d(a=>e.createElement(nt.A,On({className:"sk_primary_background"},a)),"CardWithBackground"),cs=d(a=>{let{className:t,title:n,subTitle:o,action:r,children:l,"data-qa":i,type:c="default"}=a;const p=c==="card"?Ll:e.Fragment;return e.createElement(p,null,e.createElement(Ce.A,{className:ce()(Bl().section,t),"data-qa":i},(n||o||r)&&e.createElement("div",{className:"display_flex justify_content_between margin_bottom_75"},e.createElement("div",null,n&&e.createElement("h2",null,n),o&&e.createElement("div",{className:"padding_top_25 padding_bottom_25"},o)),r&&e.createElement("div",null,r)),l))},"Section");cs.displayName="Section";const ps=cs;var ds=u(9659290600);const xn=new N.A("developer_app_settings"),us=d(a=>{let{appId:t,dateCreated:n}=a;return e.createElement(ps,{title:xn.t("App Details"),type:"card"},e.createElement("div",{className:"display_flex"},e.createElement("div",{className:"full_width"},e.createElement(is,{id:"app_id",labelText:xn.t("App ID"),value:t})),!!n&&e.createElement("div",{className:"full_width"},e.createElement("div",{className:"margin_left_100"},e.createElement(is,{id:"date_created",labelText:xn.t("Date of App Creation"),value:(0,ds.A)(n)})))))},"AppDetailsSection");us.displayName="AppDetailsSection";const Ul=us,ms=[{id:"connections:write",description:"Route your app\u2019s interactions and event payloads over WebSockets"},{id:"authorizations:read",description:"View information about your app\u2019s authorizations on installed teams"},{id:"app_configurations:write",description:"Configure your application"}],Dl=["connections:write"];var Pn=u(7628228114);const _s=(0,Le.C6)("creates an app level token for an app",(a,t,n)=>{let{appId:o,description:r,scope:l}=n;var i;return(i=a((0,J.H)({method:"developer.apps.appLevelTokens.create",args:{app_id:o,description:r,scope:l},reason:"create_app_level_token"})))===null||i===void 0?void 0:i.then(c=>(0,Pn.t)(c))});_s.meta={name:"createFetcher",key:"createFetchercreateAppLevelToken",description:"creates an app level token for an app"};const gs=(0,Le.C6)("gets the string for an app level token from its ID",(a,t,n)=>{let{appId:o,tokenId:r}=n;var l;return(l=a((0,J.H)({method:"developer.apps.appLevelTokens.getTokenString",args:{app_id:o,token_id:r},reason:"get_app_level_token_string"})))===null||l===void 0?void 0:l.then(i=>{let{token:c}=i;return{token:c}})});gs.meta={name:"createFetcher",key:"createFetchergetAppLevelTokenString",description:"gets the string for an app level token from its ID"};const fs=(0,Le.C6)("lists app level tokens for an app",(a,t,n)=>{let{appId:o}=n;var r;return(r=a((0,J.H)({method:"developer.apps.appLevelTokens.list",args:{app_id:o},reason:"list_app_level_tokens"})))===null||r===void 0?void 0:r.then(l=>(0,Pn.t)(l))});fs.meta={name:"createFetcher",key:"createFetcherlistAppLevelTokens",description:"lists app level tokens for an app"};const hs=(0,Le.C6)("revokes a particular app level token for an app",(a,t,n)=>{let{appId:o,tokenId:r}=n;var l;return(l=a((0,J.H)({method:"developer.apps.appLevelTokens.revoke",args:{app_id:o,token_id:r},reason:"revoke_app_level_token"})))===null||l===void 0?void 0:l.then(i=>(0,Pn.t)(i))});hs.meta={name:"createFetcher",key:"createFetcherrevokeAppLevelToken",description:"revokes a particular app level token for an app"};var Rn=u(813063804);const Ge=new N.A("developer_app_settings"),Lt="app_level_token_string",bs=d(a=>{let{appId:t,onRevokeToken:n,token:o}=a;const r=(0,We.wA)(),[l,i]=(0,e.useState)(""),c=(0,e.useCallback)(()=>{r((0,te.O)())},[r]),p=(0,e.useCallback)(()=>{r((0,ve.q)({element:e.createElement(Rn.A,{"data-qa":"app_level_token_revoke_speedbump",onCancel:c,onClose:c,cancelButtonText:Ge.t("No, Go Back"),submitButtonType:"danger",submitButtonText:Ge.t("Yes, I\u2019m Sure"),title:Ge.t("Are you sure?"),onSubmit:()=>{r(hs({appId:t,tokenId:o.id})),n(o.id),c(),c()}},e.createElement("p",null,Ge.t("This will invalidate the token, and any requests using this token will no longer work"))),isStackable:!0}))},[t,r,c,n,o]);return(0,e.useEffect)(()=>{r(gs({appId:t,tokenId:o.id})).then(m=>{i(m.token)})},[t,r,o.id]),e.createElement(as.A,{onCancel:c,onClose:c,cancelButtonText:Ge.t("Done"),showSubmitButton:!1,title:o==null?void 0:o.description},e.createElement("p",null,Ge.t("Properties of an app level token")),e.createElement("div",{className:"p-app_level_tokens_info__properties"},e.createElement("div",{className:"p-app_level_tokens_info__property"},e.createElement("strong",null,Ge.t("Generated By")),e.createElement("br",null),e.createElement("span",null,o==null?void 0:o.creatorDisplayName)),e.createElement("div",{className:"p-app_level_tokens_info__property"},e.createElement("strong",null,Ge.t("Date Generated")),e.createElement("br",null),e.createElement("span",null,(0,ds.A)(o==null?void 0:o.dateCreated)))),e.createElement("fieldset",{className:"p-app_level_tokens_info__fieldset"},e.createElement(pe.A,{text:Ge.t("Token"),htmlFor:Lt}),e.createElement(H.A,{className:"p-app_level_tokens_info__input","data-qa":Lt,id:Lt,name:Lt,readOnly:!0,value:l}),e.createElement("div",{className:"p-app_level_tokens_info__input_button_wrapper"},e.createElement(V.Ay,{className:"p-app_level_tokens_info__input_button","data-qa":`${Lt}_copy`,onClick:()=>{(0,Jo.x3)(l)},size:"small",type:"outline"},Ge.t("Copy")),e.createElement(V.Ay,{className:"p-app_level_tokens_info__input_button","data-qa":`${Lt}_revoke`,onClick:p,size:"small",type:"outline"},Ge.t("Revoke")))),e.createElement("div",{className:"p-app_level_tokens_info__scopes"},e.createElement("strong",null,Ge.t("Scope")),o.scope.split(",").map(m=>{var f;return e.createElement("div",{key:m,className:"p-app_level_tokens_info__scope"},e.createElement("span",{className:"p-app_level_tokens_info__scope_name"},m),e.createElement("span",{className:"p-app_level_tokens_info__scope_description"},(f=ms.find(b=>b.id===m))===null||f===void 0?void 0:f.description))})))},"AppLevelTokensInfoModal");bs.displayName="AppLevelTokensInfoModal";const Es=bs;var ot=u(2570011386),ql=u(6823536907),ka=u(8360779596),Sa=u(4046260305),wa=u(7046275923),Ta=u(8452484807),Ca=u(9552776029),Na=u(1121338857),Ia=u(1140811968);const st=new N.A("developer_app_settings"),As=d(a=>{let{appId:t,isGranularBotApp:n=!0,onCreateToken:o,onRevokeToken:r=E.noop,preselectedScopeIds:l=[],title:i}=a;const c=(0,We.wA)(),[p,m]=(0,e.useState)(""),[f,b]=(0,e.useState)(l),[g,_]=(0,e.useState)([]),y=(0,e.useCallback)(()=>{c((0,te.O)())},[c]),I=(0,e.useCallback)(w=>{m(w),g.length>0&&_([])},[g.length]),T=(0,e.useCallback)(()=>{(!p||!p.trim())&&_([{id:"required",message:st.t("Required")}])},[p]),O=(0,e.useCallback)(async()=>{y();const w=await c(_s({appId:t,description:p,scope:f.join(",")}));o(w),c((0,ve.q)({element:e.createElement(Es,{appId:t,onRevokeToken:r,token:w})}))},[t,c,p,y,o,r,f]),[R,M]=(0,E.partition)(ms,w=>(0,E.includes)(f,w.id)),k=R.map(w=>(0,E.includes)(l,w.id)?{...w,is_required:!0}:w),A=n?M:M.filter(w=>!(0,E.includes)(Dl,w.id));return e.createElement(ka.A,{labelledby:"undistribute_modal_title",closeModal:y,role:"dialog","data-qa":"app_level_token_model"},e.createElement(Na.A,null,e.createElement(Ia.A,{title:i??st.t("Generate an app-level token"),id:"undistribute_modal_title"})),e.createElement(Sa.A,null,e.createElement(wa.A,null,e.createElement(pe.A,{className:"margin_bottom_100",text:st.t("Token Name"),htmlFor:"app_level_tokens_generate_modal_description"},e.createElement(ot.A,{className:"margin_bottom_0",id:"app_level_tokens_generate_modal_description","data-qa":"app_level_tokens_generate_modal_description",isRequired:!0,onBlur:T,onChange:I,name:"app_level_tokens_generate_modal_description",value:p,placeholder:st.t("This will be how you refer to your token")}),e.createElement(ql.A,{errors:g})),e.createElement(pe.A,{text:st.t("Scopes to be accessed by this token")}),e.createElement(sa,{addButtonText:st.t("Add Scope"),scopeHeadingText:st.t("Scope"),canDeleteScopes:!0,"data-qa":"app_level_tokens_generate_modal_scopes",emptyMessage:st.t("You haven\u2019t added any scopes for your app-level token."),selectedScopes:k,availableScopes:A,selectScope:w=>{const C=f.concat(w.id);b(C)},unselectScope:w=>{const C=(0,E.without)(f,w.id);b(C)}}))),e.createElement(Ta.A,null,e.createElement(Ca.A,null,e.createElement(V.Ay,{type:"outline",onClick:y},st.t("Cancel")),e.createElement(V.Ay,{disabled:(0,E.isEmpty)(p)||(0,E.isEmpty)(f),onClick:O,"data-qa":"app_level_tokens_generate_modal_go"},st.t("Generate")))))},"AppLevelTokensGenerateModal");As.displayName="AppLevelTokensGenerateModal";const Fl=As,Oa=d(function(){let{path:a,appId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=`https://api.${(0,pt.Xk)()}`;return t?`${n}/apps/${t}${a?`/${a}`:""}`:a?`${n}/${a}`:n},"get_api_site_url_getApiSiteUrl");var U=u(4353451521);const Hl=[U.b.ROUTE_APP_GENERAL,U.b.ROUTE_APP_SUBMISSION,U.b.ROUTE_APP_DISTRIBUTE,U.b.ROUTE_APP_SECURITY,U.b.ROUTE_APP_SUBMITTED,U.b.ROUTE_APP_SOCKET_MODE,U.b.ROUTE_APP_DOMAIN_VERIFICATION,U.b.ROUTE_APP_MANIFEST,U.b.ROUTE_APP_COLLABORATORS,U.b.ROUTE_APP_FUNCTIONS,U.b.ROUTE_APP_LOGS,U.b.ROUTE_APP_SUBMISSION_LISTING,U.b.ROUTE_APP_SUBMISSION_SCOPES,U.b.ROUTE_APP_SUBMISSION_SECURITY,U.b.ROUTE_APP_SUBMISSION_TESTING,U.b.ROUTE_APP_SUBMISSION_AUTOCHECKS,U.b.ROUTE_APP_USER_ID_TRANSLATION,U.b.ROUTE_APP_BETA_FEATURES],vs={[U.b.ROUTE_APP_BASIC_INFO]:"general",[U.b.ROUTE_APP_COLLABORATORS]:"collaborators",[U.b.ROUTE_APP_INSTALL]:"install-on-team",[U.b.ROUTE_APP_HOME]:"app-home",[U.b.ROUTE_APP_AI_ASSISTANT_VIEW]:"app-assistant",[U.b.ROUTE_APP_WEBHOOKS]:"incoming-webhooks",[U.b.ROUTE_APP_INTERACTIVE]:"interactive-messages",[U.b.ROUTE_APP_COMMANDS]:"slash-commands",[U.b.ROUTE_APP_OAUTH]:"oauth",[U.b.ROUTE_APP_SUBSCRIPTIONS]:"event-subscriptions",[U.b.ROUTE_APP_TRANSLATION]:"user-ids",[U.b.ROUTE_APP_GRANULAR_UPDATE]:"update-to-granular-scopes",[U.b.ROUTE_APP_SECURITY]:"security-compliance",[U.b.ROUTE_APP_ORG_LEVEL]:"org-level",[U.b.ROUTE_APP_WORKFLOW_EXTENSIONS]:"workflow-extensions",[U.b.ROUTE_APP_LIVE_SETTINGS]:"published-settings",[U.b.ROUTE_APP_DISTRIBUTE]:"distribute",[U.b.ROUTE_APP_SUBMISSION]:"app-submission",[U.b.ROUTE_APP_DOMAIN_VERIFICATION]:"domain-verification",[U.b.ROUTE_APP_DEVELOPER_BETA_FEATURES]:"developer-beta",[U.b.ROUTE_APP_SUBMISSION_LISTING]:"app-submission-lisitng",[U.b.ROUTE_APP_SUBMISSION_SCOPES]:"app-submission-scopes",[U.b.ROUTE_APP_SUBMISSION_SECURITY]:"app-submission-security",[U.b.ROUTE_APP_SUBMISSION_TESTING]:"app-submission-testing",[U.b.ROUTE_APP_SUBMISSION_AUTOCHECKS]:"app-submission-autochecks",[U.b.ROUTE_APP_USER_ID_TRANSLATION]:"user-ids?from_gantry=true",[U.b.ROUTE_APP_BETA_FEATURES]:"developer-beta?from_gantry=true"},xp=d(a=>{let{routeName:t}=a;return!Hl.includes(t)},"shouldUseLegacyRoute"),Pp=d(a=>{let{routeName:t}=a;return vs[t]},"getLegacyRoutePath"),Wl=d(a=>{let{appId:t,routeName:n}=a;return Oa({appId:t,path:vs[n]})},"getLegacyUrl"),Rp=d(a=>{window.location.assign(getApiSiteUrl({appId:a}))},"redirectToLegacyBasicInfo");var Ut=u(5878453988),Gl=u(7404609868),_t=u(8001509878);const xt=new N.A("developer_app_settings"),$l=10,jl=d(a=>{let{appId:t,teamId:n}=a;return`${`https://app.${(0,pt.Xk)()}`}/app-settings/${n}/${t}/socket-mode`},"getSocketModeUrl"),ys=d(a=>{let{appId:t,isGranularBotApp:n,tokenLimit:o=$l}=a;const r=(0,We.wA)(),l=(0,_t.d4)(Gl.ZT),[i,c]=(0,e.useState)([]),[p,m]=(0,e.useState)(!0),f=(0,e.useCallback)(async()=>{m(!0);const _=await r(fs({appId:t}));c(_.appLevelTokens),m(!1)},[t,r]),b=(0,e.useCallback)(_=>{c(i.concat(_))},[i]),g=(0,e.useCallback)(_=>{const y=i.filter(I=>I.id!==_);c(y)},[i]);return(0,e.useEffect)(()=>{f()},[f]),e.createElement(ps,{title:xt.t("App-Level Tokens")},e.createElement("p",null,xt.rt("App-level tokens allow your app to use platform features that apply to multiple (or all) installations\u2014for example, the <a>API to list event authorizations</a>. Features have distinct scopes, so request only the scopes for the features you need. Each app can have a maximum of 10 app-level tokens at one time.",null,_=>{let{text:y}=_;return y.props.children==="Socket Mode"?e.createElement(Ut.A,{target:"_self",href:jl({appId:t,teamId:l})},y):e.createElement(Ut.A,{target:"_self",href:Wl({appId:t,routeName:U.b.ROUTE_APP_SUBSCRIPTIONS})},y)})),p&&e.createElement(Ot.A,null),!p&&e.createElement("div",{className:"p-app_level_tokens_table","data-qa":"app_level_tokens_table"},e.createElement("h4",{className:"p-app_level_tokens_table__heading"},xt.t("Tokens")),!(0,E.isEmpty)(i)&&e.createElement("div",{className:"p-app_level_tokens_table__row p-app_level_tokens_table__row--labels"},e.createElement("span",{className:"p-app_level_tokens_table__row_item"},xt.t("Token Name")),e.createElement("span",{className:"p-app_level_tokens_table__row_item"},xt.t("Scope"))),i.map(_=>e.createElement("div",{className:"p-app_level_tokens_table__row p-app_level_tokens_table__row--tokens",key:_.id,"data-qa":`app_level_tokens_row_${_.id}`},e.createElement("span",{className:"p-app_level_tokens_table__row_item"},e.createElement(Ut.A,{onClick:()=>r((0,ve.q)({element:e.createElement(Es,{appId:t,onRevokeToken:g,token:_})}))},_.description)),e.createElement("span",{className:"p-app_level_tokens_table__row_item"},_.scope.replace(",",", "))))),i.length>=o&&e.createElement("p",{className:"p-app_level_tokens_table__limit_text"},xt.t("This app has hit the limit of 10 tokens. To generate a new token, first revoke an existing token.")),e.createElement(V.Ay,{className:"margin_top_150",disabled:i.length>=o,"data-qa":"generate_app_level_token",onClick:()=>r((0,ve.q)({element:e.createElement(Fl,{appId:t,isGranularBotApp:n,onCreateToken:b,onRevokeToken:g})})),type:"outline"},xt.t("Generate Token and Scopes")))},"AppLevelTokensSection");ys.displayName="AppLevelTokensSection";const zl=ys,Vt=new N.A("developer_app_settings"),Kl=`${Oa()}/legacy/oauth`,ks=d(a=>{let{onClose:t,onSubmit:n}=a;const o=(0,We.wA)(),r=(0,e.useCallback)(()=>{o((0,te.O)()),t&&t()},[o,t]),l=(0,e.useCallback)(async()=>{o((0,te.O)()),n&&n()},[o,n]);return e.createElement(ka.A,{labelledby:"oauth_token_management__title",closeModal:r,role:"dialog","data-qa":"oauth_token_management_modal"},e.createElement(Na.A,null,e.createElement(Ia.A,{id:"oauth_token_management_title",title:Vt.t("App will permanently use token management")})),e.createElement(Sa.A,null,e.createElement(wa.A,null,e.createElement("p",null,Vt.rt("Enable token management if you want to run your own OAuth server and keep track of your own tokens, as described <oauth>here</oauth>.",{"<oauth>":i=>{let{text:c}=i;return e.createElement(Ut.A,{target:"_blank",href:Kl},c)}})),e.createElement("p",null,Vt.t("Note that once you enable token management, it can not be disabled.")))),e.createElement(Ta.A,null,e.createElement(Ca.A,null,e.createElement(V.Ay,{type:"outline",onClick:r},Vt.t("Cancel")),e.createElement(V.Ay,{onClick:l,"data-qa":"oauth_token_management_submit"},Vt.t("Opt In")))))},"OAuthTokenManagementConfirmModal");ks.displayName="OAuthTokenManagementConfirmModal";const Yl=ks,Mp={AlreadyEnabled:"already_enabled",AppNotFound:"app_not_found",NoPermission:"no_permission",AppNotEligible:"app_not_eligible"},Mn=(0,ae.A)("developer.apps.migration.enableTokenManagement generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.migration.enableTokenManagement",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.migration.enableTokenManagement
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));Mn.meta={name:"createFetcher",key:"createFetcherdeveloperAppsMigrationEnableTokenManagementFetcher",description:"developer.apps.migration.enableTokenManagement generated fetcher"};var Ss=u(3061415641),ws=u(861706622),Vl=u(581410105);const Qt=new N.A("developer_app_settings"),Ts=`${Oa()}/legacy/oauth`,Cs=d(a=>{let{appId:t,useTokenManagement:n,forceReloadOnChange:o}=a;const r=(0,We.wA)(),[l,i]=(0,e.useState)(null),[c,p]=(0,e.useState)(!1),[m,f]=(0,e.useState)(null);(0,e.useEffect)(()=>{i(n)},[n]);const b=(0,e.useCallback)(async()=>{try{f(null),p(!0),await r(Mn({app:t,reason:"enable_token_management_via_app_config_ui"})),i(!0),p(!1),o&&(0,ws.A)((0,Vl.M6)(window.location.href,"token_management_enabled","1"))}catch{p(!1),f(Qt.t("Something went wrong. Please try again later."))}},[r,t,o]),g=(0,e.useCallback)(async()=>{r((0,ve.q)({element:e.createElement(Yl,{onSubmit:b})}))},[r,b]),_=Qt.rt("If your App consists of only Functions that are run-on-Slack, Slack handles authentication and token management for you. If you wish to use other features such as event subscriptions or you plan to perform API calls from your own service (outside of a run-on-Slack Function), enable this feature to manage your own OAuth tokens as described <oauth>here</oauth>. Once this has been enabled, it cannot be disabled.",{"<oauth>":I=>{let{text:T}=I;return e.createElement(Ut.A,{target:"_blank",href:Ts},T)}}),y=Qt.rt("This app uses token management, you can run your own OAuth server and keep track of tokens as described <oauth>here</oauth>.",{"<oauth>":I=>{let{text:T}=I;return e.createElement(Ut.A,{target:"_blank",href:Ts},T)}});return(0,E.isBoolean)(l)?e.createElement(e.Fragment,null,e.createElement("p",null,l?y:_),m&&e.createElement(x.Ay,{level:x.A_.error,className:"margin_bottom_100"},m),!l&&e.createElement(Ss.A,{type:"primary",loading:c,onClick:g,"data-qa":"oauth_token_management_opt_in","aria-label":Qt.t("Opt In")},Qt.t("Opt In"))):null},"OAuthTokenManagementSection");Cs.displayName="OAuthTokenManagementSection";const Ql=Cs;var Bn=u(1352302167);const Bp=Bn.g.ALL,Lp=Bn.R1.ALL,Up=Bn.q1.LAST_7_DAY,Dp=50,qp="LOADING_KEY",Xl="app_config_feedback";var Zl=u(8460234784);const Jl=new N.A("developer_app_settings"),ei={elementName:"app_settings_redesign_nav_feedback",onClick:{enableClogAction:!0}},Ns=d(()=>e.createElement(S.A,{className:"p-app_settings_feedback_link",autoClogProps:ei,"data-qa":"nav_feedback",href:(0,Zl.A)({cuWebTags:Xl})},Jl.t("Give feedback")),"FeedbackLink");Ns.displayName="FeedbackLink";const ti=Ns;var ai=u(6897360268);const Ne=new N.A("developer_app_settings"),ni={elementName:"cancel_submit",onClick:{enableClogAction:!0}},oi={elementName:"submit",onClick:{enableClogAction:!0}},Is=d(a=>{let{appId:t,route:n}=a;const o=(0,We.wA)(),[r,l]=(0,e.useState)(!1),[i,c]=(0,e.useState)(null),[p,m]=(0,e.useState)(!1),f=(0,e.useCallback)(()=>m(!0),[]),b=(0,e.useCallback)(()=>m(!1),[]),[g,_]=(0,e.useState)(null);(0,e.useEffect)(()=>{switch(n){case"event-subscriptions":_(Ne.t("Event Subscriptions"));break;case"incoming-webhooks":_(Ne.t("Incoming Webhooks"));break;case"slash-commands":_(Ne.t("Slash Commands"));break;case"interactive-messages":_(Ne.t("Interactivity & Shortcuts"));break;case"workflow-extensions":_(Ne.t("Workflow Steps"));break;default:_(null);break}},[n]);const y=(0,e.useCallback)(()=>{o((0,te.O)())},[o]),I=(0,e.useCallback)(async()=>{try{b(),c(null),l(!0),await o(Mn({app:t,reason:"enable_token_management_via_app_config_ui"})),n?(0,ws.A)(Oa({appId:t,path:n})):(l(!1),o((0,te.O)()),o((0,ai.Pq)({appId:t,showSuccessBanner:!0})))}catch{l(!1),c(Ne.t("Something went wrong. Please try again later."))}},[o,t,n,b]);return e.createElement(v.dW,{closeModal:y},e.createElement(v.rQ,null,e.createElement(v.Rc,{title:g||Ne.t("Token Management")})),e.createElement(v.$m,null,e.createElement(v.qf,{className:"padding_bottom_25"},e.createElement("p",null,Ne.t("If your app is only using functions hosted on Slack, we do the auth and token management."),g&&e.createElement(e.Fragment,null,Ne.rt(" You need to manage your own OAuth tokens if you wish to use {feature}.",{feature:g}))),i&&e.createElement(x.Ay,{level:x.A_.error,className:"margin_top_100"},i))),e.createElement(v.jl,null,p&&e.createElement(v.ty,{heading:Ne.t("Do you want to opt in?"),description:Ne.t("Once token management is enabled, it cannot be disabled."),continueButtonLabel:Ne.t("Continue"),continueButtonType:"primary",onContinue:I,cancelButtonLabel:Ne.t("Cancel"),onCancel:b}),e.createElement(v.ox,null,e.createElement(V.Ay,{"data-qa":"cancel_submit",type:"outline",onClick:y,autoClogProps:ni},Ne.t("Cancel")),e.createElement(Ss.A,{loading:r,"data-qa":"submit",onClick:f,autoClogProps:oi,"aria-label":Ne.t("Manage your own OAuth Tokens")},Ne.t("Manage your own OAuth Tokens")))))},"TokenManagementOptInModal");Is.displayName="TokenManagementOptInModal";const si=Is,Os=d(a=>{let{appId:t}=a;const n=(0,We.wA)();return(0,e.useEffect)(()=>{const o=document.querySelectorAll('[data-js="token_management_opt_in"]');!o||o.length===0||o.forEach(r=>{r.addEventListener("click",()=>{n((0,ve.q)({element:e.createElement(si,{appId:t,route:r.getAttribute("data-route")})}))})})},[]),null},"TokenManagementOptInLegacyLauncher");Os.displayName="TokenManagementOptInLegacyLauncher";const ri=Os;var li=u(4161192697),gt=u(6326244958);const ft=new N.A("developer_app_settings"),ii={position:"static"},xs=d(a=>{let{appId:t}=a;const[n,o]=(0,e.useState)(()=>(0,gt.bg)(t)),r=(0,We.wA)();return(0,e.useEffect)(()=>{const l=d(()=>{(0,gt.wp)(t),r((0,te.O)()),o(!1)},"onClose");(0,gt.bg)(t)&&r((0,ve.q)({element:e.createElement(Rn.A,{className:"p-app_manifest_guidance_modal","data-qa":"welcome_modal",showCancelButton:!1,submitButtonText:ft.t("Got It"),title:ft.t("Welcome to your app\u2019s configurations"),onClose:l,onSubmit:l},e.createElement("p",{className:"sk_foreground_max"},ft.t("This is where you\u2019ll manage basic information about your app, collaborators, and configurations for your settings & features.")),e.createElement("p",null,ft.rt("<strong>Next step:</strong> Install this app to your workspace!")))}))},[t,r]),(0,e.useEffect)(()=>{const l=d(()=>{(0,gt.j4)(t),r((0,te.O)())},"onClose");if((0,gt.e4)(t)&&!n){const i=document.querySelector('[data-install-to-team="1"]');if(i&&!i.classList.contains("disabled")){const c=i.dataset.requestInstallToTeam;if(i.dataset.requestSubmitted)return()=>{};i.addEventListener("click",l);let m,f;return(0,E.isUndefined)(c)?(m=ft.t("First, install your app"),f=(0,gt.Q1)(t)?ft.t("This will get your app onto your workspace - then return to the tutorial"):ft.t("This will get your app onto your workspace")):(m=ft.t("First, request to install"),f=ft.t("You\u2019ll need approval to get this app onto your workspace")),r((0,ve.q)({element:e.createElement(li.Ay,{anchorElement:i,centerOnArrow:!0,closeCoachmark:l,isOpen:!0,orientation:"bottom",overlayStyle:ii,isMegaphoneCoachmark:!1},e.createElement("strong",{className:"subtitle"},m),e.createElement("p",{className:"sk_foreground_max"},f))})),()=>i.removeEventListener("click",l)}}return()=>{}},[t,r,n]),(0,e.useEffect)(()=>{if((0,gt.Q1)(t)){const l=document.querySelector('[data-js="app_tutorial_banner"]'),i=document.querySelector('[data-js="app_tutorial_banner_close"]'),c=document.querySelector('[data-js="app_tutorial_banner_link"]');if(l&&i){const p=d(()=>{var f;(0,gt.pb)(t),l.classList.add("hidden"),(f=document.querySelector("#page_contents"))===null||f===void 0||f.classList.remove("with_tutorial_banner")},"onClose"),m=d(()=>{(0,gt.pb)(t)},"onLinkClick");return i.addEventListener("click",p),c==null||c.addEventListener("click",m),()=>{i.removeEventListener("click",p),c==null||c.removeEventListener("click",m)}}}return()=>{}},[t]),null},"AppManifestGuidanceContainer");xs.displayName="AppManifestGuidanceContainer";const ci=xs;var Xt=u(6770730460),xa=u(8255398493);const Fp={AppNotFound:"app_not_found",AppEditDisabled:"app_edit_disabled",BetaNotOptedIn:"beta_not_opted_in"},Ln=(0,ae.A)("developer.apps.apphome.edit generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.apphome.edit",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.apphome.edit
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));Ln.meta={name:"createFetcher",key:"createFetcherdeveloperAppsApphomeEditFetcher",description:"developer.apps.apphome.edit generated fetcher"};var Pa=u(3083928934),Ve=u(1416482128),Ra=u(4332857818),Ma=u(4134549971);const Ps=(0,ae.A)("adds bot user to app",function(a,t){let{appId:n,displayName:o,username:r,alwaysActive:l}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.botusers.add",args:{app:n,always_active:l,real_name:o,username:r},reason:"developer-apps-botusers-api/addBotUser"}))});Ps.meta={name:"createFetcher",key:"createFetcheraddBotUser",description:"adds bot user to app"};const Rs=(0,ae.A)("edits bot user for app",function(a,t){let{appId:n,displayName:o,username:r,alwaysActive:l}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.botusers.edit",args:{app:n,always_active:l,real_name:o,username:r},reason:"developer-apps-botusers-api/editBotUser"}))});Rs.meta={name:"createFetcher",key:"createFetchereditBotUser",description:"edits bot user for app"};const Ms=(0,ae.A)("removes bot user from app",function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.botusers.delete",args:{app:n},reason:"developer-apps-botusers-api/removeBotUser"}))});Ms.meta={name:"createFetcher",key:"createFetcherremoveBotUser",description:"removes bot user from app"};const Un=(0,et.Ay)("updates existing bot user or adds a new one",function(a,t){let{appId:n,displayName:o,username:r,alwaysActive:l,isNew:i=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=t(),p=c.bootData,m=le(c,{appId:n}),f=un(c,n),b=(0,E.merge)({},f,{always_active:l,real_name:o,username:r}),g={...c.bootData,app_to_edit:{...m,payload:{...m==null?void 0:m.payload,bot:b}}};return a((0,Ma.B)(g)),a((i?Ps:Rs)({appId:n,alwaysActive:b.always_active,displayName:b.real_name,username:b.username})).catch(()=>{a((0,Ma.B)(p))})});Un.meta={name:"createThunk",key:"createThunkupsertAppBotUser",description:"updates existing bot user or adds a new one"};var Bs=u(1720688348),Ls=u(6605823818);const Q=new N.A("app_home_admin"),Us=80,Ds=21,pi={appId:s().string.isRequired,bot:s().object.isRequired,setBannerText:s().func.isRequired,closeModal:s().func.isRequired,upsertAppBotUser:s().func.isRequired,featureUpdatingMissingAriaLabelsGroupTreatment:s().string},di={featureUpdatingMissingAriaLabelsGroupTreatment:"off"},Ba=d(a=>{let{appId:t,bot:n,closeModal:o,upsertAppBotUser:r,setBannerText:l,featureUpdatingMissingAriaLabelsGroupTreatment:i}=a;const c=(0,E.isEmpty)(n),[p,m]=(0,e.useState)(n.real_name),[f,b]=(0,e.useState)(n.username),[g,_]=(0,e.useState)(),[y,I]=(0,e.useState)(),T=(0,e.useCallback)(A=>{m(A);const w=A.trim();let C;w.length===0?C=Q.t("Unfortunately, you can\u2019t leave this blank."):w.length>Us?C=Q.t("Unfortunately, names can\u2019t be longer than {maxLength} characters.",{maxLength:Us}):w.charAt(0)==="@"?C=Q.t("Names can\u2019t start with the @ sign \u2014\xA0that\u2019s how people will mention you in conversation."):/^[-_.'\u2018\u2019",(){}[\]/;]+$/.test(w)?C=Q.t("Names can\u2019t consist solely of punctuation. Please elaborate!"):/[`~!@#$%^&*+=\\:"<>?|]/.test(w)?C=Q.t("Mostly, names can\u2019t contain punctuation. (Apostrophes, spaces, and periods are fine.)"):Ls.xt.indexOf((0,Bs.A)(w))>-1?C=Q.t("That name\u2019s already being used by Slack."):C=void 0,_(C)},[]),O=(0,e.useCallback)(A=>{b(A);const w=A.trim();let C;w.length===0?C=Q.t("Please fill in a username."):w.length>Ds?C=Q.t("Sorry, that\u2019s a bit too long! Usernames must be fewer than {maxLengthPlusOne} characters.",{maxLengthPlusOne:Ds+1}):!/^[\w._-]+$/.test(w)||/\s/.test(w)?C=Q.t("Usernames can\u2019t contain special characters. Sorry about that!"):/^[^\W_]/.test(A)?w!==w.toLocaleLowerCase()?C=Q.t("Sorry, usernames must be lowercase!"):Ls.xt.indexOf((0,Bs.A)(w))>-1?C=Q.t("That name\u2019s already being used by Slack."):C=void 0:C=Q.t("Usernames must start with a letter or number. Sorry about that!"),I(C)},[]),R=(0,e.useCallback)(()=>{r({appId:t,isNew:c,displayName:p,username:f}).then(()=>{const A=c?Q.t("Bot user added!"):Q.t("App display name saved!");l(A)}),o()},[r,t,c,p,f,o,l]),M=c?Q.t("Add App Display Name"):Q.t("Edit App Display Name"),k=c?Q.t("Add"):Q.t("Save");return e.createElement(ka.A,{closeModal:o,role:"dialog",contentLabel:i==="on"?Q.t("Bot details"):""},e.createElement(Na.A,null,e.createElement(Ia.A,{title:M,id:"bot_dialog_title","data-qa":"bot_dialog_header"})),e.createElement(Sa.A,null,e.createElement(wa.A,{"data-qa":"bot_dialog_body"},e.createElement(pe.A,{text:Q.t("Display Name (Bot Name)"),subtext:Q.t("This is the name of your Bot")},e.createElement(ot.A,{"data-qa":"bot_display_name",value:p,onChange:T,hintText:Q.t("Names must be shorter than 80 characters, and can\u2019t use punctuation (other than apostrophes and periods)."),placeholder:Q.t("Display Name"),useInlineAlert:!0,errorText:g})),e.createElement(pe.A,{text:Q.t("Default username"),subtext:Q.t("This is the name your users will refer to your Bot as in Slack")},e.createElement(ot.A,{"data-qa":"bot_default_username",value:f,onChange:O,hintText:Q.t("If this username isn\u2019t available on any workspace that tries to install it, we will slightly change it to make it work. Usernames must be all lowercase. They cannot be longer than 21 characters and can only contain letters, numbers, periods, hyphens, and underscores."),placeholder:Q.t("Username"),useInlineAlert:!0,errorText:y})))),e.createElement(Ta.A,{"data-qa":"bot_dialog_footer"},e.createElement(Ca.A,null,e.createElement(V.Ay,{type:"outline",onClick:o,"data-qa":"bot_dialog_cancel"},Q.t("Cancel")),e.createElement(V.Ay,{disabled:!!(g||y),onClick:R,"data-qa":"bot_dialog_go"},k))))},"AppHomeRemoveBotModal");Ba.displayName="AppHomeRemoveBotModal",Ba.propTypes=pi,Ba.defaultProps=di;const ui=d(a=>(0,Ve.zH)({closeModal:te.O,upsertAppBotUser:Un},a),"app_home_update_bot_modal_mapDispatchToProps"),mi=d(a=>({featureUpdatingMissingAriaLabelsGroupTreatment:(0,tt._Z)(a,"updating_missing_aria_labels")}),"app_home_update_bot_modal_mapStateToProps"),_i=(0,be.N)(mi,ui)(Ba),qs=(0,et.Ay)("removes bot user from app",function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=t(),r=o.bootData,l=le(o,{appId:n}),i={...o.bootData,app_to_edit:{...l,payload:{...l==null?void 0:l.payload,bot:{}}}};return a((0,Ma.B)(i)),a(Ms({appId:n})).catch(()=>{a((0,Ma.B)(r))})});qs.meta={name:"createThunk",key:"createThunkremoveAppBotUser",description:"removes bot user from app"};const Dt=new N.A("app_home_admin"),gi={appId:s().string.isRequired,numTeams:s().number.isRequired,setBannerText:s().func.isRequired,closeModal:s().func.isRequired,removeAppBotUser:s().func.isRequired},Dn=d(a=>{let{appId:t,closeModal:n,numTeams:o,removeAppBotUser:r,setBannerText:l}=a;const i=(0,e.useCallback)(()=>{r({appId:t}).then(()=>{l(Dt.t("Removed bot user"))}),n()},[t,n,r,l]),c=o>0?Dt.t("Removing bot user from {numTeams} {numTeams, plural, =1 {workspace} other {workspaces}}",{numTeams:o}):Dt.t("Bot user is not installed on any workspaces");return e.createElement(Rn.A,{cancelButtonText:Dt.t("No, Cancel"),onCancel:n,onClose:n,onSubmit:i,submitButtonText:Dt.t("Yes, Delete It"),submitButtonType:"danger",title:c},Dt.t("Are you sure you want to delete this bot user from your app?  Your app home\u2019s Home & Message tab will no longer be available to your users."))},"app_home_remove_bot_modal_AppHomeRemoveBotModal");Dn.displayName="AppHomeRemoveBotModal",Dn.propTypes=gi;const fi=d(a=>(0,Ve.zH)({closeModal:te.O,removeAppBotUser:qs},a),"app_home_remove_bot_modal_mapDispatchToProps"),hi=(0,be.N)(null,fi)(Dn);function La(){return La=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},La.apply(this,arguments)}d(La,"app_home_bot_extends");const oe=new N.A("app_home_admin"),Fs="oauth?from_app_home=1",qn="update-to-granular-scopes?from_app_home=1",Hs="/docs/token-types#bot",bi={appId:s().string.isRequired,bot:s().object.isRequired,isAppGranularBotScope:s().bool.isRequired,numTeams:s().number.isRequired,selectedBotScopes:s().arrayOf(s().string),openModal:s().func.isRequired,upsertAppBotUser:s().func.isRequired},Ei={selectedBotScopes:[]},Ua=d(a=>{let{appId:t,bot:n,openModal:o,isAppGranularBotScope:r,numTeams:l,upsertAppBotUser:i,selectedBotScopes:c}=a;const[p,m]=(0,e.useState)(),f=(0,e.useCallback)(()=>{const R={appId:t,bot:n,setBannerText:m};o({element:e.createElement(_i,La({},R))})},[t,n,o]),b=(0,e.useCallback)(()=>{const R={appId:t,numTeams:l,setBannerText:m};o({element:e.createElement(hi,La({},R))})},[t,o,l]),g=(0,e.useCallback)(()=>{i({appId:t,alwaysActive:!n.always_active})},[t,n.always_active,i]),_=!r&&!(0,E.isEmpty)(n)||r&&!(0,E.isEmpty)(c);let y,I,T;const O=e.createElement(e.Fragment,null,e.createElement("strong",null,oe.t("Or, update your app to Granular Scopes")),e.createElement("p",null,oe.t("Ensuring your app only asks for the information it needs to function keeps your app and your customers more secure.")),e.createElement(ze.A,{className:"c-link c-button c-button--primary c-button--medium no_underline",href:qn},oe.t("Update Scopes")));if(_){y=oe.t("Your App\u2019s Presence in Slack",{fallbackHash:"012df88dc2a9fdfa5fa6f93b1d602d3c9fb9c013"}),r?T=e.createElement(e.Fragment,null,e.createElement("h4",null,oe.t("Bot Token Added")),e.createElement("p",null,oe.rt("A <a>bot token</a> in your app lets users at-mention it, add it to channels and conversations, and allows you to turn on tabs in your app\u2019s home. It makes it possible for users to interact with your app in Slack. You can adjust your Bot Token\u2019s permissions in <a>OAuth & Permissions</a>.",null,M=>{let{text:k}=M;return k.props.children==="bot token"?e.createElement(S.A,{href:Hs},k):e.createElement(ze.A,{href:"oauth"},k)}))):T=O;const R=oe.t("Always Show My Bot as Online");I=e.createElement(e.Fragment,null,!r&&e.createElement("p",null,oe.rt("Your app is using a <strong>legacy Bot User, which comes with a bundle of scopes</strong>. You can continue to use Bot User, but to get more functionality, use much less permissive scopes, and ensure future-proofing, we recommend updating to <a>Granular Scopes</a>.",null,M=>{let{tag:k,text:A}=M;return k==="a"?e.createElement("a",{href:qn},A):null})),e.createElement("p",null,oe.t("Your app display name and presence is how your users will see your app in Slack.")),e.createElement("div",{className:"margin_bottom_200 padding_150 rounded sk_foreground_min_solid_bg"},e.createElement("div",{className:"display_flex align_items_center padding_bottom_150"},e.createElement("strong",{className:"flex_one"},oe.t("App Display Name")),e.createElement(W.Ay,{onClick:f,type:"outline","data-qa":"app_display_name_edit"},oe.t("Edit")),!r&&e.createElement(W.Ay,{className:"margin_left_50",onClick:b,type:"outline"},oe.t("Remove Bot"))),e.createElement("div",{className:"top_border padding_top_150"},e.createElement("div",{className:"margin_bottom_50"},e.createElement("strong",null,oe.t("Display Name (Bot Name):"))," ",n.real_name),e.createElement("div",null,e.createElement("strong",null,oe.t("Default Name:"))," ",n.username))),e.createElement("div",null,e.createElement("div",{className:"display_flex justify_content_between"},e.createElement("div",{className:"margin_right_400"},e.createElement("strong",null,R),!r&&e.createElement("p",null,oe.t("When this is off, Slack automatically displays whether your bot is online based on usage of the RTM API."))),e.createElement(Xt.A,{isToggled:n.always_active,onChange:g,ariaLabel:R}))))}else r?(y=oe.t("First, assign a scope to your bot token"),I=e.createElement(e.Fragment,null,e.createElement("p",null,oe.rt("A <a>bot token</a> makes it possible for users to interact with your app. A bot token lets users at-mention it, and add it to channels and conversations. It also allows you to turn on tabs in your app\u2019s home.",null,R=>{let{text:M}=R;return e.createElement(S.A,{href:Hs},M)})),e.createElement("p",null,oe.rt("<a>Scopes</a> govern an app\u2019s capabilities and permissions. You\u2019ll need to add at least one to your bot token to show the Home or Message tab in your app home. You can review and add the appropriate scopes under <strong>Scopes</strong> section in <a>OAuth & Permissions</a>.",null,R=>{let{text:M,tag:k}=R;if(k==="strong")return e.createElement("strong",null,M);const A=M.props.children==="Scopes"?"/docs/oauth-scopes":Fs;return e.createElement(S.A,{href:A},M)})),e.createElement(ze.A,{className:"c-link c-button c-button--primary c-button--medium no_underline",href:Fs,"data-qa":"review_scopes_add_button"},oe.t("Review Scopes to Add")))):(y=oe.t("First, add a legacy bot user"),I=e.createElement(e.Fragment,null,e.createElement("p",null,oe.rt("A legacy bot user comes with a bundle of bot scopes, which are needed to show the app home tab. We do recommend updating to <a>Granular Scopes</a> and choosing the least permissive-bot scope that\u2019s needed for your app instead. You can always add a bot user for now, and update later.",null,R=>{let{text:M}=R;return e.createElement(S.A,{href:qn},M)})),e.createElement(W.Ay,{onClick:f,type:"outline","data-qa":"add_legacy_bot_user_button"},oe.t("Add Legacy Bot User"))),T=O);return e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement("h4",null,y),I),T&&e.createElement(Ce.A,null,T),p?(0,Ra.createPortal)(e.createElement(at.Ay,{isFixedPosition:!1},p),document.querySelector(".alert_page_stacked")):null)},"AppHomeBot");Ua.displayName="AppHomeBot",Ua.propTypes=bi,Ua.defaultProps=Ei;const Ai=d(a=>(0,Ve.zH)({openModal:ve.q,upsertAppBotUser:Un},a),"app_home_bot_mapDispatchToProps"),vi=(0,be.N)(null,Ai)(Ua),Fn=new N.A("app_home_admin"),Hn=d(a=>{const t=d(n=>{let{title:o,message:r,closeModal:l}=n;const i=d(()=>l({closeWithoutChanges:!0}),"onCloseModal"),c=e.createElement(v.qf,null,e.createElement("p",null,r)),p=e.createElement(v.ox,null,e.createElement(v.s_,{"data-qa":"warning_cancel_button",type:"outline",onClick:()=>l({closeWithoutChanges:!0}),"aria-label":Fn.t("Cancel")},Fn.t("Cancel")),e.createElement(W.Ay,{"data-qa":"warning_done_button",type:"danger",onClick:()=>l({closeWithoutChanges:!1})},Fn.t("Turn Off")));return e.createElement(a,{modalTitle:o,contentSection:c,onCloseModal:i,footerSection:p})},"WarningModal");return t.displayName="WarningModal",t.propTypes={title:s().string.isRequired,message:s().string.isRequired,closeModal:s().func.isRequired},t},"withWarningModal");Hn.displayName="withWarningModal",Hn.propTypes={ModalHOC:s().element};const yi=Hn,ki=new N.A("app_home_admin"),Si={onCloseModal:s().func.isRequired,containerClassName:s().string,modalTitle:s().node,contentSection:s().node,footerSection:s().node,featureUpdatingMissingAriaLabelsGroupTreatment:s().string},wi={containerClassName:null,modalTitle:null,contentSection:null,footerSection:null,featureUpdatingMissingAriaLabelsGroupTreatment:"off"},Da=d(a=>{let{containerClassName:t,onCloseModal:n,modalTitle:o,contentSection:r,footerSection:l,featureUpdatingMissingAriaLabelsGroupTreatment:i}=a;return e.createElement(v.dW,{className:t,isOpen:!0,centered:!0,closeModal:n,shouldCloseOnOverlayClick:!1,contentLabel:i==="on"?ki.t("App Home tabs"):""},e.createElement(v.rQ,null,e.createElement(v.Rc,{title:o})),e.createElement(v.$m,null,e.createElement(v.qf,null,r)),e.createElement(v.jl,null,e.createElement(v.ox,null,l)))},"AppHomeModalHOC");Da.displayName="AppHomeModalHOC",Da.propTypes=Si,Da.defaultProps=wi;const Ti=d(a=>({featureUpdatingMissingAriaLabelsGroupTreatment:(0,tt._Z)(a,"updating_missing_aria_labels")}),"app_home_modal_hoc_mapStateToProps"),Ci=(0,be.N)(Ti)(Da);function Wn(){return Wn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},Wn.apply(this,arguments)}d(Wn,"app_home_admin_ga_extends");const z=new N.A("app_home_admin"),Ni={appId:s().string.isRequired,homeTabEnabled:s().bool,messagesTabDisabled:s().bool,messagesTabReadOnlyEnabled:s().bool,selectedBotScopes:s().arrayOf(s().string),isAiApp:s().bool,bot:s().object,isAppGranularBotScope:s().bool,logger:s().object.isRequired,numTeams:s().number},Ii={bot:{},isAppGranularBotScope:!1,homeTabEnabled:!1,messagesTabDisabled:!1,messagesTabReadOnlyEnabled:!1,numTeams:0,selectedBotScopes:[],isAiApp:!1},Oi=yi(Ci),rt={home:"home",messages:"messages",none:"none"},qa=d(a=>{let{appId:t,bot:n,logger:o,homeTabEnabled:r,messagesTabDisabled:l,messagesTabReadOnlyEnabled:i,numTeams:c,isAppGranularBotScope:p,selectedBotScopes:m,isAiApp:f}=a;const b=(0,We.wA)(),[g,_]=(0,e.useState)(r),[y,I]=(0,e.useState)(l),[T,O]=(0,e.useState)(i),[R,M]=(0,e.useState)(rt.none),k=!p&&!(0,E.isEmpty)(n)||p&&!(0,E.isEmpty)(m),A=(0,e.useCallback)(async $=>{const Z={};$.forEach(K=>{Z[K.key]=K.value,K.hook(K.value)});try{await b(Ln({app:t,...Z,reason:"AppHomeAdminGA:setAppHomeMeta"}))}catch(K){$.forEach(ue=>{ue.hook(!ue.value)}),o.error(`App Home Dev Pages. Error calling developer.apps.apphome.edit endpoint: ${K}`)}},[t,o,b]),w=(0,e.useCallback)(()=>y?A([{key:"messagesTabDisabled",value:!1,hook:I}]):M(rt.messages),[y,A]),C=(0,e.useCallback)(()=>A([{key:"messagesTabReadOnlyEnabled",value:!T,hook:O}]),[T,A]),P=(0,e.useCallback)(()=>g?M(rt.home):A([{key:"homeTabEnabled",value:!0,hook:_},{key:"betaOptedIn",value:!0,hook:E.noop}]),[g,A]),D=(0,e.useCallback)($=>{let{closeWithoutChanges:Z=!1}=$;if(Z){M(rt.none);return}R===rt.home?A([{key:"homeTabEnabled",value:!1,hook:_}]):R===rt.messages&&A([{key:"messagesTabDisabled",value:!0,hook:I}]),M(rt.none)},[A,R]);let B;k?B=z.t("Turn on the Home tab and/or Message tab to display in your app home."):p?B=z.rt("Turn on the Home tab and/or Message tab to display these surfaces to your users when they view your app in Slack. <strong>Currently, these options are disabled</strong>. You\u2019ll need to first <a>add a scope</a> to your bot token.",null,$=>{let{tag:Z,text:K}=$;return Z==="a"?e.createElement(S.A,{href:"oauth?from_app_home=1"},K):e.createElement("strong",null,K)}):B=z.rt("Turn on the Home tab and/or Message tab to display these surfaces to your users when they view your app in Slack. <strong>Currently, these options are disabled</strong>. You\u2019ll need to add a legacy bot user OR update to Granular Scopes and add at least one scope.");const Oe=f?z.t("Turn Off Chat Tab?",{fallbackHash:"3c5ab909360355ba9fb5b647aa445c463bb22826"}):z.t("Turn Off Messages Tab?"),se=f?z.t("People using your app will no longer see the Chat tab or any of the messages in there.",{fallbackHash:"97e32c29946c2611d75ec1c16085572cb0439009"}):z.t("People using your app will no longer see the Messages tab or any of the messages in there.");return e.createElement(e.Fragment,null,e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement("div",{className:"p-app_home_admin__sub_section"},e.createElement("div",{className:"p-app_home_admin__info"},e.createElement("h4",null,z.t("Where people find your app on Slack")),e.createElement("p",null,z.rt("Your app\u2019s home includes three tabs (Home, Messages and About) that help people have richer interactions with your app and better understand its functionality. <br></br> <Link>Learn more</Link>",null,$=>{let{key:Z,text:K,tag:ue}=$;return ue==="br"?e.createElement("br",null):e.createElement(S.A,{key:Z,href:"https://api.slack.com/reference/app-home",target:"_blank"},K)}))),e.createElement(xa.A,{className:"p-app_home_admin__image",alt:z.t("App Home Image"),src:"/img/developers/app-homes/img-app-home@2x.png",renderPending:()=>e.createElement("div",{className:"p-app_home_admin__image"},e.createElement(Ot.A,{color:"blue"}))})))),e.createElement(vi,{appId:t,bot:n,selectedBotScopes:m,isAppGranularBotScope:p,numTeams:c}),e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement("div",{className:"p-app_home_admin__section"},e.createElement("h3",{className:"margin_bottom_150"},z.t("Show Tabs")),e.createElement("p",null,B),e.createElement("div",{className:"p-app_home_admin__row"},e.createElement("div",null,e.createElement("p",{className:"margin_bottom_50"},e.createElement("b",null,z.t("Home Tab"))),!k&&e.createElement("p",{className:"caption sk_foreground_high_solid"},p?z.t("The Home tab requires a bot token with at least one scope. Add a scope first to continue."):z.t("The Home tab requires a Bot User for legacy apps, or one bot scope for modernized apps updated to Granular Bot Scopes")),e.createElement("p",null,z.t("Block Kit components you add to this tab let people easily interact with this app."))),e.createElement("div",null,e.createElement(Xt.A,{"data-qa":"app_home_toggle",isToggled:g&&k,id:"app_home_toggle",onChange:P,isDisabled:!k,ariaLabel:z.t("Display Home tab")}))),e.createElement("div",{className:"p-app_home_admin__row"},e.createElement("div",null,e.createElement("div",null,e.createElement("b",{className:"p-app_home_admin__link"},z.t("Helpful links"))),e.createElement("ul",null,e.createElement("li",null,e.createElement(S.A,{href:"https://api.slack.com/surfaces/tabs",target:"_blank"},z.t("App Home documentation"))),e.createElement("li",null,e.createElement(S.A,{href:"https://api.slack.com/block-kit",target:"_blank"},z.t("How to use Block Kit"))),e.createElement("li",null,e.createElement(S.A,{href:"https://api.slack.com/tools/block-kit-builder",target:"_blank"},z.t("Block Kit Builder tool"))))))),e.createElement("div",{className:"p-app_home_admin__section"},e.createElement("div",{className:"p-app_home_admin__row"},e.createElement("div",null,e.createElement("p",{className:"margin_bottom_50"},e.createElement("b",null,f?z.t("Chat Tab",{fallbackHash:"3d04aa457fafbba737db21ed35ed09e2de0c3b46"}):z.t("Messages Tab"))),!k&&e.createElement("p",{className:"caption sk_foreground_high_solid"},p?z.rt("The Message tab requires read/write scopes added to your bot token such as <code>im:history</code>, <code>im:write</code>, and/or <code>im:read</code>"):z.rt("The Message tab requires read/write scopes such as <code>im:history</code>, <code>im:write</code>, and/or <code>im:read</code>")),e.createElement("p",null,z.t("Direct messages your app sends will show in this tab."))),e.createElement("div",null,e.createElement(Xt.A,{"data-qa":"message_tab_toggle",isToggled:!y&&k,id:"message_tab_toggle",onChange:w,isDisabled:!k,ariaLabel:f?z.t("Display Chat tab",{fallbackHash:"43ec747285225d290c12505a2cd77535b66dbd4c"}):z.t("Display Messages tab")}))),k&&!y&&e.createElement("div",{className:"p-app_home_admin__row"},e.createElement(pe.A,{text:f?z.t("Allow users to send Slash commands and messages from the chat tab",{fallbackHash:"06b514fd191ec547b3c95fe545f8ba9c13ed32bb"}):z.t("Allow users to send Slash commands and messages from the messages tab"),type:"inline",cursor:"pointer"},e.createElement(zt.A,{"data-qa":"message_tab_read_only_toggle",id:"message_tab_read_only_toggle",checked:!T,onChange:C})))),e.createElement("div",{className:"p-app_home_admin__section"},e.createElement("div",{className:"p-app_home_admin__info"},e.createElement("p",{className:"margin_bottom_50"},e.createElement("b",null,z.t("About Tab"))),e.createElement("p",{className:"margin_0"},z.rt("Helpful info about what this app does will show in this tab. You can edit this info in the app\u2019s <a>basic information</a> section.",null,$=>{let{key:Z,text:K}=$;return e.createElement("a",{key:Z,href:`/apps/${t}/general?`,target:"_self"},K)})))))),R!==rt.none?e.createElement(Oi,{title:R===rt.home?z.t("Turn Off Home Tab?"):Oe,message:R===rt.messages?se:z.t("People using your app will no longer see the Home tab or any components you\u2019ve added there."),closeModal:D}):null)},"AppHomeAdminGA");qa.displayName="AppHomeAdminGA",qa.propTypes=Ni,qa.defaultProps=Ii;const xi=d((a,t)=>({bot:un(a,t.appId),isAppGranularBotScope:Lo(a,t.appId),logger:(0,Re.Ay)({state:a}),numTeams:Uo(a,t.appId)}),"app_home_admin_ga_mapStateToProps"),Pi=(0,be.N)(xi)(qa);function Ri(a){return e.createElement(Pa.A,{subtype:"app_home_admin"},e.createElement(Pi,Wn({},a)))}d(Ri,"AppHomeAdminGAWithErrorBoundary");var Fa=u(8534490092),Zt=u(2454249541),qt=u(8101618621),Ws=u(2627038375),Ha=u(1232078760);const Gs=(0,et.Ay)("Fetch config for app, but only if safe to do so",async function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=t(),{fetchInFlight:r,saveInFlight:l,unsaved:i}=(0,Ha.A6)(o,n);return!r&&!l&&!i?(a((0,qt.kj)(n)),a((0,Nt.cT)(n)).then(c=>a((0,qt.GK)({appId:n,...c}))).catch(c=>{a((0,qt.iE)(n)),(0,Ws.z3)({getState:t},c)})):yt.S.resolve()});Gs.meta={name:"createThunk",key:"createThunkmaybeFetchConfig",description:"Fetch config for app, but only if safe to do so"};const Mi=Gs;var Bi=u(8083780345),Li=u(4578666546);const Ui={onCancel:s().func,onSubmit:s().func,submitText:s().string,cancelText:s().string,disableSubmit:s().bool,disableCancel:s().bool},Di={onCancel:E.noop,onSubmit:E.noop,submitText:"Submit",cancelText:"Cancel",disableSubmit:!1,disableCancel:!1},Gn=d(a=>{let{onSubmit:t,onCancel:n,cancelText:o,submitText:r,disableCancel:l,disableSubmit:i}=a;return e.createElement("div",{className:"p-create_action_footer"},e.createElement(W.Ay,{type:"outline",onClick:n,"data-qa":"cancel_action",className:"p-create_action_footer__button",disabled:l},o),e.createElement(W.Ay,{type:"primary",onClick:t,"data-qa":"create_action",className:"p-create_action_footer__button",disabled:i},r))},"ActionFooter");Gn.propTypes=Ui,Gn.defaultProps=Di;const $s=Gn;var $n=u(3138760292);function jn(){return jn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},jn.apply(this,arguments)}d(jn,"create_action_card_extends");const qi={onChange:s().func,selected:s().bool,title:s().oneOfType([s().string,s().node]),imgSrc:s().string,imgAltText:s().string,subText:s().oneOfType([s().string,s().node])},Fi={title:"",subText:"",imgSrc:"",imgAltText:"",onChange:E.noop,selected:!1},zn=d(a=>{let{title:t,imgSrc:n,subText:o,onChange:r,selected:l,imgAltText:i,...c}=a;return e.createElement("div",jn({className:ce()("c-card p-create_action_config_form__card",{"p-create_action_config_form__card--selected":l}),tabIndex:"0",role:"switch",onKeyDown:p=>p.keyCode===13&&r(p),"aria-checked":l,onClick:r},c),e.createElement("div",{className:"p-create_action_config_form__card_body"},e.createElement("div",{className:"p-create_action_config_form__card_radio_container"},e.createElement($n.A,{readOnly:!0,checked:l,disabled:!1,tabIndex:"-1","data-qa":"action_card"})),e.createElement("div",null,e.createElement("div",{className:"p-create_action_config_form__card_title"},t),e.createElement("div",{className:"p-create_action_config_form__card_text"}," ",o))),e.createElement("div",{className:"p-create_action_config_form__card_image_container"},n?e.createElement(xa.A,{className:"p-create_action_config_form__card_img",alt:i,src:n,renderPending:()=>e.createElement("div",{className:"p-create_action_config_form__card_img_loading"},e.createElement(Ot.A,{color:"blue"}))}):null))},"ActionCard");zn.propTypes=qi,zn.defaultProps=Fi;const js=zn;var Hi=u(9946213543);function Kn(){return Kn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},Kn.apply(this,arguments)}d(Kn,"create_action_form_extends");const Ee=new N.A("developer_apps"),Wi={appId:s().string.isRequired,actionId:s().string.isRequired,type:s().string.isRequired,value:Zt.A.AppActionConfig,onSubmit:s().func,onCancel:s().func,renderPreview:s().func,nameMaxLength:s().number,descriptionMaxLength:s().number,callbackIdMaxLength:s().number,appName:s().string,appIcons:s().objectOf(s().string)},Gi={value:void 0,onSubmit:E.noop,onCancel:E.noop,renderPreview:null,nameMaxLength:24,descriptionMaxLength:150,callbackIdMaxLength:255,appName:"",appIcons:{}};let Wa=d(class extends e.PureComponent{cancel(){this.props.onCancel()}changeCallbackId(t){const{callbackIdError:n}=this.validate({callbackId:t});this.setState(o=>({...o,callbackId:t,callbackIdError:n}))}changeDescription(t){const{descriptionError:n}=this.validate({description:t});this.setState(o=>({...o,description:t,descriptionError:n}))}changeName(t){const{nameError:n}=this.validate({name:t});this.setState(o=>({...o,name:t,nameError:n}))}hasNoErrors(t){return!(t.nameError||t.descriptionError||t.callbackIdError)}isValid(){return this.hasNoErrors(this.validate(this.state))}submit(){const t=this.validate(this.state);if(this.hasNoErrors(t)){const{name:n,description:o,callbackId:r}=this.state;this.props.onSubmit({type:this.props.type,name:n,description:o,callbackId:r})}else this.setState(()=>t)}validate(t){const n=Ee.t("Unfortunately, you can\u2019t leave this blank."),o=Ee.t("For all manner of complex reasons, names simply cannot contain emoji. Try again?"),r={};return r.nameError=null,t.name?t.name.length>this.props.nameMaxLength?r.nameError=Ee.t("Names can\u2019t be longer than {num} characters.",{num:this.props.nameMaxLength}):(0,Hi.A)(t.name)&&(r.nameError=o):r.nameError=n,r.descriptionError=null,t.description?t.description.length>this.props.descriptionMaxLength&&(r.descriptionError=Ee.t("Descriptions can\u2019t be longer than {num} characters.",{num:this.props.descriptionMaxLength})):r.descriptionError=n,r.callbackIdError=null,t.callbackId?t.callbackId.length>this.props.callbackIdMaxLength&&(r.callbackIdError=Ee.t("Callback IDs can\u2019t be longer than {num} characters.",{num:this.props.callbackIdMaxLength})):r.callbackIdError=n,r}renderInput(t){let{label:n,dataQa:o,...r}=t;const{actionId:l}=this.props,i=n.toLowerCase().replace(/\s+/,""),c=`${l}-${i}`;return e.createElement(pe.A,{htmlFor:c,text:n,"data-qa":o},e.createElement(ot.A,Kn({id:c,"data-qa":c,name:i},r)))}renderPreview(){const{appId:t,renderPreview:n,type:o}=this.props;if(!n)return null;const{name:r,description:l}=this.state,i=n({appId:t,name:r,description:l,type:o});return e.createElement("div",{className:"p-create_action_form__preview"},e.createElement("h4",{className:"p-create_action_form__subtitle"},Ee.t("Preview your shortcut")),i)}render(){const{nameMaxLength:t,descriptionMaxLength:n,callbackIdMaxLength:o,value:r}=this.props,l=this.renderInput({label:Ee.t("Name"),isRequired:!0,value:this.state.name||"",maxCharacterLimit:t,onChange:this.changeName,placeholder:Ee.t("e.g. File a bug"),hintText:Ee.t("A good name is short and descriptive. Please use sentence case (e.g. File a bug, not File A Bug)."),errorText:this.state.nameError,dataQa:"action_name"}),i=this.renderInput({label:Ee.t("Short Description"),isRequired:!0,value:this.state.description||"",maxCharacterLimit:n,onChange:this.changeDescription,placeholder:Ee.t("e.g. Creates a bug report in Super App"),errorText:this.state.descriptionError,dataQa:"action_description"}),c=this.renderInput({label:Ee.t("Callback ID"),isRequired:!0,value:this.state.callbackId||"",maxCharacterLimit:o,onChange:this.changeCallbackId,placeholder:Ee.t("e.g. action_name"),hintText:Ee.t("Your app uses this to identify the shortcut. It\u2019s not visible to users."),errorText:this.state.callbackIdError,dataQa:"action_callback_id",isDisabled:!1}),p=r?Ee.t("Update"):Ee.t("Create");return e.createElement("div",{className:"p-create_action_form__modal"},e.createElement("div",{className:"p-create_action_form"},e.createElement("div",{className:"p-create_action_form__preview_container"},this.renderPreview()),e.createElement("div",{className:"p-create_action_form__details_container"},e.createElement("div",{className:"p-create_action_form__details","data-qa":"app_actions_details"},e.createElement("h4",{className:"p-create_action_form__subtitle"},Ee.t("Details")),l,i,c,e.createElement($s,{onCancel:this.cancel,onSubmit:this.submit,cancelText:Ee.t("Cancel"),submitText:p,disableSubmit:!this.isValid()})))))}constructor(t){super(t);const n=t.value||{};this.state={name:n.name||"",description:n.description||"",callbackId:n.callbackId||"",nameError:null,descriptionError:null,callbackIdError:null},(0,Fa.v)(this,["changeName","changeDescription","changeCallbackId","cancel","submit"])}},"CreateActionForm");Wa.displayName="CreateActionForm",Wa.propTypes=Wi,Wa.defaultProps=Gi;const $i=Wa;function Yn(){return Yn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},Yn.apply(this,arguments)}d(Yn,"create_action_modal_extends");const Vn="message_action",Qn="global_action",lt=new N.A("developer_apps"),ji={value:Zt.A.AppActionConfig,onCancel:s().func,isXoxaApp:s().bool},zi={onCancel:E.noop,value:void 0,isXoxaApp:!1},Ga=d(a=>{const{value:t,onCancel:n,isXoxaApp:o}=a,[r,l]=(0,e.useState)(!!t||o),i=o?Vn:Qn,[c,p]=(0,e.useState)(t?t.type:i);return e.createElement(Li.Ay,{position:"fixed",modalClasses:"p-create_action_config_form_modal",withHeader:!0,title:lt.t("Create a shortcut"),showCancelButton:!1,showGoButton:!1,onCancel:n,dataQa:"app_actions_choose_type"},r?e.createElement($i,Yn({},a,{type:c})):e.createElement("div",{className:"p-create_action_config_form__container"},e.createElement("div",null,e.createElement("h4",{className:"p-create_action_config_form__header"},lt.t("Where should this shortcut appear?"))),e.createElement("div",{className:"p-create_action_config_form__body"},e.createElement(js,{title:lt.t("Global"),subText:lt.t("Available from the shortcuts button in composers and using search in Slack"),imgSrc:"/img/app-actions/global-shortcut.svg",imgAltText:lt.t("global"),onChange:()=>p(Qn),selected:c===Qn,"data-qa":"create_global_action_card"}),e.createElement(js,{title:lt.t("On messages"),subText:lt.t("Available from the message shortcuts list on messages in a conversation"),imgSrc:"/img/app-actions/message-action.svg",imgAltText:lt.t("message action"),onChange:()=>p(Vn),selected:c===Vn,"data-qa":"create_message_action_card"})),e.createElement($s,{onCancel:n,onSubmit:()=>l(!0),cancelText:lt.t("Cancel"),submitText:lt.t("Next")})))},"CreateActionModal");Ga.displayName="CreateActionModal",Ga.propTypes=ji,Ga.defaultProps=zi;const Ki=Ga;var Yi=u(8794806366),Vi=u(1857301007),Xn=u(4400451666);function Zn(){return Zn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},Zn.apply(this,arguments)}d(Zn,"message_actions_ios_preview_extends");const ht=new N.A("message"),Qi=2*24,Jt=d(a=>{const{icon:t,label:n,description:o}=a;return e.createElement("div",{className:"p-message_actions_ios_preview__menu_item","data-qa":a["data-qa"]},e.createElement("span",{className:"p-message_actions_ios_preview__menu_item_icon p-message_actions_mobile_preview__icon"},t),e.createElement("span",{className:"p-message_actions_ios_preview__menu_item_text"},e.createElement("span",{className:"p-message_actions_ios_preview__menu_item_label"},n),e.createElement("span",{className:"p-message_actions_ios_preview__menu_item_description"},o)))},"BaseMenuItem");Jt.displayName="BaseMenuItem",Jt.propTypes={icon:s().node.isRequired,label:s().string.isRequired,description:s().string,"data-qa":s().string},Jt.defaultProps={description:"","data-qa":void 0};const Qe=d(a=>{let{icon:t,...n}=a;const o=e.createElement(Je.A,{type:t});return e.createElement(Jt,Zn({icon:o},n))},"SlackMenuItem");Qe.displayName="SlackMenuItem",Qe.propTypes={icon:s().string.isRequired};const Xi=d(()=>e.createElement("div",{className:"p-message_actions_ios_preview__menu_divider"}),"Divider"),$a=d(a=>{let{actionName:t,appName:n,appIcons:o,defaultAppIcon:r}=a;const l=(0,Xn.A)({icons:o},Qi,r),i=e.createElement("img",{src:l,alt:""});return e.createElement("div",{className:"p-message_actions_ios_preview__container"},e.createElement("div",{className:"p-message_actions_ios_preview__handle"}),e.createElement("div",{className:"p-message_actions_ios_preview__menu"},e.createElement(Qe,{icon:"mark-unread",label:ht.t("Mark unread")}),e.createElement(Qe,{icon:"clock-o",label:ht.t("Remind me")}),e.createElement(Qe,{icon:"star-o",label:ht.t("Star message")}),e.createElement(Qe,{icon:"add-reaction",label:ht.t("Add reaction")}),e.createElement(Qe,{icon:"share-action",label:ht.t("Share message")}),e.createElement(Qe,{icon:"link",label:ht.t("Copy link to message")}),e.createElement(Qe,{icon:"all-files",label:ht.t("Copy text")}),e.createElement(Qe,{icon:"thumb_tack",label:ht.t("Pin message")}),e.createElement(Xi,null),e.createElement(Jt,{icon:i,label:t,description:n,"data-qa":"app_action_menu_item"}),e.createElement(Qe,{icon:"ellipsis",label:ht.t("More actions")})))},"MessageActionsIOSPreview");$a.displayName="MessageActionsIOSPreview",$a.propTypes={actionName:s().string.isRequired,appName:s().string.isRequired,appIcons:s().objectOf(s().string),defaultAppIcon:s().string},$a.defaultProps={appIcons:{},defaultAppIcon:void 0};const Zi=$a;function Jn(){return Jn=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},Jn.apply(this,arguments)}d(Jn,"message_actions_android_preview_extends");const bt=new N.A("message"),Ji=new N.A("developer_apps"),ec=2*24,ea=d(a=>{const{icon:t,label:n,description:o}=a;return e.createElement("div",{className:"p-message_actions_android_preview__menu_item","data-qa":a["data-qa"]},e.createElement("span",{className:"p-message_actions_android_preview__menu_item_icon p-message_actions_mobile_preview__icon"},t),e.createElement("span",{className:"p-message_actions_android_preview__menu_item_label"},n),e.createElement("span",{className:"p-message_actions_android_preview__menu_item_description"},o))},"message_actions_android_preview_BaseMenuItem");ea.displayName="BaseMenuItem",ea.propTypes={icon:s().node.isRequired,label:s().string.isRequired,description:s().string,"data-qa":s().string},ea.defaultProps={description:"","data-qa":void 0};const Xe=d(a=>{let{icon:t,...n}=a;const o=e.createElement(Je.A,{type:t});return e.createElement(ea,Jn({icon:o},n))},"message_actions_android_preview_SlackMenuItem");Xe.displayName="SlackMenuItem",Xe.propTypes={icon:s().string.isRequired};const eo=d(()=>e.createElement("div",{className:"p-message_actions_android_preview__menu_divider"}),"message_actions_android_preview_Divider"),ja=d(a=>{let{actionName:t,appName:n,appIcons:o,defaultAppIcon:r}=a;const l=Ji.t("Bruce Olson - Today at 12:00 PM"),i=(0,Xn.A)({icons:o},ec,r),c=e.createElement("img",{src:i,alt:""});return e.createElement("div",{className:"p-message_actions_android_preview__container"},e.createElement("div",{className:"p-message_actions_android_preview__sender_text"},l),e.createElement("div",{className:"p-message_actions_android_preview__menu"},e.createElement(Xe,{icon:"mark-unread",label:bt.t("Mark unread")}),e.createElement(Xe,{icon:"clock-o",label:bt.t("Remind me")}),e.createElement(Xe,{icon:"star-o",label:bt.t("Star message")}),e.createElement(eo,null),e.createElement(Xe,{icon:"add-reaction",label:bt.t("Add reaction")}),e.createElement(eo,null),e.createElement(Xe,{icon:"share-action",label:bt.t("Share message")}),e.createElement(Xe,{icon:"link",label:bt.t("Copy link to message")}),e.createElement(Xe,{icon:"all-files",label:bt.t("Copy text")}),e.createElement(Xe,{icon:"thumb_tack",label:bt.t("Pin message")}),e.createElement(eo,null),e.createElement(ea,{icon:c,label:t,description:n,"data-qa":"app_action_menu_item"}),e.createElement(Xe,{icon:"ellipsis",label:bt.t("More actions")})))},"MessageActionsAndroidPreview");ja.displayName="MessageActionsAndroidPreview",ja.propTypes={actionName:s().string.isRequired,appName:s().string.isRequired,appIcons:s().objectOf(s().string),defaultAppIcon:s().string},ja.defaultProps={appIcons:{},defaultAppIcon:void 0};const tc=ja;var zs=u(2824498517);const za=new N.A("developer_apps"),ac={action:Zt.A.AppActionConfig.isRequired,onEdit:s().func.isRequired,onDelete:s().func.isRequired};let to=d(class extends e.PureComponent{onDelete(t){t.preventDefault(),this.props.onDelete(this.props.action.id)}onEdit(t){t.preventDefault(),this.props.onEdit(this.props.action.id)}render(){const{action:t}=this.props,{name:n,callbackId:o,type:r}=t,l={global_action:za.t("Global",{fallbackHash:"cdf9bbefc76982e17471539cdea1217f5e1e0119"}),message_action:za.t("Messages")};return e.createElement("div",{className:"p-app_actions_config__action_row","data-qa":"app_action_config_row"},e.createElement("div",{className:"p-app_actions_config__action_name"},e.createElement(zs.A,{className:"p-app_actions_config__action_name_btn",onClick:this.onEdit},n)),e.createElement("div",{className:"p-app_actions_config__action_name"},l[r]||r),e.createElement("div",{className:"p-app_actions_config__action_callback"},o),e.createElement("div",{className:"p-app_actions_config__action_buttons"},e.createElement(W.Ay,{pillarClassName:"p-app_actions_config__table_btn","data-qa":"app_actions_config_edit_btn",type:"outline",size:"small",onClick:this.onEdit},e.createElement(Je.A,{type:"pencil","aria-label":za.t("Edit action")})),e.createElement(W.Ay,{pillarClassName:"p-app_actions_config__table_btn","data-qa":"app_actions_config_delete_btn",type:"outline",size:"small",onClick:this.onDelete},e.createElement(Je.A,{type:"trash","aria-label":za.t("Delete action")}))))}constructor(t){super(t),(0,Fa.v)(this,["onEdit","onDelete"])}},"AppActionsConfigRow");to.displayName="AppActionsConfigRow",to.propTypes=ac;const nc=to,Ka=new N.A("developer_apps"),oc={appId:s().string.isRequired,isXoxaApp:s().bool,isDataLoaded:s().bool,fetchConfig:s().func,actions:s().arrayOf(Zt.A.AppActionConfig).isRequired,canCreateAction:s().bool,saveError:s().string,renderEditForm:s().func.isRequired,onCreateAction:s().func.isRequired,onDeleteAction:s().func.isRequired,onUpdateAction:s().func.isRequired},sc={isDataLoaded:!1,isXoxaApp:!1,fetchConfig:E.noop,canCreateAction:!1,saveError:null};let Ya=d(class extends e.PureComponent{componentDidMount(){const{appId:t}=this.props;this.props.fetchConfig({appId:t})}componentDidUpdate(t){const{actions:n,isDataLoaded:o}=this.props;if(!t.isDataLoaded&&o&&n.length>0){const r=document.querySelector(".ts_toggle"),l=document.querySelector("#attachment_action_section_add");r&&l&&(r.classList.add("checked"),l.classList.remove("hidden"))}}getCurrentAction(){const{actions:t}=this.props,{editingId:n}=this.state;return(0,E.find)(t,o=>o.id===n)}closeActionForm(){this.setState(()=>({editingId:null,editingNew:!1}))}deleteAction(t){const{appId:n}=this.props;this.props.onDeleteAction({appId:n,actionId:t})}maybeRenderEditForm(){const{appId:t,isXoxaApp:n}=this.props,{editingNew:o}=this.state,r=this.getCurrentAction();return r||o?this.props.renderEditForm({appId:t,actionId:r?r.id:"new",value:r,onSubmit:this.submitActionForm,onCancel:this.closeActionForm,isXoxaApp:n}):null}maybeRenderErrors(){const{saveError:t}=this.props;if(t){const n=(0,Ws.Po)()[t];return n?e.createElement("div",{className:"alert alert_error large_top_margin no_bottom_margin"},e.createElement("i",{className:"ts_icon ts_icon_warning"}),n):null}return null}showEditActionForm(t){this.setState(()=>({editingId:t}))}showNewActionForm(t){t.preventDefault(),this.setState(()=>({editingNew:!0}))}submitActionForm(t){const{appId:n}=this.props,{editingNew:o}=this.state,r=this.getCurrentAction();r?this.props.onUpdateAction({appId:n,action:{...t,id:r.id}}):o&&this.props.onCreateAction({appId:n,action:t}),this.closeActionForm()}renderAction(t){return e.createElement(nc,{key:t.id,action:t,onEdit:this.showEditActionForm,onDelete:this.deleteAction})}renderActionHeader(){return e.createElement("div",{className:"p-app_actions_config__action_row p-app_actions_config__header"},e.createElement("div",{className:"p-app_actions_config__action_name"},Ka.t("Name")),e.createElement("div",{className:"p-app_actions_config__action_name"},Ka.t("Location")),e.createElement("div",{className:"p-app_actions_config__action_callback"},Ka.t("Callback ID")),e.createElement("div",{className:"p-app_actions_config__action_buttons"}))}renderActionsList(){const{actions:t}=this.props;return t.map(this.renderAction)}renderCreateActionButton(){const{canCreateAction:t}=this.props,n=Ka.t("Create New Shortcut");return e.createElement(W.Ay,{pillarClassName:"p-app_actions_config__create_btn","data-qa":"create_new_action",disabled:!t,type:"outline",onClick:this.showNewActionForm,"aria-label":n},n)}render(){const{isDataLoaded:t}=this.props;return t?e.createElement("div",null,e.createElement("div",{className:"p-app_actions_config__action_list"},this.renderActionHeader(),this.renderActionsList(),this.maybeRenderEditForm()),this.renderCreateActionButton(),this.maybeRenderErrors()):e.createElement(Ot.A,null)}constructor(t){super(t),this.state={editingId:null,editingNew:!1},(0,Fa.v)(this,["showEditActionForm","deleteAction","showNewActionForm","submitActionForm","closeActionForm","renderAction"])}},"AppActionsConfigList");Ya.displayName="AppActionsConfigList",Ya.propTypes=oc,Ya.defaultProps=sc;const rc=Ya;var lc=u(4825581033);const kt=new N.A("message"),ic=2*16,St=d(a=>{let{className:t,type:n}=a;const o=kt.t("Message action");return e.createElement(G.A,{className:ce()("c-message_actions__button","p-app_actions_config_form__preview_action_button",t),size:"small",icon:n,"aria-label":o})},"MessageActionButton");St.displayName="MessageActionButton",St.propTypes={className:s().string,type:s().string.isRequired},St.defaultProps={className:""};const cc=d(()=>e.createElement("div",{className:"c-message_actions__container p-app_actions_config_form__preview_buttons"},e.createElement(St,{type:"add-reaction"}),e.createElement(St,{type:"comment-alt"}),e.createElement(St,{type:"share-square-o"}),e.createElement(St,{type:"bookmark"}),e.createElement(St,{type:"vertical-ellipsis",className:"p-app-actions_config_form__preview_buttons--active"})),"MessageActionContainer"),pc=d(a=>{let{children:t}=a;return e.createElement("div",{className:"c-menu p-app_actions_config_form__preview_menu"},e.createElement("div",{className:"c-menu__items_scroller"},e.createElement("ul",{className:"c-menu__items"},t)))},"Menu");pc.propTypes={children:s().node.isRequired};let Et=d(class extends e.PureComponent{renderContent(){const{label:t,description:n,icon:o,caret:r}=this.props;return e.createElement("li",{className:"c-menu_item__li",role:"presentation"},e.createElement("span",{className:ce()("c-menu_item__button","c-menu_item--compact")},o&&e.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon"},e.createElement("img",{src:o,alt:t})),e.createElement("div",{className:"c-menu_item__label"},t,n&&e.createElement("div",{className:"c-menu_item__description"},n)),r&&e.createElement("div",{className:"c-menu_item__submenu-indicator"},e.createElement(Pe.A,{name:"caret-right"}))))}render(){return this.renderContent()}},"MenuItem");Et.displayName="MenuItem",Et.propTypes={label:s().string.isRequired,description:s().string,icon:s().string,caret:s().bool},Et.defaultProps={description:null,icon:null,caret:!1};const Va=d(a=>{let{actionName:t,appName:n,appIcons:o,defaultAppIcon:r}=a;const l=(0,Xn.A)({icons:o},ic,r);return e.createElement("div",{className:"p-app_actions_config_form__message_preview_container"},e.createElement("p",{className:"p-app_actions_config_form__message_preview_header"},kt.t("Message")),e.createElement("p",{className:"p-app_actions_config_form__message_preview_description"},kt.t("This action can only be launched from the More actions menu in a message. You\u2019ll receive the message\u2019s content.")),e.createElement("div",{className:"p-app_actions_config_form__preview_container"},e.createElement("div",{className:"p-app_actions_config_form__preview_content"},e.createElement(cc,null),e.createElement("div",{className:"c-menu p-app_actions_config_form__preview_menu"},e.createElement("div",{className:"c-menu__items_scroller"},e.createElement("ul",{className:"c-menu__items"},e.createElement(Et,{label:kt.t("Copy link")}),e.createElement(Et,{label:kt.t("Mark unread")}),e.createElement(Et,{label:kt.t("Remind me about this"),caret:!0}),e.createElement(Et,{label:kt.t("Pin to this conversation\u2026",{fallbackHash:"de397a52e8a2b9143ed207174d57b79b6e073222"})}),e.createElement(lc.bX,null),e.createElement(Et,{label:t,description:n,icon:l}),e.createElement(Et,{label:kt.t("Add a message shortcut\u2026")})))))))},"DesktopPreview");Va.displayName="DesktopPreview",Va.propTypes={actionName:s().string.isRequired,appName:s().string.isRequired,appIcons:s().objectOf(s().string),defaultAppIcon:s().string},Va.defaultProps={appIcons:{},defaultAppIcon:void 0};const dc=Va;var de=u(6300259961);const Qa=new N.A("message"),uc={previewType:s().oneOf(de.J8),appName:s().string,actionName:s().string},mc={previewType:de.J8[0],appName:"",actionName:""},ao=d(a=>{let{appName:t,actionName:n,previewType:o}=a;return e.createElement("div",null,e.createElement("div",{className:"p-app_actions_config_form__global_preview_container"},e.createElement("p",{className:"p-app_actions_config_form__global_preview_header"},Qa.t("Search")),e.createElement("p",{className:"p-app_actions_config_form__global_preview_description"},Qa.t("Users can find your shortcut using Slack\u2019s search")),e.createElement("div",{className:ce()("p-app_actions_config_form__global_preview_search",{"p-app_actions_config_form__global_preview_search--desktop":o===de.jS,"p-app_actions_config_form__global_preview_search--android":o===de.u8,"p-app_actions_config_form__global_preview_search--ios":o===de.u5})},o===de.jS&&e.createElement(e.Fragment,null,e.createElement("p",{className:"p-app_actions_config_form__global_preview_search_app_name"},t),e.createElement("p",{className:"p-app_actions_config_form__global_preview_search_app_name_desc"},e.createElement("strong",null," ",n," ")," ",t),e.createElement("p",{className:"p-app_actions_config_form__global_preview_search_app_name_search"},t)),(o===de.u8||o===de.u5)&&e.createElement("div",{className:ce()({"padding_top_100 nudge_bottom_1":o===de.u5})},e.createElement("p",{className:"p-app_actions_config_form__global_preview_search_action_name_mobile"},n),e.createElement("p",{className:"p-app_actions_config_form__global_preview_search_action_name_desc_mobile"},e.createElement("strong",null," ",n," ")," ",e.createElement("span",{className:"padding_left_25 sk_foreground_max_solid"},t)),e.createElement("p",{className:"p-app_actions_config_form__global_preview_search_action_name_channel_mobile"},n)))),e.createElement("div",{className:"p-app_actions_config_form__global_preview_container"},e.createElement("p",{className:"p-app_actions_config_form__global_preview_header"},Qa.t("Shortcuts menu")),e.createElement("p",{className:"p-app_actions_config_form__global_preview_description"},Qa.t("Your shortcut will appear in the shortcut menu in channels")),e.createElement("div",{className:ce()("p-app_actions_config_form__global_preview_menu",{"p-app_actions_config_form__global_preview_menu--desktop":o===de.jS,"p-app_actions_config_form__global_preview_menu--android":o===de.u8,"p-app_actions_config_form__global_preview_menu--ios":o===de.u5})},o===de.jS&&e.createElement("p",{className:"p-app_actions_config_form__global_preview_menu_app_name_desc"},e.createElement("strong",null," ",n," ")),(o===de.u8||o===de.u5)&&e.createElement(e.Fragment,null,e.createElement("p",{className:"p-app_actions_config_form__global_preview_menu_app_name_mobile"},e.createElement("strong",null," ",t," ")),e.createElement("p",{className:"p-app_actions_config_form__global_preview_menu_action_name_mobile"},n)))))},"GlobalActionsPreview");ao.propTypes=uc,ao.defaultProps=mc;const no=ao;function At(){return At=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},At.apply(this,arguments)}d(At,"actions_config_extends");const oo=new N.A("developer_apps"),_c={appName:s().string,appIcons:s().objectOf(s().string),defaultAppIcon:s().string.isRequired,isDataLoaded:s().bool,actions:s().arrayOf(Zt.A.AppActionConfig).isRequired,canCreateAction:s().bool,saveError:s().string,fetchConfig:s().func,onCreateAction:s().func.isRequired,onDeleteAction:s().func.isRequired,onUpdateAction:s().func.isRequired},gc={appName:"",appIcons:{},isDataLoaded:!1,canCreateAction:!1,saveError:null,fetchConfig:E.noop};let Xa=d(class extends e.PureComponent{renderAndroidPreview(){let{name:t,type:n,description:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={...this.props,actionName:t};if(n==="global_action")return e.createElement(no,At({},r,{description:o,previewType:de.u8}));const{appName:l,appIcons:i,defaultAppIcon:c}=this.props;return e.createElement(tc,{actionName:t,appName:l,appIcons:i,defaultAppIcon:c})}renderDesktopPreview(){let{name:t,type:n,description:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={...this.props,actionName:t};return n==="global_action"?e.createElement(no,At({},r,{description:o,previewType:de.jS})):e.createElement(dc,At({},r))}renderEditForm(t){return e.createElement(Ki,At({type:Bi.TH.messageAction,renderPreview:this.renderPreview},t))}renderIOSPreview(){let{name:t,type:n,description:o}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={...this.props,actionName:t};if(n==="global_action")return e.createElement(no,At({},r,{description:o,previewType:de.u5}));const{appName:l,appIcons:i,defaultAppIcon:c}=this.props;return e.createElement(Zi,{actionName:t,appName:l,appIcons:i,defaultAppIcon:c})}renderPreview(t){const n=[{title:oo.t("Desktop"),id:"desktop",content:this.renderDesktopPreview(t)},{title:oo.t("iOS",{fallbackHash:"6413e837d316aafcf260786cd21a849f88ae3069",fallbackHashNs:"pages_client"}),id:"ios",content:this.renderIOSPreview(t)},{title:oo.t("Android",{fallbackHash:"1928f95c598b9e69462fcb512625cf8e28923044",fallbackHashNs:"pages_client"}),id:"android",content:this.renderAndroidPreview(t)}];return e.createElement(Yi.A,{tabs:n})}render(){return e.createElement(rc,At({renderEditForm:this.renderEditForm},this.props))}constructor(t){super(t),(0,Fa.v)(this,["renderPreview","renderEditForm"])}},"BaseAppActionsConfig");Xa.displayName="BaseAppActionsConfig",Xa.propTypes=_c,Xa.defaultProps=gc;const fc=d((a,t)=>{const{appId:n}=t,o=(0,Ha.k9)(a,n),r=(0,Ha.W4)(a,n),l=(0,Ha.G7)(a,n),i=r.filter(m=>m.type==="global_action"),c=r.filter(m=>m.type==="message_action"),p=i.length<de.wE||c.length<de.wE;return{isDataLoaded:o,actions:r,canCreateAction:p,saveError:l,appName:Mo(a,{appId:n}),appIcons:Bo(a,{appId:n}),defaultAppIcon:(0,Vi.Mu)(a)}},"actions_config_mapStateToProps"),hc={fetchConfig:Mi,onCreateAction:qt.Eo,onUpdateAction:qt.N4,onDeleteAction:qt.DE},bc={appId:s().string.isRequired},Ec={},so=(0,be.N)(fc,hc)(Xa);so.propTypes=bc,so.defaultProps=Ec;function Ac(a){return e.createElement(Pa.A,{subtype:"app_actions_admin"},e.createElement(so,At({},a)))}d(Ac,"AppActionsConfigWithErrorBoundary");const vc=Ac;var yc=u(5418445387);const ro=(0,ae.A)("Calls API to list workflow extensions for the specified app",function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.actions.v2.list",args:{app_id:n},reason:"developer-fetchAppWorkflowExtensions"}))});ro.meta={name:"createFetcher",key:"createFetcherfetchAppWorkflowExtensions",description:"Calls API to list workflow extensions for the specified app"},ro.propTypes={appId:s().string};const lo=(0,ae.A)("Fetch App Info",function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.info",args:{app_id:n},reason:"developer-fetchAppInfo"}))});lo.meta={name:"createFetcher",key:"createFetcherfetchAppInfo",description:"Fetch App Info"},lo.propTypes={appId:s().string};const io=(0,ae.A)("Fetch Beta App Info",function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.beta.info",args:{app_id:n},reason:"developer-fetchBetaAppInfo"}))});io.meta={name:"createFetcher",key:"createFetcherfetchBetaAppInfo",description:"Fetch Beta App Info"},io.propTypes={appId:s().string};const co=(0,ae.A)("Calls API to list workflow extensions for the specified app",function(a,t){let{appId:n,betaOptedIn:o}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.workflowExtensions.edit",args:{app_id:n,beta_opted_in:o},reason:"developer-updateWorkflowExtensions"}))});co.meta={name:"createFetcher",key:"createFetcherupdateAppWorkflowExtensions",description:"Calls API to list workflow extensions for the specified app"},co.propTypes={appId:s().string.isRequired,betaOptedIn:s().bool};const po=(0,ae.A)("Create Free Trial Request Ticket",(a,t,n)=>{let{text:o,title:r}=n;return a((0,J.H)({method:"help.issues.create",reason:"create-free-trial-ticket",args:{text:o,title:r,tags:"routing_purchase_experience,via_workflow_beta_trial_form"}}))});po.meta={name:"createFetcher",key:"createFetchercreateFreeTrialRequest",description:"Create Free Trial Request Ticket"},po.propTypes={text:s().string.isRequired,title:s().string.isRequired};const uo=(0,ae.A)("Fetch Team Prefs for app dev team",a=>a((0,J.H)({method:"team.prefs.get",reason:"fetch-team-prefs-app-dev-team"})));uo.meta={name:"createFetcher",key:"createFetcherfetchTeamPrefs",description:"Fetch Team Prefs for app dev team"},uo.propTypes=null;const mo=(0,ae.A)("Fetch team prefs for org",a=>a((0,J.H)({method:"enterprise.prefs.get",reason:"fetch-org-team-prefs"})));mo.meta={name:"createFetcher",key:"createFetcherfetchEnterprisePrefs",description:"Fetch team prefs for org"},mo.propTypes=null;var kc=u(1664928984),Sc=u(5214002120);const Ie=new N.A("workflow_extensions_admin"),Ks=50,Ys=50,wc={appId:s().string.isRequired,step:s().object,onSave:s().func.isRequired,logger:s().object.isRequired,closeModal:s().func.isRequired,createAppAction:s().func.isRequired,updateAppAction:s().func.isRequired,featureUpdatingMissingAriaLabelsGroupTreatment:s().string},Tc={step:null,featureUpdatingMissingAriaLabelsGroupTreatment:"off"},Za=d(a=>{let{appId:t,step:n,onSave:o,logger:r,closeModal:l,createAppAction:i,updateAppAction:c,featureUpdatingMissingAriaLabelsGroupTreatment:p}=a;const[m,f]=(0,e.useState)(null),[b,g]=(0,e.useState)(!1),[_,y]=(0,e.useState)(n&&n.name),[I,T]=(0,e.useState)(null),[O,R]=(0,e.useState)(n&&n.callback_id),[M,k]=(0,e.useState)(null),A=(0,e.useCallback)(()=>{g(!0),f(null);const D=n&&n.action_id,B={name:_,desc:"",callback_id:O,type:"workflow_step_edit"};D&&(B.id=D),(D?c:i)({appId:t,action:B}).then(se=>{let{action:$}=se;l(),o($)}).catch(se=>{(se==null?void 0:se.name)==="duplicate_step_names"?T(Ie.t("You can\u2019t use the same name for multiple steps.")):(se==null?void 0:se.name)==="duplicate_callback_ids"?k(Ie.t("You can\u2019t use the same callback ID for multiple steps.")):f(Ie.t("Whoops, we had a problem saving your step.")),r.error("WORKFLOW_STEPS_DEV_PAGE",D?`Error calling developer.apps.actions.v2.save endpoint: ${se}`:`Error calling developer.apps.actions.v2.create endpoint: ${se}`)}).finally(()=>{g(!1)})},[t,O,l,i,r,_,o,n,c]),w=(0,e.useCallback)(D=>{y(D);let B=null;(D||"").trim().length===0&&(B=Ie.t("Please enter a Step name")),T(B)},[]),C=(0,e.useCallback)(D=>{R(D);let B=null;(D||"").trim().length===0&&(B=Ie.t("Please enter a Callback ID")),k(B)},[]),P=(0,e.useMemo)(()=>Oc({name:_,callbackID:O}),[O,_]);return e.createElement(ka.A,{contentLabel:p==="on"?Ie.t("Add step"):"",closeModal:l,role:"dialog"},e.createElement(Na.A,null,e.createElement(Ia.A,{title:Ie.t("Edit Step"),id:"edit_step_title","data-qa":"edit_workflow_step_header"})),e.createElement(Sa.A,null,e.createElement(wa.A,{"data-qa":"edit_workflow_step_body"},m&&e.createElement(x.Ay,{level:"error",type:"boxed"},m),e.createElement(pe.A,{text:Ie.t("Step name")},e.createElement(ot.A,{id:"step_name",name:"step_name",value:_,onChange:w,maxCharacterLimit:Ks,placeholder:Ie.t("e.g., Add a new data entry"),hintText:Ie.t("Describe the action your step takes when configured. No need to describe step inputs or outputs. This name should be clear without additional description."),useInlineAlert:!0,errorText:I})),e.createElement(pe.A,{text:Ie.t("Callback ID")},e.createElement(ot.A,{id:"step_callback_id",name:"step_callback_id",value:O,onChange:C,maxCharacterLimit:Ys,placeholder:Ie.t("e.g., new_data_entry"),hintText:Ie.t("We\u2019ll send this to you in every payload. You can use it to distinguish between your different steps. It does not appear to people building a workflow.",{fallbackHash:"f6335ec1a0e7cfaf458bfca863a7cbc8cd492878"}),useInlineAlert:!0,errorText:M,isDisabled:!1})))),e.createElement(Ta.A,{"data-qa":"edit_workflow_step_footer"},e.createElement(Ca.A,null,e.createElement(V.Ay,{type:"outline",onClick:l,"data-qa":"edit_workflow_step_cancel"},Ie.t("Cancel")),e.createElement(W.lV,{loading:b,disabled:!P,onClick:A,"data-qa":"edit_workflow_step_go","aria-label":Ie.t("Save")},Ie.t("Save")))))},"WorkflowExtensionsEditStepModal");Za.displayName="WorkflowExtensionsEditStepModal",Za.propTypes=wc,Za.defaultProps=Tc;const Cc=d(a=>({logger:(0,Re.Ay)({state:a}),featureUpdatingMissingAriaLabelsGroupTreatment:(0,tt._Z)(a,"updating_missing_aria_labels")}),"workflow_extensions_edit_step_modal_mapStateToProps"),Nc=d(a=>(0,Ve.zH)({closeModal:te.O,createAppAction:Nt.Eo,updateAppAction:Nt.N4},a),"workflow_extensions_edit_step_modal_mapDispatchToProps"),Ic=(0,be.N)(Cc,Nc)(Za);function Oc(a){let{name:t="",callbackID:n=""}=a;return!(t.trim().length===0||t.trim().length>Ks||n.trim().length===0||n.trim().length>Ys)}d(Oc,"stepIsValid");const Pt=new N.A("workflow_extensions_admin"),xc={step:s().object.isRequired,appId:s().string.isRequired,logger:s().object.isRequired,onDeleted:s().func.isRequired,deleteAppAction:s().func.isRequired,closeModal:s().func.isRequired},_o=d(a=>{let{step:t,appId:n,logger:o,onDeleted:r,deleteAppAction:l,closeModal:i}=a;const[c,p]=(0,e.useState)(null),[m,f]=(0,e.useState)(!1),b=(0,e.useCallback)(()=>{f(!0),p(null),l({appId:n,actionId:t.action_id}).then(()=>{r(t),i()}).catch(g=>{p(Pt.t("Whoops, we had a problem deleting your Workflow Step")),o.error("WORKFLOW_STEPS_DEV_PAGE",`Error calling developer.apps.actions.v2.delete endpoint: ${g}`)}).finally(()=>f(!1))},[n,i,l,o,r,t]);return e.createElement(v.aF,null,e.createElement(v.rQ,null,e.createElement(v.Rc,{title:Pt.t("Remove this step?",{fallbackHash:"c196e1b5ce8339a060d4958127ab32ee73abfc93"})})),e.createElement(v.$m,null,e.createElement(v.qf,null,c&&e.createElement(x.Ay,{level:"error",type:"boxed"},c),e.createElement("p",null,Pt.rt("Published workflows containing <strong>{stepName}</strong> will stop working. This step will no longer be available to workspaces with your app.",{stepName:t.name,fallbackHash:"687b0d6d347f6fc52e4abbe90f83f8a435ba240f"})),e.createElement("p",null,e.createElement("strong",null,Pt.t("This cannot be undone.",{fallbackHash:"ad25261d32e5ec73003b34b89438d3cceca432b1",fallbackHashNs:"services_export"}))))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(W.Ay,{type:"outline",disabled:m,onClick:i},Pt.t("Cancel")),e.createElement(W.lV,{type:"danger",loading:m,onClick:b,"aria-label":Pt.t("Delete")},Pt.t("Delete")))))},"ConfirmStepDelete");_o.displayName="ConfirmStepDelete",_o.propTypes=xc;const Pc=d(a=>({logger:(0,Re.Ay)({state:a})}),"workflow_extensions_admin_confirm_step_delete_mapStateToProps"),Rc=d(a=>(0,Ve.zH)({deleteAppAction:Nt.DE,closeModal:te.O},a),"workflow_extensions_admin_confirm_step_delete_mapDispatchToProps"),Mc=(0,be.N)(Pc,Rc)(_o),Vs="workflow.steps:execute",Qs="workflow_step_execute";function Xs(a){var t;return((a==null||(t=a.scopes)===null||t===void 0?void 0:t.bot)||[]).includes(Vs)}d(Xs,"hasWorkflowsExecuteScope");function go(a){var t;return((a==null||(t=a.event_subscriptions)===null||t===void 0?void 0:t.bot_events)||[]).includes(Qs)}d(go,"hasWorkflowExecuteBotEvent");function Bc(a){var t,n,o,r;const l=((r=a==null||(t=a.event_subscriptions)===null||t===void 0?void 0:t.is_url_verified)!==null&&r!==void 0?r:!1)&&!!(!(a==null||(n=a.event_subscriptions)===null||n===void 0)&&n.request_url);var i;const c=(i=a==null?void 0:a.is_link_enabled)!==null&&i!==void 0?i:!1;var p;return((p=a==null||(o=a.event_subscriptions)===null||o===void 0?void 0:o.is_active)!==null&&p!==void 0?p:!1)&&(l||c)&&go(a)}d(Bc,"hasRequiredEventsConfiguration");function Lc(a){var t;return!!(!(a==null||(t=a.interactive_components)===null||t===void 0)&&t.request_url)||a.is_link_enabled}d(Lc,"hasRequiredInteractivityConfiguration");const Zs=new N.A("workflow_extensions_admin"),Uc={appInfo:s().object.isRequired},fo=d(a=>{let{appInfo:t}=a;const n=(0,e.useMemo)(()=>!Bc(t),[t]),o=(0,e.useMemo)(()=>!Lc(t),[t]);return e.createElement("div",{className:"p-workflow_extensions_admin__configuration-errors"},n&&e.createElement(x.Ay,{level:"warning"},Zs.rt("You need to enable <a>Event Subscriptions</a> and subscribe to the <strong>workflow_step_execute</strong> event to be notified that your steps should run. <fix-it-link>Fix it</fix-it-link>",void 0,r=>{let{text:l,tag:i}=r;return i==="a"?e.createElement(ze.A,{href:"event-subscriptions"},l):i==="fix-it-link"?e.createElement(ze.A,{className:"p-workflow_extensions_admin__configuration-errors-fix-it",href:"event-subscriptions"},l):e.createElement("strong",null,l)})),o&&e.createElement(x.Ay,{level:"warning"},Zs.rt("You need to enable <a>Interactivity</a> to configure steps that require it. <fix-it-link>Fix it</fix-it-link>",void 0,r=>{let{text:l,tag:i}=r;return i==="fix-it-link"?e.createElement(ze.A,{className:"p-workflow_extensions_admin__configuration-errors-fix-it",href:"interactive-messages"},l):e.createElement(ze.A,{href:"interactive-messages"},l)})))},"WorkflowExtensionsConfigurationErrors");fo.displayName="WorkflowExtensionsConfigurationErrors",fo.propTypes=Uc;var Dc=u(9238872268),qc=u.n(Dc),Fc=u(7552850286),Hc=u.n(Fc);const Js=new N.A("workflow_extensions_admin"),ho=d(()=>{const a=Hc(),t=qc();return e.createElement("div",{className:"p-workflow_extensions_admin__description"},e.createElement("p",null,Js.rt("Adding a workflow step (or two) to your app helps people automate their work, by connecting their Slack workflows to your service. <a>Learn more</a>",{fallbackHash:"4ccd78c8a8b3d9779f31cd4f5a97105518628f9c"},n=>{let{text:o}=n;return e.createElement(S.A,{href:"https://api.slack.com/workflows/steps"},o)})),e.createElement("div",null,e.createElement(xa.A,{className:"p-workflow_extensions_admin__workflow_img",alt:Js.t("Workflow Builder example"),width:306,height:208,src:a,srcSet:`${a}, ${t} 2x`,renderPending:()=>e.createElement("div",{className:"p-workflow_extensions_admin__workflow_img_loading"},e.createElement(Ot.A,{color:"blue"}))})))},"WorkflowExtensionsHeader");ho.displayName="WorkflowExtensionsHeader";const er=new N.A("workflow_extensions_admin"),bo=d(a=>{let{step:t,onEdit:n,onDelete:o}=a;const r=(0,e.useCallback)(()=>n(t),[n,t]),l=(0,e.useCallback)(()=>o(t),[o,t]);return e.createElement("div",{"data-qa":"workflow_steps_row",className:"p-app_actions_config__action_row"},e.createElement("div",{className:"p-app_actions_config__action_name"},t.name),e.createElement("div",{className:"p-app_actions_config__action_callback"},t.callback_id),e.createElement("div",{className:"p-app_actions_config__action_buttons"},e.createElement(W.Ay,{pillarClassName:"p-app_actions_config__table_btn",type:"outline",size:"small",onClick:r},e.createElement(Je.A,{type:"pencil","aria-label":er.t("Edit Step")})),e.createElement(W.Ay,{pillarClassName:"p-app_actions_config__table_btn",type:"outline",size:"small",onClick:l},e.createElement(Je.A,{type:"trash","aria-label":er.t("Delete Step")}))))},"WorkflowStepRow");bo.displayName="WorkflowStepRow",bo.propTypes={step:s().object.isRequired,onEdit:s().func.isRequired,onDelete:s().func.isRequired};const tr=new N.A("workflow_extensions_admin"),Ja=d(a=>{let{steps:t,onAddStep:n,onDeleteStep:o}=a;return(0,E.isEmpty)(t)?null:e.createElement("div",{"data-qa":"workflow_steps_list",className:"p-app_actions_config__action_list p-workflow_extensions_admin__step-list"},e.createElement("div",{className:"p-app_actions_config__action_row p-app_actions_config__header"},e.createElement("div",{className:"p-app_actions_config__action_name"},tr.t("Name")),e.createElement("div",{className:"p-app_actions_config__action_callback"},tr.t("Callback ID")),e.createElement("div",{className:"p-app_actions_config__action_buttons"})),(t||[]).map(r=>e.createElement(bo,{key:r.action_id,step:r,onEdit:n,onDelete:o})))},"WorkflowStepList");Ja.displayName="WorkflowStepList",Ja.propTypes={steps:s().array,onAddStep:s().func.isRequired,onDeleteStep:s().func.isRequired},Ja.defaultProps={steps:[]};const ar=new N.A("workflow_extensions_admin"),en=d(a=>{let{stepCount:t,onAddStep:n}=a;return t<10?e.createElement(W.Ay,{type:"outline",onClick:n,"data-qa":"add_step_button",pillarClassName:"p-workflow_extensions_admin__add-step",className:"p-workflow_extensions_admin__add-step"},ar.t("Add Step")):e.createElement("p",{className:"p-workflow_extensions_admin__maximum-steps","data-qa":"max_steps"},ar.t("You\u2019ve added the maximum number of steps",{fallbackHash:"697cb61398a82acce55d091deb9c0b86a0202717"}))},"WorkflowExtensionsAddStep");en.displayName="WorkflowExtensionsAddStep",en.propTypes={stepCount:s().number,onAddStep:s().func.isRequired},en.defaultProps={stepCount:0};var nr=u(1680108386);const Rt=new N.A("workflow_extensions_admin"),Wc={logger:s().object.isRequired,toggleWorkflowStepsEnabled:s().func.isRequired,closeModal:s().func.isRequired},Eo=d(a=>{let{logger:t,toggleWorkflowStepsEnabled:n,closeModal:o}=a;const[r,l]=(0,e.useState)(null),[i,c]=(0,e.useState)(!1),p=(0,e.useCallback)(()=>{c(!0),l(null),n(!1).then(()=>{o()}).catch(m=>{l(Rt.t("We had a problem turning off workflow steps",{fallbackHash:"8419401bd948860c975ce1f7ee9fb50cf0d7f378"})),t.error("WORKFLOW_STEPS_DEV_PAGE",`Error calling developer.apps.workflowExtensions.edit endpoint: ${m}`)}).finally(()=>c(!1))},[n,o,t]);return e.createElement(v.aF,null,e.createElement(v.rQ,null,e.createElement(v.Rc,{title:Rt.t("Turn off workflow steps?",{fallbackHash:"8b580bf5c109ddc44cfb62198dc3694be038171e"})})),e.createElement(v.$m,null,e.createElement(v.qf,null,r&&e.createElement(x.Ay,{level:"error",type:"boxed"},r),e.createElement("p",null,Rt.t("Any steps you\u2019ve created will be permanently deleted, and any workflows that use your custom steps will stop working.",{fallbackHash:"79bf2dcbb654970dd22f849f5c4dacb7a9d23150"})))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(W.Ay,{type:"outline",disabled:i,onClick:o,"aria-label":Rt.t("Cancel")},Rt.t("Cancel")),e.createElement(W.lV,{type:"danger",loading:i,onClick:p,"aria-label":Rt.t("Turn Off")},Rt.t("Turn Off")))))},"WorkflowExtensionsOptOutConfirm");Eo.displayName="WorkflowExtensionsOptOutConfirm",Eo.propTypes=Wc;const Gc=d(a=>({logger:(0,Re.Ay)({state:a})}),"workflow_extensions_opt_out_confirm_mapStateToProps"),$c=d(a=>(0,Ve.zH)({closeModal:te.O},a),"workflow_extensions_opt_out_confirm_mapDispatchToProps"),jc=(0,be.N)(Gc,$c)(Eo),or=new N.A("workflow_extensions_admin"),zc={appId:s().string.isRequired,logger:s().object.isRequired,isDisabled:s().bool,isOptedIn:s().bool,onChange:s().func.isRequired,openModal:s().func.isRequired,dispatchEnqueueToast:s().func.isRequired,updateAppWorkflowExtensions:s().func.isRequired},Kc={isOptedIn:!1,isDisabled:!1},tn=d(a=>{let{isOptedIn:t,isDisabled:n,logger:o,appId:r,onChange:l,openModal:i,dispatchEnqueueToast:c,updateAppWorkflowExtensions:p}=a;const m=or.t("Turn on workflow steps",{fallbackHash:"a44db6eacc7a312b0bf6983101d126507387b580"}),f=(0,nr.A)(),b=(0,e.useCallback)(_=>p({appId:r,betaOptedIn:_}).then(()=>{l(_)}),[r,l,p]),g=(0,e.useCallback)(_=>{_.target.checked?b(!0).catch(y=>{o.error("WORKFLOW_STEPS_DEV_PAGE",`Error calling developer.apps.workflowExtensions.edit endpoint: ${y}`),c({element:e.createElement(ga.Ay,{toastClasses:"position_fixed"},e.createElement("span",null,or.t("We had a problem turning on workflow steps",{fallbackHash:"8419401bd948860c975ce1f7ee9fb50cf0d7f378"})))})}):i({element:e.createElement(jc,{toggleWorkflowStepsEnabled:b})})},[c,o,i,b]);return e.createElement("div",{className:"p-workflow_extensions_admin__opt-in-heading"},e.createElement("label",{htmlFor:f},m),e.createElement(Xt.A,{id:f,isToggled:t,onChange:g,isDisabled:n,ariaLabel:m}))},"BaseWorkflowExtensionsOptIn");tn.displayName="BaseWorkflowExtensionsOptIn",tn.propTypes=zc,tn.defaultProps=Kc;const Yc=d(a=>({logger:(0,Re.Ay)({state:a})}),"workflow_extensions_opt_in_mapStateToProps"),Vc=d(a=>(0,Ve.zH)({openModal:ve.q,updateAppWorkflowExtensions:co,dispatchEnqueueToast:wn.M},a),"workflow_extensions_opt_in_mapDispatchToProps"),Qc=(0,be.N)(Yc,Vc)(tn);var an=u(6705994416),Ao=u(2440188052);const _e=new N.A("workflow_extensions_admin"),Xc={closeModal:s().func.isRequired,createFreeTrialRequest:s().func.isRequired,onRequestComplete:s().func.isRequired},vo=d(a=>{let{closeModal:t,createFreeTrialRequest:n,onRequestComplete:o}=a;const[r,l]=(0,e.useState)(!1),[i,c]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),{onBlur:f,errorText:b}=(0,an.K)({errorMessage:_e.t("Please enter an email"),isErrored:(0,E.isEmpty)(p)}),[g,_]=(0,e.useState)(""),{onBlur:y,errorText:I}=(0,an.K)({errorMessage:_e.t("Please enter your workspace URL"),isErrored:(0,E.isEmpty)(g)}),[T,O]=(0,e.useState)(""),{onBlur:R,errorText:M}=(0,an.K)({errorMessage:_e.t("Please enter a value"),isErrored:(0,E.isEmpty)(T)}),[k,A]=(0,e.useState)(""),{onBlur:w,errorText:C}=(0,an.K)({errorMessage:_e.t("Please enter a value"),isErrored:(0,E.isEmpty)(k)}),P=!!p&&!!g&&!!T&&!!k,D=(0,e.useCallback)(()=>{const B="Workflow Steps Free Trial Request",Oe=`Email: ${p}
Workspace URL: ${g}
User Count: ${T}
Description: ${k}`;return l(!0),n({title:B,text:Oe}).then(()=>{o(),t()}).catch(()=>c(_e.t("Sorry, there was a problem submitting your request"))).finally(()=>l(!1))},[t,n,k,p,o,T,g]);return e.createElement(v.aF,{labelledby:"request-trial-form"},e.createElement(v.rQ,null,e.createElement(v.Rc,{id:"request-trial-form",title:_e.t("Request a Pro plan trial",{fallbackHash:"b599b6fbb09d1873b343c069aa91bb2d49a92f57"})})),e.createElement(v.$m,null,e.createElement(v.qf,null,i&&e.createElement(x.Ay,{level:"error"},i),e.createElement(pe.A,{htmlFor:"request_trial_email",text:_e.t("Email address")},e.createElement(ot.A,{id:"request_trial_email",name:"request_trial_email",value:p,onChange:m,onBlur:f,placeholder:_e.t("Your email"),errorText:b})),e.createElement(pe.A,{htmlFor:"request_trial_workspace_url",text:_e.t("Slack workspace URL")},e.createElement(ot.A,{id:"request_trial_workspace_url",name:"request_trial_workspace_url",value:g,onChange:_,onBlur:y,placeholder:_e.t("Your workspace URL"),hintText:_e.rt("For help locating your Slack URL, see <a>this article</a>",void 0,B=>{let{text:Oe}=B;return e.createElement(ze.A,{href:`https://${(0,pt.qF)()}/help/articles/221769328-Locate-your-Slack-URL`},Oe)}),errorText:I,isRequired:!0})),e.createElement(pe.A,{htmlFor:"request_trial_user_count",text:_e.t("How many users are, or will be, in this workspace?")},e.createElement(ot.A,{id:"request_trial_user_count",name:"request_trial_user_count",value:T,onChange:O,onBlur:R,placeholder:_e.t("Your answer"),errorText:M})),e.createElement(pe.A,{htmlFor:"request_trial_description",text:_e.t("What kind of steps do you want to build for Workflow Builder?")},e.createElement(Ao.A,{type:"text",id:"request_trial_description",name:"request_trial_description",value:k,onChange:A,onBlur:w,placeholder:_e.t("Please provide a brief description of the use cases you\u2019re interested in enabling through workflow steps."),errorText:C})))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(W.lV,{type:"outline",onClick:t,disabled:r,"aria-label":_e.t("Cancel")},_e.t("Cancel")),e.createElement(W.lV,{loading:r,onClick:D,disabled:!P,"aria-label":_e.t("Submit")},_e.t("Submit")))))},"RequestPaidTrialModal");vo.displayName="RequestPaidTrialModal",vo.propTypes=Xc;const Zc=d(a=>(0,Ve.zH)({closeModal:te.O,createFreeTrialRequest:po},a),"request_paid_trial_modal_mapDispatchToProps"),Jc=(0,be.N)(null,Zc)(vo),ep=new N.A("workflow_extensions_admin"),tp={onRequestComplete:s().func.isRequired,openModal:s().func.isRequired},yo=d(a=>{let{openModal:t,onRequestComplete:n}=a;const o=(0,e.useCallback)(()=>{t({element:e.createElement(Jc,{onRequestComplete:n})})},[n,t]);return e.createElement("p",null,ep.rt("Workflow Builder is only available to paid Slack workspaces. To request a paid plan trial for this workspace, complete <a>this form</a>.",{fallbackHash:"d2e434bda4263d9abb08f8f53bd4151cc251d950"},r=>{let{text:l}=r;return e.createElement(zs.A,{onClick:o},l)}))},"RequestPaidTrial");yo.displayName="RequestPaidTrial",yo.propTypes=tp;const ap=d(a=>(0,Ve.zH)({openModal:ve.q},a),"request_paid_trial_mapDispatchToProps"),np=(0,be.N)(null,ap)(yo);function ko(){return ko=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},ko.apply(this,arguments)}d(ko,"workflow_extensions_admin_extends");const $e=new N.A("workflow_extensions_admin"),op={teamHasWorkflowBuilderAccess:s().bool,team:s().object.isRequired,appId:s().string.isRequired,parentAppId:s().string,logger:s().object.isRequired,openModal:s().func.isRequired,fetchAppWorkflowExtensions:s().func.isRequired,fetchAppInfo:s().func.isRequired,fetchBetaAppInfo:s().func.isRequired,fetchTeamPrefs:s().func.isRequired,fetchEnterprisePrefs:s().func.isRequired,dispatchEnqueueToast:s().func.isRequired,isOrgLevel:s().bool},sp={teamHasWorkflowBuilderAccess:!1,parentAppId:null,isOrgLevel:!1},nn=d(a=>{let{team:t,teamHasWorkflowBuilderAccess:n,appId:o,parentAppId:r,logger:l,fetchAppWorkflowExtensions:i,fetchAppInfo:c,fetchBetaAppInfo:p,fetchTeamPrefs:m,fetchEnterprisePrefs:f,isOrgLevel:b,openModal:g,dispatchEnqueueToast:_}=a;var y;const[I,T]=(0,e.useState)(null),[O,R]=(0,e.useState)(null),[M,k]=(0,e.useState)(!0),[A,w]=(0,e.useState)(null),[C,P]=(0,e.useState)(null),[D,B]=(0,e.useState)(!0),[Oe,se]=(0,e.useState)(null),$=(0,_t.d4)(L=>(0,tt._Z)(L,"override_steps_from_deprecation_disablement")==="on"),Z=(0,_t.d4)(L=>(0,tt._Z)(L,"app_settings_org_home_team_support")==="on"),K=(0,e.useCallback)(()=>(B(!0),(r?p({appId:r}):c({appId:o})).then(q=>{let{app:ne}=q;return P(ne),ne}).catch(q=>{l.error("WORKFLOW_STEPS_DEV_PAGE",`Error calling developer.apps.info endpoint: ${q}`)}).finally(()=>B(!1))),[o,c,p,l,r]),ue=(0,e.useCallback)(()=>i({appId:o}).then(function(){let{actions:L}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const q=(L||[]).filter(ne=>ne.type==="workflow_step_edit");k(!1),w(q)}).catch(L=>{R($e.t("Whoops, we had a problem loading your Workflow Steps.")),l.error("WORKFLOW_STEPS_DEV_PAGE",`Error calling developer.apps.actions.v2.list endpoint: ${L}`)}),[o,i,l]),Y=(0,e.useCallback)(()=>f({}).then(function(){let{prefs:L}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var q,ne;const Me=((ne=L==null||(q=L.org_prefs)===null||q===void 0?void 0:q.workflow_extension_steps_enabled)!==null&&ne!==void 0?ne:!1)===!0;se(Me)}),[f]),ee=(0,e.useCallback)(()=>m({}).then(L=>{let{prefs:q}=L;var ne;const Me=((ne=q==null?void 0:q.workflow_extension_steps_enabled)!==null&&ne!==void 0?ne:!1)===!0;se(Me)}),[m]);(0,e.useEffect)(()=>{K(),ue(),Z&&b?Y():ee()},[o,i,f,m,b,K,ue,l,t,Z,Y,ee]);const me=(0,e.useCallback)(L=>{const q=Xs(C),ne=go(C);let Me=!1;const aa=A.map(wt=>wt.action_id===L.action_id?(Me=!0,L):wt);Me||aa.push(L),K().then(wt=>{if(!q&&Xs(wt)){var Oo;Wo([],[],(wt==null||(Oo=wt.scopes)===null||Oo===void 0?void 0:Oo.bot)||[]),_({element:e.createElement(ga.Ay,{toastClasses:"position_fixed"},e.createElement("span",null,$e.rt("We\u2019ve added the <strong>{scope}</strong> scope for you. Reinstall your app to see steps appear.",{scope:Vs,fallbackHash:"ebdf9cc602063807c7e84c6b823b03cb16c240d1"})))})}!ne&&go(wt)&&_({element:e.createElement(ga.Ay,{toastClasses:"position_fixed"},e.createElement("span",null,$e.rt("We\u2019ve added an event subscription for you: <strong>{event}</strong>.",{event:Qs,fallbackHash:"5989148005f3d77ae25bb99756fb8b4f5271ee31"})))})}),w(aa),T($e.t("Success!"))},[C,_,K,A]),Ht=(0,e.useCallback)(L=>{w(A.filter(q=>q.action_id!==L.action_id)),T($e.t("Success!")),K()},[K,A]),on=(0,e.useCallback)(L=>{g({element:e.createElement(Ic,{appId:o,step:L,onSave:me})})},[o,me,g]),Io=(0,e.useCallback)(L=>{g({element:e.createElement(Mc,{appId:o,step:L,onDeleted:Ht})})},[o,g,Ht]),ta=(0,e.useCallback)(L=>{P({...C,workflow_extensions:{...(C==null?void 0:C.workflow_extensions)||{},beta_opted_in:L}}),ue(),K(),T($e.t("Success!"))},[C,K,ue]),sn=(0,e.useCallback)(()=>T($e.t("Thank you for contacting us! Your request has been submitted. We\u2019re looking forward to helping you as quickly as we can.")),[]);if(M)return null;if(!C&&$)return e.createElement(e.Fragment,null,e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement(ho,null)),e.createElement(Ce.A,null,e.createElement(x.Ay,{level:"warning"},$e.t("Whoops, we had a problem loading your app\u2019s details.",{fallbackHash:"addd67ff94be2a3f3a1557629bbb068140cd4c64"})))),",");const Mt=!!(!(C==null||(y=C.workflow_extensions)===null||y===void 0)&&y.beta_opted_in),rn=(C==null?void 0:C.app_type)==="granular",j=!!t&&!!C&&Mt&&Oe===!1;return e.createElement(e.Fragment,null,$||Mt?e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement(ho,null)),rn?null:e.createElement(Ce.A,null,e.createElement(x.Ay,{level:"warning"},$e.rt("Workflow Steps is only available to apps using Granular Scopes. Please <a>update to Granular Scopes</a> to use Workflow Steps.",{fallbackHash:"bbb4b3b03f50e46a3a139b2f4c80b88fd2396b66",fallbackHashNs:"developer_app_settings"},L=>{let{text:q}=L;return e.createElement(ze.A,{href:"update-to-granular-scopes"},q)}))),j&&e.createElement(Ce.A,null,e.createElement(x.Ay,{level:"warning"},$e.rt("An admin for this workspace needs to enable workflow steps from apps before you will be able to see them in Workflow Builder. If you\u2019re an admin, you can <a>enable workflow steps here</a>.",null,L=>{let{text:q}=L;return e.createElement(ze.A,{href:(0,kc.Zl)(t,"/admin/settings#workflow_apps_steps"),target:"_blank"},q)}))),e.createElement(Ce.A,null,e.createElement(Qc,{isDisabled:!rn&&!Mt,isOptedIn:Mt,onChange:ta,appId:o}),!n&&e.createElement(np,{onRequestComplete:sn}))):null,Mt?e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement("div",null,e.createElement("h3",{className:"margin_bottom_150"},$e.t("Steps")),e.createElement("p",null,$e.t("Create up to 10 custom steps for your app to be used within Workflow Builder.")),!(0,E.isEmpty)(A)&&C&&!D?e.createElement(fo,{appInfo:C}):null,O?e.createElement(x.Ay,{level:"error"},O):e.createElement(Ja,{steps:A,onAddStep:on,onDeleteStep:Io}),e.createElement(en,{stepCount:(A||[]).length,onAddStep:on})))):null,I?(0,Ra.createPortal)(e.createElement(at.Ay,{isFixedPosition:!1,onClose:()=>T(null),autoFadeout:!0},I),document.querySelector(".alert_page_stacked")):null,e.createElement(yc.N9,null))},"WorkflowExtensionsAdmin");nn.displayName="WorkflowExtensionsAdmin",nn.propTypes=op,nn.defaultProps=sp;const rp=d(a=>({logger:(0,Re.Ay)({state:a}),team:(0,Sc.H7)(a)}),"workflow_extensions_admin_mapStateToProps"),lp=d(a=>(0,Ve.zH)({fetchAppWorkflowExtensions:ro,fetchAppInfo:lo,fetchBetaAppInfo:io,fetchTeamPrefs:uo,fetchEnterprisePrefs:mo,openModal:ve.q,dispatchEnqueueToast:wn.M},a),"workflow_extensions_admin_mapDispatchToProps"),ip=(0,be.N)(rp,lp)(nn);function cp(a){return e.createElement(Pa.A,{subtype:"workflow_extensions_admin"},e.createElement(ip,ko({},a)))}d(cp,"ConnectedWorkflowExtensionsAdminWithErrorBoundary");const So=(0,ae.A)("Fetch App Info",function(a,t){let{appId:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.info",args:{app_id:n},reason:"developer-fetchAppInfo"}))});So.meta={name:"createFetcher",key:"createFetcherfetchAppInfo",description:"Fetch App Info"},So.propTypes={appId:s().string};const sr=(0,ae.A)("Calls API to add app_beta_flag for the specified app",function(a,t){let{appId:n,appBetaFlag:o}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.betas.add",args:{app_id:n,app_beta_flag:o},reason:"developer-addAppBeta"}))});sr.meta={name:"createFetcher",key:"createFetcheraddAppBetaFlag",description:"Calls API to add app_beta_flag for the specified app"},sr.propTypes={appId:s().string.isRequired,appBetaFlag:s().string.isRequired};const rr=(0,ae.A)("Calls API to remove app_beta_flag for the specified app",function(a,t){let{appId:n,appBetaFlag:o}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a((0,J.H)({method:"developer.apps.betas.remove",args:{app_id:n,app_beta_flag:o},reason:"developer-removeAppBeta"}))});rr.meta={name:"createFetcher",key:"createFetcherremoveAppBetaFlag",description:"Calls API to remove app_beta_flag for the specified app"},rr.propTypes={appId:s().string.isRequired,appBetaFlag:s().string.isRequired};const lr=(0,ae.A)("Fetch Team Prefs for app dev team",a=>a((0,J.H)({method:"team.prefs.get",reason:"fetch-team-prefs-app-dev-team"})));lr.meta={name:"createFetcher",key:"createFetcherfetchTeamPrefs",description:"Fetch Team Prefs for app dev team"},lr.propTypes=null;var pp=u(1704004258),dp=u.n(pp);const wo=new N.A("block_kit_beta_admin"),ir=d(()=>{const a=dp();return e.createElement("div",{className:"p-block_kit_beta_admin__description"},e.createElement("p",null,wo.rt("Beta features allow you to build with the latest platform features. Because these features are not generally available, their behavior and documentation is subject to change. It is your responsibility to keep your app up-to-date."),e.createElement("br",null),e.createElement("br",null),wo.rt("Additionally, apps using these features can not be submitted to the Slack Marketplace. It is recommended to only use beta features in non-distributed apps outside of production enviornments. <a>Learn more and give feedback</a>.",{fallbackHash:"2d753c0fd4e56a4bf3796d3da59321cb9d71ff50"},t=>{let{text:n}=t;return e.createElement(S.A,{href:"https://api.slack.com/developer-beta"},n)})),e.createElement("div",null,e.createElement(xa.A,{className:"p-block_kit_beta_admin__img",alt:wo.t("Block Kit Labs"),width:306,height:208,src:a,srcSet:`${a}`,renderPending:()=>e.createElement("div",{className:"p-block_kit_beta_admin__img_loading"},e.createElement(Ot.A,{color:"blue"}))})))},"BlockKitBetaHeader");ir.displayName="BlockKitBetaHeader";const cr=d(()=>e.createElement("div",{className:"p-block_kit_beta_admin__subtitle"},e.createElement("h3",null,"Beta features"),e.createElement("p",null,"Opt in to any of the below features to start using them.")),"BlockKitBetaSubtitle");cr.displayName="BlockKitBetaSubtitle";function To(){return To=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o])}return a},To.apply(this,arguments)}d(To,"block_kit_beta_admin_extends");const up=new N.A("block_kit_beta"),mp={appId:s().string.isRequired,logger:s().object.isRequired,fetchAppInfo:s().func.isRequired},Co=d(a=>{let{appId:t,logger:n,fetchAppInfo:o}=a;const[r,l]=(0,e.useState)(null),[i,c]=(0,e.useState)(null),p=(0,e.useCallback)(()=>o({appId:t}).then(b=>{let{app:g}=b;return c(g),g}).catch(b=>{n.error("BLOCK_KIT_BETA_DEV_PAGE",`Error calling developer.apps.info endpoint: ${b}`)}),[t,o,n]);(0,e.useEffect)(()=>{p()},[t,p,n]);const m=(0,e.useCallback)((b,g)=>{const _=(i==null?void 0:i.betas_enabled)||[];g&&_.indexOf(b)<0?(_.push(b),c({...i,betas_enabled:_})):g||c({...i,betas_enabled:_.filter(y=>y!==b)}),p(),l(up.t("Success!"))},[i,p]),f=(i==null?void 0:i.betas_enabled)||[];return e.createElement(e.Fragment,null,e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement(ir,null)),e.createElement(Ce.A,null,e.createElement(cr,null),e.createElement("span",null,"There are no active beta features right now."))),r?(0,Ra.createPortal)(e.createElement(at.Ay,{isFixedPosition:!1,onClose:()=>l(null),autoFadeout:!0},r),document.querySelector(".alert_page_stacked")):null)},"BlockKitBetaAdmin");Co.displayName="BlockKitBetaAdmin",Co.propTypes=mp;const _p=d(a=>({logger:(0,Re.Ay)({state:a})}),"block_kit_beta_admin_mapStateToProps"),gp=d(a=>(0,Ve.zH)({fetchAppInfo:So},a),"block_kit_beta_admin_mapDispatchToProps"),fp=(0,be.N)(_p,gp)(Co);function hp(a){return e.createElement(Pa.A,{subtype:"block_kit_beta_admin"},e.createElement(fp,To({},a)))}d(hp,"ConnectedBlockKitBetaAdminWithErrorBoundary");var pr=u(7858657521),bp=u(6706101561);const Hp={UnauthorizedOperation:"unauthorized_operation",AppNotFound:"app_not_found",AssistantDescriptionTooLong:"assistant_description_too_long",EnterpriseIsRestricted:"enterprise_is_restricted"},No=(0,ae.A)("developer.apps.assistant.update generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.assistant.update",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.assistant.update
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));No.meta={name:"createFetcher",key:"createFetcherdeveloperAppsAssistantUpdateFetcher",description:"developer.apps.assistant.update generated fetcher"};const dr=(0,ae.A)("Calls API to update ai settings",(a,t,n)=>{let{appId:o,isAiApp:r,assistantDescription:l,assistantSuggestedPrompts:i}=n;return a(No({appId:o,isAiApp:r,assistantDescription:l,assistantSuggestedPrompts:i,reason:"from_app_config",skipSimpleArraySerializationInGetFormData:!0}))});dr.meta={name:"createFetcher",key:"createFetchereditAppAi",description:"Calls API to update ai settings"};const Wp={InvalidAuth:"invalid_auth",InvalidAppId:"invalid_app_id",AppNotFound:"app_not_found",NoPermission:"no_permission",EnterpriseIsRestricted:"enterprise_is_restricted"},ur=(0,ae.A)("developer.apps.beta.info generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.beta.info",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.beta.info
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));ur.meta={name:"createFetcher",key:"createFetcherdeveloperAppsBetaInfoFetcher",description:"developer.apps.beta.info generated fetcher"};const Gp={InvalidAuth:"invalid_auth",InvalidAppId:"invalid_app_id",AppNotFound:"app_not_found",NoPermission:"no_permission",EnterpriseIsRestricted:"enterprise_is_restricted"},mr=(0,ae.A)("developer.apps.info generated fetcher",(a,t,n)=>new yt.S((o,r)=>{const{reason:l,...i}=n,c=(0,It.VA)(i);a((0,J.H)({method:"developer.apps.info",args:c,reason:l})).then(p=>{o(p)}).catch(p=>{(0,Re.Ay)({getState:t}).error(`API call to developer.apps.info
						with reason ${l} failed, initiated by generated fetcher`),r(p)})}));mr.meta={name:"createFetcher",key:"createFetcherdeveloperAppsInfoFetcher",description:"developer.apps.info generated fetcher"};var Ep=u(3404708116),Ap=u(1123051724),vp=u.n(Ap);const Ft=new N.A("block_kit_beta_admin"),_r=d(a=>{let{onSave:t}=a;const n=(0,We.wA)(),[o,r]=(0,e.useState)(!1),l=(0,_t.d4)(_=>(0,tt._Z)(_,"ai_apps_prevent_opt_out")==="on"),i=(0,e.useCallback)(_=>r(_.target.checked),[]),c=(0,nr.A)(),p=(0,e.useCallback)(()=>{n((0,te.O)())},[n]),m=(0,e.useCallback)(()=>{t(),n((0,te.O)())},[n,t]),f=l?Ft.t("Are you sure you want to enable this experience?"):"Are you sure you want to enable this experience?",b=l?Ft.t("Disabling the agent and assistant experience for your app will require contacting our Support team."):"Disabling the agent and assistant experience for your app will require contacting our Support team.",g=l?Ft.t("I understand that I\u2019ll need Slack\u2019s assistance to disable this experience."):"I understand that I'll need Slack's assistance to disable this experience.";return e.createElement(v.aF,null,e.createElement(v.rQ,null,e.createElement(v.Rc,{title:f})),e.createElement(v.$m,null,e.createElement(v.qf,{className:"margin_bottom_100"},b),e.createElement(v.qf,null,e.createElement("div",null,e.createElement(pe.A,{text:g,type:"inline",htmlFor:c},e.createElement(zt.A,{id:c,name:c,onChange:i,checked:o}))))),e.createElement(v.jl,null,e.createElement(v.ox,null,e.createElement(W.Ay,{type:"outline",onClick:p},Ft.t("Cancel")),e.createElement(W.lV,{type:"danger",onClick:m,disabled:!o,"aria-label":l?Ft.t("Enable"):"Enable"},l?Ft.t("Enable"):"Enable"))))},"AiConfirmModal");_r.displayName="AiConfirmModal";const X=new N.A("ai_admin");var it;(function(a){a.Dynamic="dynamic",a.Fixed="fixed"})(it||(it={}));const gr=d(a=>{let{appId:t,isAiApp:n,assistantDescription:o,assistantSuggestedPrompts:r,parentAppId:l}=a;const i=(0,We.wA)(),c=(0,_t.d4)(pr.wP),p=(0,_t.d4)(pr.jB),m=(0,_t.d4)(j=>(0,tt._Z)(j,"ai_apps_prevent_opt_out")==="on"),f=300,b=(0,e.useCallback)(async()=>{var j;const L=i(l?ur({appId:l,reason:"ai_app_admin"}):mr({appId:t,reason:"ai_app_admin"})),{app:q}=await L;Wo([],[],(q==null||(j=q.scopes)===null||j===void 0?void 0:j.bot)||[])},[i,t,l]),[g,_]=(0,e.useState)(null),[y,I]=(0,e.useState)(at.QE.success),[T,O]=(0,e.useState)(!1),[R,M]=(0,e.useState)(!1),[k,A]=(0,e.useState)(n),[w,C]=(0,e.useState)(!r||r.length===0?it.Dynamic:it.Fixed),[P,D]=(0,e.useState)(Array.isArray(r)?r:[]),[B,Oe]=(0,e.useState)(o),se=p?X.t("Fourth"):"Fourth",$=(0,e.useMemo)(()=>[X.t("First"),X.t("Second"),X.t("Third"),se],[se]);var Z;const K=(Z=document.querySelector(".alert_page_stacked"))!==null&&Z!==void 0?Z:document.body,ue=d(j=>{_(j),setTimeout(()=>_(null),2e3)},"setBannerText"),Y=m?X.rt("Disabling your app\u2019s agent and assistant experience requires Slack\u2019s assistance. To disable, <a>{linkText}</a>.",{linkText:"contact our Support team"},j=>{let{text:L}=j;return e.createElement(S.A,{href:"https://my.slack.com/help/requests/new",target:"_blank"},L)}):"Disabling your app\u2019s agent and assistant experience requires Slack\u2019s assistance. To disable, contact our Support team.",ee=(0,e.useCallback)(async()=>{const j=!k;A(j);try{await i(No({appId:t,isAiApp:j,reason:"AiAppAdmin:setIsAiAppToggle"})),I(at.QE.success),ue(X.t("Successfully saved")),j&&await b()}catch{I(at.QE.urgent),ue(X.t("Something went wrong. Please try again")),A(!j)}},[i,t,k,b]),me=(0,e.useCallback)(()=>{i((0,ve.q)({element:e.createElement(_r,{onSave:ee})}))},[i,ee]),Ht=(0,e.useMemo)(()=>!B||B.length===0||B.length>f?!1:P!=null&&P.length?P.every(j=>{var L,q;const ne=((L=j.title)===null||L===void 0?void 0:L.length)>0,Me=((q=j.message)===null||q===void 0?void 0:q.length)>0;return!ne&&!Me?!0:!(!ne||!Me)}):!0,[P,B]),on=(0,e.useCallback)(async()=>{if(!Ht)return;const j=P?P.filter(L=>L.title.length&&L.message.length):[];M(!0),O(!1);try{await i(dr({appId:t,assistantDescription:B,assistantSuggestedPrompts:w===it.Dynamic||!j||(j==null?void 0:j.length)===0?[]:j})),k&&await i(Ln({app:t,messagesTabDisabled:!1,messagesTabReadOnlyEnabled:!1,reason:"AiAppAdmin:setAppHomeMeta"})),I(at.QE.success),ue(X.t("Successfully saved",{fallbackHash:"c0ae8f6ea84111498894729659051ce9713aab42",fallbackHashNs:"ai_apps"}))}catch{O(!0),I(at.QE.urgent),ue(X.t("Something went wrong. Please try again"))}M(!1)},[t,Ht,P,B,i,k,w]),Io=(0,e.useCallback)(j=>{O(!0),Oe(j)},[]),ta=(0,e.useCallback)((j,L)=>q=>{if(O(!0),!P)return;if(P.length<4)for(let aa=P.length;aa<4;aa++)P.push({title:"",message:""});const ne={...P[j],[L]:q},Me=[...P.slice(0,j),ne,...P.slice(j+1)];D(Me)},[P]),sn=(0,e.useCallback)(j=>()=>{O(!0),C(j)},[]),Mt=p?X.t("Mark this app as an agent app"):"Mark this app as an agent app",rn=(0,e.useCallback)(()=>{const j=$.map((L,q)=>{var ne,Me;return e.createElement("div",{key:L},e.createElement(pe.A,{text:p?X.t("Prompt {number}",{number:q+1}):`Prompt ${q+1}`},e.createElement(ot.A,{id:`ai_apps_prompt_${q+1}_title`,isRequired:!0,name:`ai_apps_prompt_${q+1}_title`,size:"medium",onChange:ta(q,"title"),value:P==null||(ne=P[q])===null||ne===void 0?void 0:ne.title,placeholder:p?X.t("Prompt title"):"Prompt title"})),e.createElement(Ao.A,{id:`ai_apps_prompt_${q+1}_message`,isRequired:!0,name:`ai_apps_prompt_${q+1}_message`,size:"medium",onChange:ta(q,"message"),value:P==null||(Me=P[q])===null||Me===void 0?void 0:Me.message,placeholder:p?X.t("Prompt message"):"Prompt message"}))});return e.createElement(e.Fragment,null,j)},[$,p,ta,P]);return e.createElement(e.Fragment,null,g?(0,Ra.createPortal)(e.createElement(at.Ay,{type:y,isFixedPosition:!1,autoFadeout:!0},g),K):null,e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,e.createElement("div",{className:"display_flex justify_content_between"},e.createElement("div",null,e.createElement("h4",null,p?X.t("One-click access to your app\u2019s agent or assistant"):"One-click access to your app\u2019s agent or assistant"),e.createElement("div",null,p?X.t("Our new messaging features give your app\u2019s agent or assistant a top-bar entry point and a side-by-side view, making AI-powered conversations a snap."):"Our new messaging features give your app\u2019s agent or assistant a top-bar entry point and a side-by-side view, making AI-powered conversations a snap."),e.createElement("br",null),e.createElement(S.A,{href:`${(0,Ep.A)()}/help/articles/33076000248851`},p?X.t("Learn more"):"Learn more")),e.createElement("img",{src:vp(),alt:"admin"})))),e.createElement(nt.A,{className:"sk_primary_background"},e.createElement(Ce.A,null,k&&m?e.createElement(e.Fragment,null,e.createElement(x.Ay,{type:"boxed",level:"warning",icon:"slack",align:"left"},e.createElement("span",null,Y)),e.createElement("hr",null)):null,e.createElement("div",{className:"display_flex justify_content_between"},e.createElement("div",null,e.createElement("h4",null,p?X.t("Agent or Assistant"):"Agent or Assistant"),e.createElement("span",null,p?X.t("Turn on to enable a new app messaging experience for your app\u2019s agent or assistant. Features include a top-bar entry point, side-by-side view, and new tabs for chat and history that replace the messages tab in your app home."):"Turn on to enable a new app messaging experience for your app\u2019s agent or assistant. Features include a top-bar entry point, side-by-side view, and new tabs for chat and history that replace the messages tab in your app home.")),e.createElement(Xt.A,{isToggled:k,isDisabled:m&&k,onChange:m?me:ee,ariaLabel:Mt})),k?e.createElement(e.Fragment,null,e.createElement("hr",null),e.createElement(pe.A,{text:p?X.t("Agent or Assistant Overview"):"Agent or Assistant Overview"},e.createElement(Ao.A,{id:"ai_apps_description",isRequired:!0,name:"ai_apps_description",size:"medium",onChange:Io,value:B,maxCharacterLimit:B?f:void 0,placeholder:p?X.t("Short description of what your app\u2019s agent or assistant can and can\u2019t do"):"Short description of what your app\u2019s agent or assistant can and can\u2019t do"})),e.createElement("div",null,e.createElement(bp.A,{legendText:X.t("Suggested Prompts")},e.createElement("p",null,p?X.t("Help people get started by providing dynamic or fixed prompt suggestions that appear when people open your app\u2019s agent or assistant."):"Help people get started by providing dynamic or fixed prompt suggestions that appear when people open your app\u2019s agent or assistant."),e.createElement(pe.A,{text:e.createElement(e.Fragment,null,X.t("Dynamic"),e.createElement("br",null),p?X.t("Configure dynamic prompt suggestions through an API, allowing adaptive and personalized interactions."):"Configure dynamic prompt suggestions through an API, allowing adaptive and personalized interactions."),htmlFor:"promptType-dynamic",type:"inline",cursor:"pointer"},e.createElement($n.A,{id:"promptType-dynamic",name:"dynamic",value:"dynamic",checked:w===it.Dynamic,onChange:sn(it.Dynamic)})),e.createElement(pe.A,{text:e.createElement(e.Fragment,null,X.t("Fixed"),e.createElement("br",null),p?X.t("Show up to 4 hardcoded prompts."):"Show up to 4 hardcoded prompts."),htmlFor:"promptType-fixed",type:"inline",cursor:"pointer"},e.createElement($n.A,{id:"promptType-fixed",name:"fixed",value:"fixed",checked:w===it.Fixed,onChange:sn(it.Fixed)})))),w===it.Fixed?rn():null,e.createElement(W.lV,{type:"primary",loading:R,onClick:on,disabled:!Ht||!T,"aria-label":c?X.t("Save"):"Save"},c?X.t("Save"):"Save")):null)))},"AiAppAdmin");gr.displayName="AiAppAdmin";const yp=gr,kp=new N.A("workflow_extensions_admin"),fr=d(()=>{const a=(0,_t.d4)(t=>(0,tt._Z)(t,"wfsteps_from_apps_deprecation_banner")==="on");return e.createElement(x.Ay,{level:x.A_.warning,className:"margin_bottom_100"},a?kp.rt("Steps from Apps for legacy workflows are now deprecated. <a>More information</a>",null,t=>{let{text:n}=t;return e.createElement(S.A,{href:`https://api.${(0,pt.Xk)()}/changelog/2023-08-workflow-steps-from-apps-step-back`,target:"_blank"},n)}):null)},"WorkflowExtensionsDeprecation");fr.displayName="WorkflowExtensionsDeprecation";const Sp=new N.A("includes_developer_apps"),hr=d(()=>{const t=(0,_t.d4)(n=>(0,tt._Z)(n,"app_settings_org_home_team_support")==="on")?Sp.rt("Incoming webhooks are not currently supported for org-ready apps. Please use our other messaging tools, including <code>chat.postMessage</code>, instead.",{"<code>":n=>{let{text:o}=n;return e.createElement("code",null,o)}}):null;return e.createElement(x.Ay,{level:x.A_.warning,className:"margin_bottom_100",heading:"No support for incoming webhooks"},t)},"IncomingWebhooksNotice");hr.displayName="IncomingWebhooksNotice";const wp={ServicesChannelPicker:qe.A,AppScopesManager:$r,UpdateScopesTool:_l,ActionsConfig:vc,OrgLevelApps:Rl,AppDetailsSection:Ul,AppLevelTokensSection:zl,OAuthTokenManagementSection:Ql,FeedbackLink:ti,AppHomeAdminGA:Ri,ModalContainer:jr.A,ToastContainer:zr.A,WorkflowExtensionsAdmin:cp,WorkflowExtensionsDeprecation:fr,BlockKitBetaAdmin:hp,AppManifestGuidanceContainer:ci,TokenManagementOptInLegacyLauncher:ri,AiAppAdmin:yp,IncomingWebhooksNotice:hr};var Tp=u(642914265);(0,Tp.Ay)(wp),je().setAppElement("#page")},8193048097:(ie,Be,u)=>{"use strict";u.d(Be,{$l:()=>h,DE:()=>pt,Eo:()=>na,N4:()=>fe,Qc:()=>G,cT:()=>ce,l3:()=>Pe,xY:()=>H});var ye=u(5586034336),je=u(6300259961),qe=u(1483201172),e=u(7160360373),E=u(7290912176),xe=u(6709722494),s=u(6202395333);const ge=d(F=>({id:String(F.action_id),type:F.type,name:F.name,description:F.desc,callbackId:F.callback_id}),"mapActionPropsFromAPIV2"),ct=d(F=>({actionUrl:F.action_url||"",suggestionUrl:F.suggestion_url||"",actions:(F.actions||[]).map(ge)}),"mapConfigFromApi"),ce=(0,xe.A)("fetch interactive messages / actions config",(F,re,he)=>F((0,e.H)({method:"developer.apps.actions.v2.list",args:{app_id:he}})).then(Ae=>ct(Ae)));ce.meta={name:"createFetcher",key:"createFetcherfetchAppConfig",description:"fetch interactive messages / actions config"};const x=d(F=>({id:Number(F.id)||F.id,type:F.type,name:F.name,desc:F.description||"",callback_id:F.callbackId}),"mapActionPropsToAPIV2"),H=(0,xe.A)("save existing actions config",function(F,re){let{appId:he,actionUrl:Ae,suggestionUrl:dt,actions:ke}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Tt=F((0,e.H)({method:"developer.apps.actions.v2.update",args:{app_id:he,action_url:Ae,actions:JSON.stringify(ke.map(x))}})).then(Ze=>ct(Ze));let De=null;return ke.filter(Ze=>Ze.type==="global_action").length>je.wE?(De=new Error("Number of global shortcuts exceeds maximum."),De.data={ok:!1,error:"too_many_global_actions"}):ke.filter(Ze=>Ze.type==="message_action").length>je.wE&&(De=new Error("Number of message shortcuts exceeds maximum."),De.data={ok:!1,error:"too_many_message_actions"}),De?ye.S.reject(De):Tt.then(()=>F((0,e.H)({method:"developer.apps.suggestions.update",args:{app:he,suggestion_url:dt}}))).then(()=>Tt)});H.meta={name:"createFetcher",key:"createFetchersaveAppConfig",description:"save existing actions config"};const G=(0,xe.A)("update the list of oauth scopes for the app",function(F,re){let{appId:he,scopes:Ae,scopeList:dt="scope"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F((0,e.H)({method:"developer.apps.scope.update",args:{id:he,[dt]:Ae.map(ke=>ke.id)},reason:"developer-actions-api/updateAppScopes"}))});G.meta={name:"createFetcher",key:"createFetcherupdateAppScopes",description:"update the list of oauth scopes for the app"};const S={scope:"dev_scopes_requested_payload",scope_bot:"dev_bot_scopes_requested_payload"},Pe=(0,s.Ay)("update the list of oauth scopes for the app",(F,re,he)=>{let{submissionId:Ae,scopes:dt,scopeList:ke="scope"}=he,Tt="{}";try{Tt=JSON.stringify({[S[ke]]:dt.reduce((De,Ze)=>(De[Ze.id]={notes:Ze.reason||""},De),{})})}catch(De){(0,E.Ay)({state:re()}).error("Invalid JSON used to update app submission",De)}return F((0,qe.a)({id:Ae,payload:Tt,reason:"developer-actions-api/updateAppScopes"}))});Pe.meta={name:"createThunk",key:"createThunkupdateAppScopesPostDistribution",description:"update the list of oauth scopes for the app"};const h=(0,xe.A)("converts the app to granular bot scopes",function(F,re){let{appId:he,userScopes:Ae,botScopes:dt}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F((0,e.H)({method:"developer.apps.migration.convertToGranularBotApp",args:{app:he,scope_user:Ae.map(ke=>ke.id),scope_bot:dt.map(ke=>ke.id)},reason:"developer-actions-api/convertToGranularBotApp"}))});h.meta={name:"createFetcher",key:"createFetcherconvertToGranularBotApp",description:"converts the app to granular bot scopes"};const na=(0,xe.A)("Calls API to create an app action for the specified app",function(F,re){let{appId:he,action:Ae}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F((0,e.H)({method:"developer.apps.actions.v2.create",args:{app_id:he,action:JSON.stringify(Ae)},reason:"developer.apps.actions.v2.create"}))});na.meta={name:"createFetcher",key:"createFetchercreateAppAction",description:"Calls API to create an app action for the specified app"};const fe=(0,xe.A)("Calls API to update a single app action for the specified app",function(F,re){let{appId:he,action:Ae}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F((0,e.H)({method:"developer.apps.actions.v2.save",args:{app_id:he,action:JSON.stringify(Ae)},reason:"developer.apps.actions.v2.save"}))});fe.meta={name:"createFetcher",key:"createFetcherupdateAppAction",description:"Calls API to update a single app action for the specified app"};const pt=(0,xe.A)("Calls API to delete a single app action for the specified app",function(F,re){let{appId:he,actionId:Ae}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F((0,e.H)({method:"developer.apps.actions.v2.delete",args:{app_id:he,id:Ae},reason:"developer.apps.actions.v2.delete"}))});pt.meta={name:"createFetcher",key:"createFetcherdeleteAppAction",description:"Calls API to delete a single app action for the specified app"}},1232078760:(ie,Be,u)=>{"use strict";u.d(Be,{A6:()=>E,G7:()=>x,Vo:()=>s,W4:()=>ct,k9:()=>xe});var ye=u(5021104278),je=u(8083780345),qe=u(2829351054),e=u(8644739173);const E=(0,ye.Ay)((H,G)=>{var S;return(H==null||(S=H.developerActions)===null||S===void 0?void 0:S[G])||qe.t0});E.meta={name:"createSelector",key:"createSelectorselectAppConfig",description:(H,G)=>{var S;return(H==null||(S=H.developerActions)===null||S===void 0?void 0:S[G])||qe.t0}};const xe=(0,ye.Ay)((H,G)=>!!E(H,G).isDataLoaded);xe.meta={name:"createSelector",key:"createSelectorselectIsDataLoaded",description:(H,G)=>!!E(H,G).isDataLoaded};const s=(0,ye.Ay)((H,G)=>!!E(H,G).unsaved);s.meta={name:"createSelector",key:"createSelectorselectUnsaved",description:(H,G)=>!!E(H,G).unsaved};const ge=(0,ye.Ay)((H,G)=>E(H,G).actions||(0,qe.B4)());ge.meta={name:"createSelector",key:"createSelectorselectActions",description:(H,G)=>E(H,G).actions||(0,qe.B4)()};const ct=(0,e.eI)((H,G)=>{const S=ge(H,G);return S==null?void 0:S.filter(Pe=>Pe.type!=="workflow_step_edit")}),ce=(0,ye.Ay)((H,G)=>{const S=ge(H,G);return S==null?void 0:S.filter(Pe=>Pe.type===je.TH.messageAction)});ce.meta={name:"createSelector",key:"createSelectorselectMessageActions",description:(H,G)=>{const S=ge(H,G);return S==null?void 0:S.filter(Pe=>Pe.type===je.TH.messageAction)}};const x=(0,ye.Ay)((H,G)=>E(H,G).saveError);x.meta={name:"createSelector",key:"createSelectorselectSaveError",description:(H,G)=>E(H,G).saveError}},1352302167:(ie,Be,u)=>{"use strict";u.d(Be,{Ac:()=>qe,Gi:()=>ye,R1:()=>x,g:()=>ge,q1:()=>H,uC:()=>je});var ye;(function(h){h.SETTING="setting",h.FETCHING="fetching",h.UNKNOWN="unknown",h.COMPLETE="complete",h.ERROR="error"})(ye||(ye={}));var je;(function(h){h.BLUEPRINT="blueprint",h.CLASSIC="classic",h.GRANULAR="granular",h.WORKSPACE="workspace"})(je||(je={}));var qe;(function(h){h.APPROVED="approved",h.FAILED="failed",h.PUBLISHED="published",h.SUBMITTED="submitted",h.UNSUBMITTED="unsubmitted"})(qe||(qe={}));var e;(function(h){h.Direct="direct",h.Landing="landing"})(e||(e={}));var E;(function(h){h.AppImage="app-image"})(E||(E={}));var xe;(function(h){h[h.NONE=0]="NONE",h[h.SLACK=1]="SLACK",h[h.LOCAL=2]="LOCAL",h[h.REMOTE=3]="REMOTE",h[h.WORKFLOW_BUILDER=4]="WORKFLOW_BUILDER"})(xe||(xe={}));var s;(function(h){h.EVERYONE="everyone",h.APP_COLLABORATORS="app_collaborators",h.NAMED_ENTITIES="named_entities"})(s||(s={}));var ge;(function(h){h.ALL="all",h.TRACE="trace",h.DEBUG="debug",h.INFO="info",h.WARN="warn",h.ERROR="error",h.FATAL="fatal"})(ge||(ge={}));var ct;(function(h){h.ASC="asc",h.DESC="desc"})(ct||(ct={}));var ce;(function(h){h.UPDATE="Update",h.CREATE="Create",h.DELETE="Delete"})(ce||(ce={}));var x;(function(h){h.ALL="all",h.FUNCTION="functions",h.WORKFLOW="workflows",h.EVENT_API="events_api",h.TABLE="tables"})(x||(x={}));var H;(function(h){h.LAST_7_DAY="last 7 days",h.LAST_24_HOURS="last 24 hrs",h.CUSTOM="custom"})(H||(H={}));var G;(function(h){h.DEVELOPER="developer",h.SLACK="slack"})(G||(G={}));var S;(function(h){h.WORKFLOW_EXECUTION_STARTED="workflow_execution_started",h.WORKFLOW_STEP_STARTED="workflow_step_started",h.WORKFLOW_STEP_EXECUTION_RESULT="workflow_step_execution_result",h.WORKFLOW_EXECUTION_RESULT="workflow_execution_result",h.FUNCTION_EXECUTION_STARTED="function_execution_started",h.FUNCTION_EXECUTION_RESULT="function_execution_result",h.FUNCTION_EXECUTION_OUTPUT="function_execution_output",h.FUNCTION_DEPLOYMENT="function_deployment",h.PLATFORM_NOTIFICATION="platform_notification",h.EXTERNAL_AUTH_STARTED="external_auth_started",h.EXTERNAL_AUTH_RESULT="external_auth_result",h.EXTERNAL_AUTH_TOKEN_FETCH_RESULT="external_auth_token_fetch_result"})(S||(S={}));var Pe;(function(h){h.BUILT_IN_FUNCTION="builtin"})(Pe||(Pe={}))},1704004258:(ie,Be,u)=>{ie.exports=u.p+"sh_landing_intro-004c147.svg"},7552850286:(ie,Be,u)=>{ie.exports=u.p+"placeholder_workflow_graphic-8c42767.png"},9238872268:(ie,Be,u)=>{ie.exports=u.p+"placeholder_workflow_graphic@2x-7244ad8.png"},1123051724:(ie,Be,u)=>{ie.exports=u.p+"ai_apps-8c4e06e.svg"},8579629782:ie=>{ie.exports={section:"section__KjF5J"}}},ie=>{var Be=d(ye=>ie(ie.s=ye),"__webpack_exec__");ie.O(0,["modern.vendor"],()=>Be(1367540903));var u=ie.O()}]);})();
