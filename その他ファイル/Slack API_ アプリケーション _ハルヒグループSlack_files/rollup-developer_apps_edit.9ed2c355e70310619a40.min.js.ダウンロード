(()=>{var pe=Object.defineProperty;var e=(n,f)=>pe(n,"name",{value:f,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["rollup-developer_apps_edit","TS.developer_apps","TS.developer_apps.UrlTableEditor","TS.developer_apps.request_install_on_team","TS.developer_apps.user_ids_toggle","TS.ui.drop_zone","jquery.colpick"],{1652324658:()=>{(function(n){var f=function(){var t='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_controls"><div class="colpick_color_state"><div class="colpick_new_color"></div><div class="colpick_current_color"></div></div><div class="colpick_color_fields"><div class="colpick_rgb_hsb"><div class="colpick_rgb"><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div></div><div class="colpick_hsb"><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div></div></div><div class="colpick_hex_submit"><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_submit"></div></div></div></div></div>',o={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},p=e(function(a,m){var A=u(a),q=0;n(m).data("colpick").fields.eq(q).val(A.r).end().eq(q+1).val(A.g).end().eq(q+2).val(A.b).end()},"fillRGBFields"),l=e(function(a,m){var A=3;n(m).data("colpick").fields.eq(A).val(Math.round(a.h)).end().eq(A+1).val(Math.round(a.s)).end().eq(A+2).val(Math.round(a.b)).end()},"fillHSBFields"),d=e(function(a,m){n(m).data("colpick").fields.eq(6).val(C(a))},"fillHexFields"),v=e(function(a,m){n(m).data("colpick").selector.css("backgroundColor","#"+C({h:a.h,s:100,b:100})),n(m).data("colpick").selectorIndic.css({left:parseInt(n(m).data("colpick").height*a.s/100,10),top:parseInt(n(m).data("colpick").height*(100-a.b)/100,10)})},"setSelector"),r=e(function(a,m){n(m).data("colpick").hue.css("top",parseInt(n(m).data("colpick").height-n(m).data("colpick").height*a.h/360,10))},"setHue"),h=e(function(a,m){n(m).data("colpick").currentColor.css("backgroundColor","#"+C(a))},"setCurrentColor"),b=e(function(a,m){n(m).data("colpick").newColor.css("backgroundColor","#"+C(a))},"setNewColor"),S=e(function(a){var m=n(this).parents(".colpick"),A,q=0;this.parentNode.className.indexOf("_swatches")>0?(A=E(n(a.target).data("swatch-color")),d(A,m.get(0)),p(A,m.get(0)),l(A,m.get(0))):this.parentNode.className.indexOf("_hex")>0?(m.data("colpick").color=A=E(ne(this.value)),p(A,m.get(0)),l(A,m.get(0))):this.parentNode.className.indexOf("_hsb")>0?(m.data("colpick").color=A=Y({h:parseInt(m.data("colpick").fields.eq(q+3).val(),10),s:parseInt(m.data("colpick").fields.eq(q+4).val(),10),b:parseInt(m.data("colpick").fields.eq(q+5).val(),10)}),p(A,m.get(0)),d(A,m.get(0))):(m.data("colpick").color=A=w(ie({r:parseInt(m.data("colpick").fields.eq(q).val(),10),g:parseInt(m.data("colpick").fields.eq(q+1).val(),10),b:parseInt(m.data("colpick").fields.eq(q+2).val(),10)})),d(A,m.get(0)),l(A,m.get(0))),v(A,m.get(0)),r(A,m.get(0)),b(A,m.get(0)),m.data("colpick").onChange.apply(m.parent(),[A,C(A),u(A),m.data("colpick").el,0])},"change"),x=e(function(a){n(this).parent().removeClass("colpick_focus")},"blur"),L=e(function(){var a=n(this).parents(".colpick");a.data("colpick").fields.parent().removeClass("colpick_focus"),n(this).parent().addClass("colpick_focus")},"focus"),W=e(function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var m=n(this).parent().find("input").focus(),A=n(this).parents(".colpick"),q={el:n(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:a.pageY,field:m,val:parseInt(m.val(),10),preview:A.data("colpick").livePreview};n(document).mouseup(q,U),n(document).mousemove(q,y)},"downIncrement"),y=e(function(a){return a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val-a.pageY+a.data.y,10)))),a.data.preview&&S.apply(a.data.field.get(0),[!0]),!1},"moveIncrement"),U=e(function(a){return S.apply(a.data.field.get(0),[!0]),a.data.el.removeClass("colpick_slider").find("input").focus(),n(document).off("mouseup",U),n(document).off("mousemove",y),!1},"upIncrement"),T=e(function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var m={cal:n(this).parent(),y:n(this).offset().top};n(document).on("mouseup touchend",m,P),n(document).on("mousemove touchmove",m,R);var A=a.type=="touchstart"?a.originalEvent.changedTouches[0].pageY:a.pageY;return S.apply(m.cal.data("colpick").fields.eq(3).val(parseInt(360*(m.cal.data("colpick").height-(A-m.y))/m.cal.data("colpick").height,10)).get(0),[m.cal.data("colpick").livePreview]),!1},"downHue"),R=e(function(a){var m=a.type=="touchmove"?a.originalEvent.changedTouches[0].pageY:a.pageY;return S.apply(a.data.cal.data("colpick").fields.eq(3).val(parseInt(360*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,m-a.data.y)))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]),!1},"moveHue"),P=e(function(a){return p(a.data.cal.data("colpick").color,a.data.cal.get(0)),d(a.data.cal.data("colpick").color,a.data.cal.get(0)),n(document).off("mouseup touchend",P),n(document).off("mousemove touchmove",R),!1},"upHue"),B=e(function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var m={cal:n(this).parent(),pos:n(this).offset()};m.preview=m.cal.data("colpick").livePreview,n(document).on("mouseup touchend",m,K),n(document).on("mousemove touchmove",m,z);var A,q;a.type=="touchstart"?(pageX=a.originalEvent.changedTouches[0].pageX,q=a.originalEvent.changedTouches[0].pageY):(pageX=a.pageX,q=a.pageY);var j=4;return S.apply(m.cal.data("colpick").fields.eq(j+1).val(parseInt(100*(m.cal.data("colpick").height-(q-m.pos.top))/m.cal.data("colpick").height,10)).end().eq(j).val(parseInt(100*(pageX-m.pos.left)/m.cal.data("colpick").height,10)).get(0),[m.preview]),!1},"downSelector"),z=e(function(a){var m,A;a.type=="touchmove"?(pageX=a.originalEvent.changedTouches[0].pageX,A=a.originalEvent.changedTouches[0].pageY):(pageX=a.pageX,A=a.pageY);var q=4;return S.apply(a.data.cal.data("colpick").fields.eq(q+1).val(parseInt(100*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,A-a.data.pos.top)))/a.data.cal.data("colpick").height,10)).end().eq(q).val(parseInt(100*Math.max(0,Math.min(a.data.cal.data("colpick").height,pageX-a.data.pos.left))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]),!1},"moveSelector"),K=e(function(a){return p(a.data.cal.data("colpick").color,a.data.cal.get(0)),d(a.data.cal.data("colpick").color,a.data.cal.get(0)),n(document).off("mouseup touchend",K),n(document).off("mousemove touchmove",z),!1},"upSelector"),G=e(function(a){var m=n(this).parents(".colpick"),A=m.data("colpick").color;m.data("colpick").origColor=A,h(A,m.get(0)),m.data("colpick").onSubmit(A,C(A),u(A),m.data("colpick").el)},"clickSubmit"),X=e(function(a){a&&a.stopPropagation();var m=n("#"+n(this).data("colpickId"));m.data("colpick").onBeforeShow.apply(this,[m.get(0)]);var A=n(this).offset(),q=A.top+this.offsetHeight,j=A.left,ae=ee(),g=m.width();j+g>ae.l+ae.w&&(j-=g),m.css({left:j+"px",top:q+"px"}),m.data("colpick").onShow.apply(this,[m.get(0)])!=!1&&m.addClass("visible"),n("html").mousedown({cal:m},Z),m.mousedown(function(M){M.stopPropagation()})},"show"),Z=e(function(a){a.data.cal.data("colpick").onHide.apply(this,[a.data.cal.get(0)])!=!1&&a.data.cal.removeClass("visible"),n("html").off("mousedown",Z)},"hide"),ee=e(function(){var a=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth)}},"getViewport"),Y=e(function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},"fixHSB"),ie=e(function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},"fixRGB"),ne=e(function(a){var m=6-a.length;if(m>0){for(var A=[],q=0;q<m;q++)A.push("0");A.push(a),a=A.join("")}return a},"fixHex"),se=e(function(){var a=n(this).parent(),m=a.data("colpick").origColor;a.data("colpick").color=m,p(m,a.get(0)),d(m,a.get(0)),l(m,a.get(0)),v(m,a.get(0)),r(m,a.get(0)),b(m,a.get(0))},"restoreOriginal");return{init:function(a){if(a=n.extend({},o,a||{}),typeof a.color=="string")a.color=E(a.color);else if(a.color.r!=null&&a.color.g!=null&&a.color.b!=null)a.color=w(a.color);else if(a.color.h!=null&&a.color.s!=null&&a.color.b!=null)a.color=Y(a.color);else return this;var m=t;if(a.swatches&&Array.isArray(a.swatches)){var A="",q;for(i=0;i<a.swatches.length;i++)q=a.swatches[i],/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(q)&&(A+='<div class="colpick_swatch" style="background-color: '+q+';" data-swatch-color="'+q+'"></div>');A&&(A='<div class="colpick_swatches">'+A+"</div>",m=t.slice(0,-6)+A+"</div>")}return this.each(function(){if(!n(this).data("colpickId")){var j=n.extend({},a);j.origColor=a.color;var ae="collorpicker_"+parseInt(Math.random()*1e3);n(this).data("colpickId",ae);var g=n(m).attr("id",ae);g.addClass("colpick_"+j.layout+(j.submit?"":" colpick_"+j.layout+"_ns")),j.colorScheme!="light"&&g.addClass("colpick_"+j.colorScheme),g.find("div.colpick_submit").html(j.submitText).click(G),j.fields=g.find("input").change(S).blur(x).focus(L),g.find("div.colpick_field_arrs").mousedown(W).end().find("div.colpick_current_color").click(se),j.swatches=g.find(".colpick_swatch").click(S),j.selector=g.find("div.colpick_color").on("mousedown touchstart",B),j.selectorIndic=j.selector.find("div.colpick_selector_outer"),j.el=this,j.hue=g.find("div.colpick_hue_arrs"),huebar=j.hue.parent();var M=navigator.userAgent.toLowerCase(),D=navigator.appName==="Microsoft Internet Explorer",F=D?parseFloat(M.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,H=D&&F<10,V=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(H){var Q,le;for(Q=0;Q<=11;Q++)le=n("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+V[Q]+", endColorstr="+V[Q+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+V[Q]+", endColorstr="+V[Q+1]+')";'),huebar.append(le)}else stopList=V.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");if(g.find("div.colpick_hue").on("mousedown touchstart",T),j.newColor=g.find("div.colpick_new_color"),j.currentColor=g.find("div.colpick_current_color"),g.data("colpick",j),p(j.color,g.get(0)),l(j.color,g.get(0)),d(j.color,g.get(0)),r(j.color,g.get(0)),v(j.color,g.get(0)),h(j.color,g.get(0)),b(j.color,g.get(0)),j.flat){g.appendTo(this).show();var re={position:"relative"};re.display="flex",g.css(re)}else g.appendTo(document.body),n(this).on(j.showEvent,X),g.css({position:"absolute"})}})},showPicker:function(){return this.each(function(){n(this).data("colpickId")&&X.apply(this)})},hidePicker:function(){return this.each(function(){n(this).data("colpickId")&&n("#"+n(this).data("colpickId")).hide()})},setColor:function(a,m){if(m=typeof m>"u"?1:m,typeof a=="string")a=E(a);else if(a.r!=null&&a.g!=null&&a.b!=null)a=w(a);else if(a.h!=null&&a.s!=null&&a.b!=null)a=Y(a);else return this;return this.each(function(){if(n(this).data("colpickId")){var A=n("#"+n(this).data("colpickId"));A.data("colpick").color=a,A.data("colpick").origColor=a,p(a,A.get(0)),l(a,A.get(0)),d(a,A.get(0)),r(a,A.get(0)),v(a,A.get(0)),b(a,A.get(0)),A.data("colpick").onChange.apply(A.parent(),[a,C(a),u(a),A.data("colpick").el,1]),m&&h(a,A.get(0))}})}}}(),s=e(function(o){var o=parseInt(o.indexOf("#")>-1?o.substring(1):o,16);return{r:o>>16,g:(o&65280)>>8,b:o&255}},"hexToRgb"),E=e(function(t){return w(s(t))},"hexToHsb"),w=e(function(t){var o={h:0,s:0,b:0},p=Math.min(t.r,t.g,t.b),l=Math.max(t.r,t.g,t.b),d=l-p;return o.b=l,o.s=l!=0?255*d/l:0,o.s!=0?t.r==l?o.h=(t.g-t.b)/d:t.g==l?o.h=2+(t.b-t.r)/d:o.h=4+(t.r-t.g)/d:o.h=-1,o.h*=60,o.h<0&&(o.h+=360),o.s*=100/255,o.b*=100/255,o},"rgbToHsb"),u=e(function(t){var o={},p=t.h,l=t.s*255/100,d=t.b*255/100;if(l==0)o.r=o.g=o.b=d;else{var v=d,r=(255-l)*d/255,h=(v-r)*(p%60)/60;p==360&&(p=0),p<60?(o.r=v,o.b=r,o.g=r+h):p<120?(o.g=v,o.b=r,o.r=v-h):p<180?(o.g=v,o.r=r,o.b=r+h):p<240?(o.b=v,o.r=r,o.g=v-h):p<300?(o.b=v,o.g=r,o.r=r+h):p<360?(o.r=v,o.g=r,o.b=v-h):(o.r=0,o.g=0,o.b=0)}return{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}},"hsbToRgb"),k=e(function(t){var o=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return n.each(o,function(p,l){l.length==1&&(o[p]="0"+l)}),o.join("")},"rgbToHex"),C=e(function(t){return k(u(t))},"hsbToHex");n.fn.extend({colpick:f.init,colpickHide:f.hidePicker,colpickShow:f.showPicker,colpickSetColor:f.setColor}),n.extend({colpick:{rgbToHex:k,rgbToHsb:w,hsbToHex:C,hsbToRgb:u,hexToHsb:E,hexToRgb:s}})})(jQuery)},9593635862:()=>{(function(){TS.registerComponent("developer_apps.SaveBar",{_constructor:function(C){var t=this,o=_.merge(w,C);_.forEach(o,function(p,l){t[`_${l}`]=p}),this._current_data=_.cloneDeep(this._initial_data),this._auto_hide&&(this._$save_bar.hide(),this._$save_btn.attr("disabled",!1),this._$cancel_btn.attr("disabled",!1)),this._$save_btn&&(this._onSaveButtonTriggered=u.bind(this),this._$save_btn.on("click",this._onSaveButtonTriggered)),this._$cancel_btn&&(this._onCancel=k.bind(this),this._$cancel_btn.on("click",this._onCancel)),this._onBeforeUnload=function(){if(t.hasUnsavedChanges())return"Are you sure?"},$(window).on("beforeunload",this._onBeforeUnload)},hasUnsavedChanges:function(){return!_.isEqual(this._initial_data,this._current_data)},resetUnsaved:function(){this._initial_data=_.cloneDeep(this._current_data)},updateData:function(C){this._current_data=_.merge(this._current_data,C);var t=this._validate();if(!t){this._auto_hide?this._$save_bar.slideUp(E):this._$save_btn.attr("disabled",!0);return}var o=!this.hasUnsavedChanges();this._auto_hide?this._$save_bar[o?"slideUp":"slideDown"](E):(this._$save_btn.attr("disabled",o),this._$cancel_btn.attr("disabled",o))},destroy:function(){this._initial_data=null,this._current_data=null,this._$save_btn&&(this._$save_btn.unbind("click",this._onSaveBound),this._$save_btn=null),this._$cancel_btn&&(this._$cancel_btn.unbind("click",this._onCancel),this._$cancel_btn=null),$(window).unbind("beforeunload",this._onBeforeUnload)}});var n=".save_bar",f=".save_changes_button",s=".cancel_changes_button",E=300,w={$save_bar:$(n),$save_btn:$(f),$cancel_btn:$(s),initial_data:{},_auto_hide:!1,onSaveHook:function(){return Promise.resolve()},validate:function(){return!0}},u=e(function(C){var t=this._validate();if(!t){this._auto_hide?this._$save_bar.slideUp(E):this._$save_btn.attr("disabled",!0);return}var o=!1;this._onSaveHook(C,this._current_data).bind(this).then(function(){o=!0,this._initial_data=_.cloneDeep(this._current_data)}).catch(function(p){TS.error(`SaveBar encountered an error while saving. Here's the data we have for 			why that happened: ${p}`)}).finally(function(){if(Ladda.stopAll(),o)if(this._auto_hide){var p=this;setTimeout(function(){p._$save_bar.slideUp(E)},500)}else this._$save_btn.attr("disabled",!0),this._$cancel_btn.attr("disabled",!0)})},"_onSaveButtonTriggered"),k=e(function(){if(this.hasUnsavedChanges()){var C=this.resetUnsaved.bind(this),t=e(function(){C(),TS.reload(!1,"TS.developer_apps.SaveBar._onCancel.onGo")},"onGo");TS.generic_dialog.start({title:TS.interop.i18n.t("Are you sure?","developer_apps")(),body:TS.interop.i18n.t("You will lose all unsaved changes.","developer_apps")(),go_button_text:TS.interop.i18n.t("Yes, I\u2019m sure","developer_apps")(),cancel_button_text:TS.interop.i18n.t("No, go back","developer_apps")(),onGo:t,onCancel:Ladda.stopAll})}},"_onCancel")})()},6525150068:()=>{(function(){TS.registerComponent("developer_apps.UrlTableEditor",{_constructor:function(y,U,T,R){s||(TS.ui.validation.register("isunique",L),s=!0),this._buttonActionsClickHandler=w.bind(this),this._toggleEmptyMessage=u.bind(this),this._promptIfUnsavedChanges=k.bind(this),this._createNewRow=C.bind(this),this._createRecordInModel=t.bind(this),this._setRowToEditMode=o.bind(this),this._setRowToReadMode=p.bind(this),this._updateModelWithRecord=l.bind(this),this._setRowToSoftDeleteMode=d.bind(this),this._toggleAddButton=v.bind(this),this._toggleSaveButton=r.bind(this),this._toggleAddButtonAndSaveButton=h.bind(this),this._enterKeypressHandler=b.bind(this),this._escapeKeypressHandler=S.bind(this),this._validationCompleteSignal=x.bind(this),this._enableTokenRotationOptIn=W.bind(this),TS.ui.validation.completed_sig.add(this._validationCompleteSignal);var P;this._instance_options=_.clone(n),this._initial_model=_.clone(U),this._model=_.clone(U),R&&_.merge(this._instance_options,R),this._template_options=_.omit(this._instance_options,["onUpdate","annotationBuilder","error_messages"]),P=TS.templates.developer_apps_url_table_editor({model:U,promise_to_save_button:!!T,options:this._template_options}),y.html(P),this._$table_editor=y.find('[data-js="url-table-editor"]'),this._$table_editor.on("click","[data-js-url-editor]",this._buttonActionsClickHandler),this._$table_editor.on("keydown","input",B=>{if(B.which===f.enter)return this._enterKeypressHandler($(B.target)),!1;if(B.which===f.esc)return this._escapeKeypressHandler($(B.target)),!1}),T&&(this._promise_to_save_action=T,this._toggleSaveButton(!0),Ladda.bind(this._$table_editor.find('[data-js-url-editor="save-all"]')[0])),this._template_options.start_in_create_mode&&(this._createNewRow(),this._toggleAddButton(!0),delete this._template_options.start_in_create_mode),this._template_options.show_unload_warning&&$(window).on("beforeunload",this._promptIfUnsavedChanges),this._template_options.show_empty_message&&_.size(this._model)==0&&this._toggleEmptyMessage(!0),this._template_options.limit>0&&this._template_options.limit<=_.size(this._model)&&this._toggleAddButton(!0),this._$error_message=this._$table_editor.find('[data-js="url-table-editor-alert"]'),this._$error_message_text=this._$error_message.find(".message"),this._$instance_element=y},destroy:function(){this._$table_editor.off(),$(window).off("beforeunload",this._promptIfUnsavedChanges),this._$instance_element.empty()}});var n={title:"URLs",save_button_text:TS.interop.i18n.t("Add","developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","developer_apps")(),add_button_text:TS.interop.i18n.t("Add URL","developer_apps")(),edit_button_text:TS.interop.i18n.t("Save URL","developer_apps")(),save_all_urls_text:TS.interop.i18n.t("Save URLs","developer_apps")(),start_in_create_mode:!1,soft_deletes:!0,show_empty_message:!1,empty_message:TS.interop.i18n.t("No URLs have been added","developer_apps")(),footer:"",validation:"isurl=http isunique required",show_unload_warning:!0,onUpdate:_.noop,limit:0,annotationBuilder:_.noop,placeholder:null,id:"urls",error_messages:{}},f=TS.utility.keymap,s=!1,E=TS.interop.i18n.t("Oops, something went wrong","developer_apps")(),w=e(function(y){var U,T,R;switch(y.preventDefault(),U=$(y.target).closest("[data-row]"),T=U.data("row"),R=$(y.currentTarget).data().jsUrlEditor,R){case"create":this._template_options.show_empty_message&&_.size(this._model)==0&&this._toggleEmptyMessage(!1),this._createNewRow(),this._toggleAddButtonAndSaveButton(!0);break;case"cancel-create":this._template_options.show_empty_message&&_.size(this._model)==0&&this._toggleEmptyMessage(!0),U.remove(),this._toggleAddButtonAndSaveButton(!1);break;case"save-create":this._createRecordInModel(U.find("input").val()),this._setRowToReadMode(U),this._template_options.limit>0&&this._template_options.limit<=_.size(this._model)?this._toggleSaveButton(!1):this._toggleAddButtonAndSaveButton(!1),this._instance_options.onUpdate(this._model);break;case"edit":this._setRowToEditMode(U);break;case"cancel-update":this._setRowToReadMode(U);break;case"save-update":this._updateModelWithRecord(T),this._setRowToReadMode(U),this._promise_to_save_action&&this._toggleSaveButton(!1),this._instance_options.onUpdate(this._model);break;case"delete":this._template_options.soft_deletes?this._setRowToSoftDeleteMode(U):(this._model.splice(T,1),this.destroy(),this._constructor(this._$instance_element,this._model,this._promise_to_save_action,this._instance_options)),this._template_options.show_empty_message&&_.size(this._model)==0&&this._toggleEmptyMessage(!0),this._toggleSaveButton(!1),this._instance_options.onUpdate(this._model);break;case"restore":this._setRowToReadMode(U),this._instance_options.onUpdate(this._model);break;case"save-all":this._initial_model=_.clone(this._model),this._promise_to_save_action&&typeof this._promise_to_save_action=="function"&&this._promise_to_save_action(this._model).then(()=>{this._model=_.filter(this._model,{state:"read"}),this.destroy(),this._constructor(this._$instance_element,this._model,this._promise_to_save_action,this._instance_options),this._$error_message.toggleClass("hidden",!0),TS.developer_apps.UrlTableEditor.completed_sig&&TS.developer_apps.UrlTableEditor.completed_sig.dispatch(this._model),this._enableTokenRotationOptIn()}).catch(P=>{var{data:B}=P,{error_messages:z}=this._instance_options;z.hasOwnProperty(B.error)?this._$error_message_text.text(z[B.error](B)):this._$error_message_text.text(E),this._$error_message.toggleClass("hidden",!1)}).finally(Ladda.stopAll);break;default:break}},"_buttonActionsClickHandler"),u=e(function(y){var U=this._$table_editor.find('[data-js="url-table-editor-empty-message-container"]');U.empty(),y&&U.append(TS.templates.developer_apps_url_table_editor_empty_message({message:this._instance_options.empty_message}))},"_toggleEmptyMessage"),k=e(function(){if(!_.isEqual(this._initial_model,this._model))return TS.interop.i18n.t("You have unsaved changes, are you sure?","developer_apps")()},"_promptIfUnsavedChanges"),C=e(function(){var y=_.size(this._model),U={index:y,url:"",annotation:"",is_create_mode:!0,cancel_button_text:this._template_options.cancel_button_text,save_button_text:this._template_options.save_button_text,validation:this._template_options.validation,id:this._template_options.id,placeholder:this._template_options.placeholder};this._$table_editor.find('[data-js="url-table-editor-body"]').append(TS.templates.developer_apps_url_table_editor_row(U)).find(`[data-row="${y}"] [data-js-url-editor="save-create"]`).prop("disabled",!0).toggleClass("disabled",!0).parents(`[data-row="${y}"]`).find('input[type="url"]').focus()},"_createNewRow"),t=e(function(y){this._model.push({url:y,annotation:this._instance_options.annotationBuilder(y),state:"create"})},"_createRecordInModel"),o=e(function(y){var U=y.data("row"),T=this._model[U].url,R={index:U,url:T,annotation:this._instance_options.annotationBuilder(T),is_edit_mode:!0,cancel_button_text:this._template_options.cancel_button_text,save_button_text:this._template_options.save_button_text,edit_button_text:this._template_options.edit_button_text,validation:this._template_options.validation,id:this._template_options.id,placeholder:this._template_options.placeholder},P=$(TS.templates.developer_apps_url_table_editor_row(R));y.replaceWith(P),P.find("input").focus(),this._model[U].state="edit"},"_setRowToEditMode"),p=e(function(y){var U=y.data("row"),T=this._model[U].url,R={index:U,url:T,annotation:this._instance_options.annotationBuilder(T),is_read_mode:!0,validation:this._template_options.validation,id:this._template_options.id,placeholder:this._template_options.placeholder},P=$(TS.templates.developer_apps_url_table_editor_row(R));y.replaceWith(P),P.find("input").prop("disabled",!0),this._model[U].state="read"},"_setRowToReadMode"),l=e(function(y){var U=this._$table_editor.find(`[data-row="${y}"] input`),T=encodeURI(U.val().trim()),R={url:T,state:"update",annotation:this._instance_options.annotationBuilder(T),oldUrl:this._model[y].url};this._model[y]=R,R.url!==R.oldUrl&&this._instance_options.onUpdate(this._model)},"_updateModelWithRecord"),d=e(function(y){var U=y.data("row"),T=this._model[U].url,R=$(TS.templates.developer_apps_url_table_editor_row({index:U,url:T,annotation:this._instance_options.annotationBuilder(T),is_delete_mode:!0,validation:this._template_options.validation,id:this._template_options.id,placeholder:this._template_options.placeholder}));y.replaceWith(R),this._model[U].state="delete"},"_setRowToSoftDeleteMode"),v=e(function(y){this._$table_editor.find('button[data-js-url-editor="create"]').toggleClass("disabled",y).prop("disabled",y)},"_toggleAddButton"),r=e(function(y){this._$table_editor.find('button[data-js-url-editor="save-all"]').toggleClass("disabled",y).prop("disabled",y)},"_toggleSaveButton"),h=e(function(y){this._toggleAddButton(y),this._toggleSaveButton(y)},"_toggleAddButtonAndSaveButton"),b=e(function(y){var U=TS.ui.validation.validate(y),T=y.closest("[data-row]"),R=T.data("row");U&&(_.has(this._model,R)?(this._updateModelWithRecord(R),this._setRowToReadMode(T),this._promise_to_save_action&&this._toggleSaveButton(!1)):(this._createRecordInModel(T.find("input").val()),this._setRowToReadMode(T),this._template_options.limit>0&&this._template_options.limit<=_.size(this._model)?this._toggleSaveButton(!1):this._toggleAddButtonAndSaveButton(!1),this._instance_options.onUpdate(this._model)))},"_enterKeypressHandler"),S=e(function(y){var U=y.closest("[data-row]"),T=U.data("row");_.has(this._model,T)?this._setRowToReadMode(U):(this._template_options.show_empty_message&&_.size(this._model)==0&&this._toggleEmptyMessage(!0),U.remove(),this._toggleAddButtonAndSaveButton(!1))},"_escapeKeypressHandler"),x=e(function(y,U){if(this._$table_editor&&y.is(this._$table_editor.find("[data-url-table-editor-input]"))){var T=U.passed;this._$table_editor.find('input[type="url"]').parents("[data-row]").find('[data-js-url-editor="save-update"], [data-js-url-editor="save-create"]').toggleClass("disabled",!T).prop("disabled",!T)}},"_validationCompleteSignal"),L=e(function(y,U){var T=y.val(),R=!0;return y.closest('[data-js="url-table-editor"]').find("[data-row] input").not(y).each(function(){if($(this).val()===T)return R=!1,!1}),R?!0:(TS.ui.validation.showWarning(y,TS.interop.i18n.t("You\u2019ve already added this URL.","developer_apps")(),U),!1)},"_customValidationCheckUniqueURLs"),W=e(function(){var y=$('[data-js="token_rotation_button"]'),U=$('[data-js="token_rotation_alert_invalid"]');y.length&&y.prop("disabled")&&y.removeAttr("disabled"),U.length&&U.addClass("hidden")},"_enableTokenRotationOptIn")})()},1606144682:()=>{(function(){TS.registerModule("developer_apps.app_icon_and_color_picker",{onStart:function(){n()}});var n=e(function(){u(),l()},"_bindUI"),f=/^#[A-Fa-f0-9]{6}$/,s="#000000",E="#FFFFFF",w="#2C2D30",u=e(function(){var P=$("#app_color_picker"),B=P.find("#app_color_preview"),z=P.find("#app_color_hex_input");P.colpick({layout:"hex",submit:!1,color:z.val()||w,swatches:["#000000","#737373","#004492","#1D7C00","#C55100","#D32600","#590088"],onChange:function(K,G){z.val()!==`#${G}`&&(z.val(`#${G}`),z.change())}}),TS.ui.validation.register("app_color_hex",function(K,G){var X=K.val(),Z=X.match(f),ee=X?TS.ui.a11y.getContrastColor(X):E;if((!X||Z)&&(B.css("background-color",X),X&&P.colpickSetColor(X.replace("#",""),!1),ee===E))return!0;var Y=TS.interop.i18n.t("Please enter a 6-digit hex color code starting with a #.","developer_apps")();Z&&ee===s&&(Y=TS.interop.i18n.t("This color\u2019s not dark enough for your app name to be read. Try another?","developer_apps")()),TS.ui.validation.showWarning(K,Y,G)})},"_bindAppColorPicker"),k,C,t=/image/,o,p=!1,l=e(function(){k=$("#app_preview"),C={name:TS.boot_data.app_to_edit.name,desc:TS.boot_data.app_to_edit.desc,app_icons:TS.boot_data.app_to_edit.payload.icons,large:!0,is_edit_mode:!0},TS.boot_data.app_to_edit.directory_payload.app_card_color&&(C.color=TS.utility.hex2rgb(TS.boot_data.app_to_edit.directory_payload.app_card_color),C.color.hex=TS.boot_data.app_to_edit.directory_payload.app_card_color),k.html(TS.templates.menu_app_card_header(C)),d(),$('input[name="name"]').on("change",function(P){P.target.value?C.name=P.target.value:C.name=TS.interop.i18n.t("App Name","developer_apps")(),k.html(TS.templates.menu_app_card_header(C)),d()}),$('input[name="desc"]').on("change",function(P){C.desc=P.target.value,k.html(TS.templates.menu_app_card_header(C)),d()}),$('input[name="app_card_color"]').on("change",function(P){var B=TS.utility.hex2rgb(P.target.value);B?(B.hex=P.target.value,C.color=B):delete C.color,k.html(TS.templates.menu_app_card_header(C)),d()})},"_bindAppPreview"),d=e(function(){var P=$('input[name="icon"]');P.on("click",function(B){p?B.preventDefault():B.target.value=null}),P.on("change",function(B){T(),L(B.target.files[0]),B.preventDefault()})},"_bindAppIconUpload"),v=e(function(P){var B=$(".app_icon_upload_progress");if(P){B.css("display","flex"),B.circleProgress({value:0,size:28,animation:!1,fill:{gradient:["#50acf4","#41a6f5"]},startAngle:Math.PI/-2});var z=0;o=setInterval(function(){B.circleProgress({value:z%100/100}),z+=1},50)}else B.css("display","none"),clearInterval(o)},"_updateAppIconProgress"),r=512,h=r,b=2e3,S=b,x=2e6,L=e(function(P){if(!P){T("warning",TS.interop.i18n.t("Whoops! Looks like you didn\u2019t upload a file.","developer_apps")());return}if(!t.test(P.type)){T("warning",TS.interop.i18n.t("Please use a valid image and try again.","developer_apps")());return}if(P.size>x){T("warning",TS.interop.i18n.t("Icons must be smaller than 2MB.","developer_apps")());return}var B=new FileReader;B.addEventListener("load",function(){var z=new Image;z.addEventListener("load",function(){z.width>=r&&z.width<=b&&z.height>=h&&z.height<=S&&z.width===z.height?W(P).catch(U).then(y):T("warning",TS.interop.i18n.t("Icons must be squares between 512px by 512px and 2000px by 2000px, please!","developer_apps")())}),z.src=B.result}),B.readAsDataURL(P)},"_processAppIcon"),W=e(function(P){var B=new FormData;return B.append("icon",P,P.name),B.append("crumb",$('[name="crumb"]').val()),B.append("icon_upload",1),B.append("MAX_FILE_SIZE",4e6),p=!0,$(".app_icon_upload_label").addClass("suppress_replace_icon").addClass("disabled"),new Promise(function(z,K){$.ajax({url:window.location.pathname,data:B,cache:!1,contentType:!1,processData:!1,type:"POST",xhr:function(){var G=jQuery.ajaxSettings.xhr();return G.upload&&v(!0),G}}).fail(function(G,X,Z){K(new Error(Z))}).done(function(G){G.ok?z({data:G,file:P}):K(new Error(G.error))})})},"_uploadAppIcon"),y=e(function(P){v(!1),p=!1,R(P.data.icons);var B=`.icon_for_${TS.boot_data.encoded_app_id}`;$(B).each(function(){$(this).attr("src",P.data.icons.image_32)}),TS.developer_apps.showSuccessBanner()},"_handleAppIconUploadSuccess"),U=e(function(P){TS.error(P),p=!1,$(".app_icon_upload_label").removeClass("suppress_replace_icon").removeClass("disabled");var B=TS.developer_apps.getErrorMessage(P.message,"icon_general");T("error",B),v(!1)},"_handleAppIconUploadError"),T=e(function(P,B){switch(P){case"error":case"warning":$("#app_icon_error").attr("class",P).text(B);break;default:$("#app_icon_error").text("");break}},"_updateAppIconStatus"),R=e(function(P){C.app_icons=P,k.html(TS.templates.menu_app_card_header(C)),d()},"_updateAppIconPreview")})()},8942369482:()=>{(function(){TS.registerModule("developer_apps.bot_users",{onStart:function(){TS.boot_data.active_section==="bots"&&n()}});var n=e(function(){TS.ui.validation.completed_sig.add(f),$(".section_bots").on("click","[data-action=bot_remove]",s),$("#bots_section_default").on("click",E),$('[data-js="bots_section_add"]').removeClass("disabled")},"_bindUI"),f=e(function(o,p){if(o.is(".section_bots .username_input")){$("#bots_section_add_button").attr("disabled",!1);return}if(o.is(".section_bots form")){if(p.event.preventDefault(),C(),!p.passed){Ladda.stopAll();return}var l=o.find(".username_input"),d=TS.boot_data.app_to_edit.encoded_id,v=l.val().trim(),r=o.find('input[name="bot_real_name"]'),h=v;r&&r.val()&&(h=r.val().trim());var b=o.find(".form_action").val(),S=b==="add",x=$('[name="always_active_toggle"] .ts_toggle').hasClass("checked");w(d,v,h,S,x).catch(function(L){Ladda.stopAll(),k(TS.interop.i18n.t("We apologize, but the bot username could not be set","bot_users")()),TS.warn(L)})}},"_onValidation"),s=e(function(o){o.preventDefault();var p;TS.boot_data.app_to_edit.num_teams>0?p=TS.interop.i18n.t("You are removing a bot user from {team_count} {team_count, plural, =1 {workspace} other {workspaces}}","bot_users")({team_count:TS.boot_data.app_to_edit.num_teams}):p=TS.interop.i18n.t("Your bot user is not installed on any workspaces","bot_users")(),TS.generic_dialog.start({body:TS.templates.api_app_edit_bots_modal(),cancel_button_text:TS.interop.i18n.t("No, Cancel","bot_users")(),go_button_class:"btn_danger ladda-button",go_button_text:TS.interop.i18n.t("Yes, Delete It","bot_users")(),onGo:function(){return t(),u(TS.boot_data.app_to_edit.encoded_id).catch(function(){Ladda.stopAll(),t(!0)}),!1},onShow:function(){$("#generic_dialog .ladda-button").attr("data-style","expand-right"),Ladda.bind("#generic_dialog .ladda-button")},title:p})},"_onClickBotRemove"),E=e(function(){$(this).addClass("hidden"),$("#bots_section_add").removeClass("hidden"),$("#bots_section_add_button").addClass("ladda-button"),Ladda.bind("#bots_section_add_button")},"_onClickBotSectionDefault"),w=e(function(o,p,l,d,v){var r={app:o,real_name:l,username:p};r.always_active=v;var h=d?"developer.apps.botusers.add":"developer.apps.botusers.edit";return TS.interop.api.call(h,r).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl({saved:"1"}))})},"_upsertBot"),u=e(function(o){var p={app:o};return TS.interop.api.call("developer.apps.botusers.delete",p).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl({saved:"1"}))})},"_removeBot"),k=e(function(o){var p=TS.templates.api_app_edit_bots_response({error:o});$(".bot_action_response").html(p)},"_showBotFormError"),C=e(function(){$(".bot_action_response").html("")},"_clearBotFormError"),t=e(function(o){$("#generic_dialog .alert").toggleClass("hidden",!o)},"_toggleBotModalError")})()},8888488183:()=>{(function(){TS.registerModule("developer_apps.collaborators",{onStart:function(){TS.boot_data.active_section==="collaborators"&&(t(),d(),v())}});var n,f,s,E=e(function(){return TS.interop.i18n.t("Add a member\u2026","developer_apps")()},"_PLACEHOLDER_TEXT"),w=e(function(){return TS.interop.i18n.t("All members in this workspace have been added as Collaborators","developer_apps")()},"_PLACEHOLDER_TEXT_EMPTY"),u=50,k=2,C=200,t=e(function(){f=_.cloneDeep(TS.boot_data.app_collaborators),$("#owners_div").html(TS.templates.developer_apps_collaborator_list({app_collaborators:TS.boot_data.app_collaborators_id_list.map(function(x){return f[x]}),team_name:TS.boot_data.team_name,team_url:TS.boot_data.team_url,user_id:TS.boot_data.user_id,user_is_guest:TS.boot_data.user_is_guest}))},"_initCollaboratorsList"),o=e(function(x,L){var W=TS.utility.search.makeConjunction("AND",[TS.utility.search.makeClause("is","user"),TS.utility.search.makeConjunction("OR",[TS.utility.search.makeClause("name",x),TS.utility.search.makeClause("real_name",x)])]),y={include_bots:!1,count:u,query:W,solr:!0};return L&&s&&(y.cursor_mark=s),y},"_buildSearchArgs"),p=e(function(x,L){return TS.utility.search.promiseToSearch(o(x,L)).then(function(W){var y=W.data;s=y.next_cursor_mark;var U=y.items.map(function(R){return r(R)}).filter(function(R){return!f[R.id]}).sort(TS.interop.i18n.mappedSorter("name")),T=y.num_found<=(L||1)*u;return{items:U,all_items_fetched:T}})},"_fetchMemberLfsItems"),l=e(function(){return _.size(f)===TS.boot_data.member_count},"_shouldDisableLfs"),d=e(function(){if(!TS.boot_data.user_is_guest){var x={remove_button:TS.interop.i18n.t("Remove","developer_apps")(),saving:TS.interop.i18n.t("Adding\u2026","developer_apps")(),saved:TS.interop.i18n.t("Added!","developer_apps")(),failed:TS.interop.i18n.t("Not added","developer_apps")()};n=$("#lfs_new_collaborator"),n.lazyFilterSelect({approx_item_height:40,input_debounce_wait_time:C,min_query_length:k,data_promise:p,disabled:l(),template:function(L){var W=TS.templates.developer_apps_collaborator_row(L);return new Handlebars.SafeString(W)},onItemAdded:function(L){var W=TS.templates.developer_apps_collaborator_row({id:L.id,image:L.image,name:L.name,username:L.username,button:x.remove_button,button_action:"collaborator_remove",team_url:TS.boot_data.team_url}),y=$(`<tr><td>${W}</td></tr>`).hide();y.find("button").css("visibility","hidden"),$("#collaborators_tbody").append(y),y.show("slow"),n.lazyFilterSelect("clearValue"),setTimeout(function(){n.lazyFilterSelect("blur")},1),S();var U=TS.interop.api.call("developer.apps.owners.add",{user_id:L.id,app_id:TS.boot_data.app_id}).then(function(){f[L.id]=L,b(),setTimeout(function(){y.find("button").css("visibility","")},2e3)}).catch(function(R){throw setTimeout(function(){h(L.id)},1e3),R}),T=$(`#collaborators_tbody .collaborator_row[data-id="${L.id}"] #saver_hook`);TS.ui.inline_saver.show({target:T,promise:U,custom_text:{saving:x.saving,saved:x.saved,failed:x.failed}})},placeholder_text:l()?w():E()})}},"_initLazyFilterSelect"),v=e(function(){var x={leave:TS.interop.i18n.t("Leave","developer_apps")(),remove:TS.interop.i18n.t("Remove","developer_apps")(),saving_removing_self:TS.interop.i18n.t("Leaving\u2026","developer_apps")(),saving:TS.interop.i18n.t("Removing\u2026","developer_apps")(),saved_removing_self:TS.interop.i18n.t("Left!","developer_apps")(),saved:TS.interop.i18n.t("Removed!","developer_apps")(),failed_removing_self:TS.interop.i18n.t("Not left","developer_apps")(),failed:TS.interop.i18n.t("Not removed","developer_apps")()};$("#owners_div").on("click",'[data-action="collaborator_remove"]',function(L){var W=$(L.target),y=W.data("id"),U=f[y],T=TS.boot_data.user_id===y,R;T?R=TS.interop.i18n.t("<b>Do you want to leave {app_name}?</b><br/>You will no longer be able to view or edit this app.","developer_apps")({app_name:TS.interop.i18n.safeString(_.escape(TS.boot_data.app_name))}):R=TS.interop.i18n.t("<b>Remove {username} as a Collaborator?</b><br/>They will no longer be able to view or edit this app.","developer_apps")({username:TS.interop.i18n.safeString(_.escape(U.name))}),TS.generic_dialog.start({body:R,dialog_class:"inherit_width",go_button_class:"btn_danger",go_button_text:T?x.leave:x.remove,onGo:function(){W.css("visibility","hidden");var P=TS.interop.api.call("developer.apps.owners.remove",{user_id:y,app_id:TS.boot_data.app_id}).then(function(){T?window.location.href="/apps":(delete f[y],b(),setTimeout(function(){h(y)},1e3))}).catch(function(z){throw setTimeout(function(){W.css("visibility","")},3e3),z}),B=$(`#collaborators_tbody .collaborator_row[data-id="${y}"] #saver_hook`);TS.ui.inline_saver.show({target:B,promise:P,custom_text:{saving:T?x.saving_removing_self:x.saving,saved:T?x.saved_removing_self:x.saved,failed:T?x.failed_removing_self:x.failed}})}})})},"_initRemoveCollaboratorButtons"),r=e(function(x){return{lfs_id:x.id,id:x.id,image:x.profile.image_24,name:x.real_name?x.real_name:x.name}},"_getCollaboratorData"),h=e(function(x){var L=$(`#collaborators_tbody .collaborator_row[data-id="${x}"]`).parent().parent();L.fadeOut(500,function(){$(this).remove(),S()})},"_removeRow"),b=e(function(){l()&&!n.lazyFilterSelect("disabled")?(n.lazyFilterSelect("updatePlaceholder",w()),setTimeout(function(){n.lazyFilterSelect("disable")},1)):!l()&&n.lazyFilterSelect("disabled")&&(n.lazyFilterSelect("updatePlaceholder",E()),setTimeout(function(){n.lazyFilterSelect("enable")},1))},"_updateLazyFilterSelectData"),S=e(function(){var x=$(`button[data-id=${TS.boot_data.user_id}]`),L=$("#disable_leave_tooltip");$("#collaborators_tbody .collaborator_row").length===1?(x.toggleClass("disabled",!0),L.toggleClass("hidden",!1)):(x.toggleClass("disabled",!1),L.toggleClass("hidden",!0))},"_updateOnlyCollaboratorLeaveButton")})()},5749927766:()=>{(function(){TS.registerModule("developer_apps.copy_button",{onStart:function(){var n=$("[data-copy-field]");n.on("click",function(){var f=$(this),s=$(`#${f.data("copyField")}`),E;s.is("input")||s.is("textarea")?E=s.val():E=s.text(),TS.clipboard.writeText(E)})}})})()},3904330330:()=>{(function(){TS.registerModule("developer_apps.credentials",{onStart:function(){n()}});var n=e(function(){$(".change_secret").click(function(f){f.preventDefault();var s=$(this).attr("data-client-id");TS.generic_dialog.start({body:TS.interop.i18n.t("This will not invalidate existing tokens. Are you sure?","developer_apps")(),go_button_text:TS.interop.i18n.t("Yes, I\u2019m sure","developer_apps")(),cancel_button_text:TS.interop.i18n.t("No, go back","developer_apps")(),onGo:function(){$(`#change_secret_form_${s}`).submit()}})}),$(".change_signing_secret").click(function(f){f.preventDefault();var s=$(this).attr("data-client-id");TS.generic_dialog.start({body:TS.interop.i18n.t("This will invalidate your existing secret. Are you sure?","developer_apps")(),go_button_text:TS.interop.i18n.t("Yes, I\u2019m sure","developer_apps")(),cancel_button_text:TS.interop.i18n.t("No, go back","developer_apps")(),onGo:function(){$(`#change_signing_secret_form_${s}`).submit()}})}),$(".reveal_password").click(function(f){f.preventDefault();var s=$(f.target),E=s.attr("for"),w=$(`#${E}`);if(w.length){var u=w.data("password"),k=w.attr("class"),C=`<input type="text" readonly class="${k}" id="${E}" data-password="${u}" value="${u}">`;w.replaceWith(C),$(`#${E}`).select().focus(),s.attr("disabled",!0)}})},"_bindUI")})()},8182707451:()=>{(function(){TS.registerModule("developer_apps.event_subscriptions",{onStart:function(){TS.boot_data.active_section==="event-subscriptions"&&(d(),S(),x(),TS.developer_apps.request_url_verification.completed_sig.add(z),$('[data-js="alert_no_url"]')&&TS.developer_apps.request_url_verification.completed_sig.add(function(){$('[data-js="alert_no_url"]').addClass("hidden")}),C=_.isEmpty(TS.boot_data.selected_scopes)?[]:Object.keys(TS.boot_data.selected_scopes),t=_.isEmpty(TS.boot_data.selected_bot_scopes)?[]:Object.keys(TS.boot_data.selected_bot_scopes),L(),TS.ui.validation.register("isunfurldomain",le),p=_.get(TS.boot_data,"app_to_edit.payload.unfurl_domains")||[],V())}});var n="",f="",s="",E,w,u={},k,C,t,o,p=[],l=5,d=e(function(){k=$('[data-js="event_subscriptions_toggle_container"] .ts_toggle'),u=r(),v()&&(TS.boot_data.event_subscriptions.is_active&&k.addClass("checked"),$(".event_subscriptions_section_add").removeClass("hidden")),b("team",u.team),b("bot",u.bot),w=k.hasClass("checked"),$(".toggle_loading_spinner").addClass("hidden"),$('[data-js="event_subscriptions_toggle_container"]').removeClass("hidden")},"_checkForEventSubscriptions"),v=e(function(){return _.some(u.bot)||_.some(u.team)},"_hasSomeSubscriptions"),r=e(function(){var c=TS.boot_data.event_subscriptions.subscribed_to;_.isUndefined(c)&&(c={});var I=["team","bot"];return _.forEach(I,function(O){c[O]?c[O]=_.mapValues(c[O],function(N){return _.extend(N,{current:!0})}):c[O]={}}),c},"_prepareEventsObject"),h=e(function(c){const I=_.filter(TS.boot_data.app_actions,_e=>_e.type===4),O=!_.isEmpty(I);c.workflow_step_execute&&O&&(c.workflow_step_execute.has_constraint=!0),c.function_executed&&(c.function_executed.has_constraint=!0);const te=_.get(TS.boot_data,"app_to_edit.payload.unfurl_domains")||[],oe=!_.isEmpty(te);return c.link_shared&&oe&&(c.link_shared.has_constraint=!0),c},"_checkForEventConstraints"),b=e(function(c,I){I=I||null;var O={type:c,should_show_scopes:c!=="bot"||TS.boot_data.is_granular_bot_app};I=h(I),I&&(O.events=I),$(`.${c}_events_table_container`).replaceWith(TS.templates.developer_apps_event_table(O))},"_renderTable"),S=e(function(){TS.boot_data.event_subscriptions.url_verified?($('[data-js="request_url_verification_container"]').attr("data-status","verified"),f="verified"):($('[data-js="request_url_verification_container"]').attr("data-status","unverified"),f="unverified"),$('[data-js="request_url_verification_container"]').attr("data-url",TS.boot_data.event_subscriptions.url),s=TS.boot_data.event_subscriptions.url},"_checkForVerifiedURL"),x=e(function(){E=s.indexOf("https:")>-1},"_setIsRequestUrlIsHttps"),L=e(function(){$("#page_contents").on("click",function(c){var I=$("div.lazy_filter_select");!$(c.target).hasClass("lfs_input")&&!$(c.target).hasClass("lfs_item")&&!$(c.target).hasClass("lfs_input_container")&&!$(c.target).hasClass("add_event_btn")&&I.length&&$(".lazy_filter_select").addClass("hidden"),z()}),$("div[data-events-section]").on("click",".delete_event",function(){ne($(this))}).on("click",".remove_event",function(){j($(this))}),$(".btn").on("click",function(){U($(this))}),k.on("click",function(){k.toggleClass("checked"),x(),R()}),y(),W()},"_bindUI"),W=e(function(){$(".event_subscriptions_section_add").on("click",".section_rollup",function(c){var I=$(c.target),O=$(this);I.closest(".section_rollup_header").length?O.toggleClass("is_active"):O.hasClass("is_active")||O.toggleClass("is_active")})},"_bindSectionRollups"),y=e(function(){o=new TS.developer_apps.SaveBar({$save_button:$(".save_changes_button"),$cancel_button:$(".cancel_changes_button"),initial_data:{latest_edit:null},onSaveHook:Z})},"_bindSaveBar"),U=e(function(c){c[0].id==="add_team_event_btn"&&(T("team"),$("#team_events_table").hasClass("hidden")&&$("#team_events_table").removeClass("hidden"),$(".team_events .lfs_input").focus(),n="team"),c[0].id==="add_bot_event_btn"&&(T("bot"),$("#bot_events_table").hasClass("hidden")&&$("#bot_events_table").removeClass("hidden"),$(".bot_events .lfs_input").focus(),n="bot"),c[0].id==="save_event_subscriptions"&&Z(),c[0].id==="disable_subscriptions"&&P()},"_onButtonClick"),T=e(function(c){var I=$(`[data-events-section="${c}"] > div.lazy_filter_select`);I.length?I.toggleClass("hidden"):$(`.${c}_event_lazy_filter_select`).lazyFilterSelect({placeholder_text:TS.interop.i18n.t("Find and add an event","developer_apps")(),tokenClass:function(){return"hidden"},onItemAdded:function(O){g($(O),n),z()}})},"_displayFilterSelectMenu"),R=e(function(){var c=k.hasClass("checked"),I=$('[data-js="request_url_verification_container"]').data("status"),O=X();if(TS.boot_data.app_is_distributed&&!c&&s&&!E){$(".verification_dialogue_container").remove(),TS.ui.validation.showWarning($('input[data-js="first-url-field"]'),TS.interop.i18n.t("Please use https (for security).","developer_apps")(),{}),k.removeClass("checked");return}c&&(I==="verified"||re())?P():c&&O?k.removeClass("checked"):I==="verified"||v()&&re()?B():($(".event_subscriptions_section_add").toggleClass("hidden",c),k.toggleClass("checked",!c)),z()},"_onClickToggleEventSubscriptions"),P=e(function(){var c={title:TS.interop.i18n.t("Are you sure you want to disable events?","developer_apps")()};TS.generic_dialog.start({title:c.title,modal_class:"fs_modal_footer slack_command_dialog",body:`<p>${TS.interop.i18n.t("We'll stop sending events to your request URL as soon as you tap <strong>Disable</strong>. Please be sure you're ready to stop receiving them before continuing.","developer_apps")()}</p>`,go_button_text:TS.interop.i18n.t("Disable","developer_apps")(),onGo:function(){var I=ee();D(M(I.events,!1)),k.removeClass("checked")}})},"_disableSubscriptionsModal"),B=e(function(){var c={title:TS.interop.i18n.t("Ready to enable events?","developer_apps")()};TS.generic_dialog.start({title:c.title,modal_class:"fs_modal_footer slack_command_dialog",body:`<p>${TS.interop.i18n.t("We'll begin sending events to your request URL as soon as you tap <strong>Enable</strong>. Please be sure you're ready to receive them before continuing.","developer_apps")()}</p>`,go_button_text:TS.interop.i18n.t("Enable","developer_apps")(),onGo:function(){var I=ee();D(M(I.events,!0)),k.addClass("checked")}})},"_confirmEnablingEvents"),z=e(function(){var c=G(),I=X(),O=$('[data-js="request_url_verification_container"]').data("status");if(I&&$("#save_events_hint").text("").addClass("hidden"),c&&(O==="verified"||re())){K();return}if(O!=f&&O==="verified"&&I){K();return}if(O!=f){$("#save_events_hint").removeClass("hidden"),$("#save_event_subscriptions").prop("disabled",!0);return}if($("input.new_request_url").length&&s!=$("input.request_url").val()){K();return}if(k.hasClass("checked")!=w&&I){if(O==="verified"||re())return;K();return}$("#save_event_subscriptions").prop("disabled")||$("#save_event_subscriptions").prop("disabled",!0)},"_onChangeActivateSaveButton"),K=e(function(){o.updateData({latest_edit:Date.now()})},"_enableSaveButton"),G=e(function(){var c=Y("team","pending"),I=Y("bot","pending"),O=Y("team","current",!0),N=Y("bot","current",!0);return c.length||I.length||O.length||N.length},"_checkForSubscriptionUpdates"),X=e(function(){var c=Y("team","current"),I=Y("bot","current");return c.length||I.length},"_checkForCurrentSubscriptions"),Z=e(function(){var c=ee();return D(M(c.events))},"_sendEventSubscriptions"),ee=e(function(){var c=[];c.team=_.concat(Y("team","current"),Y("team","pending")),c.bot=_.concat(Y("bot","current"),Y("bot","pending"));var I={events:c};return I},"_createFullSubscriptionsList"),Y=e(function(c,I,O){O=O||!1;var N=$(`.${c}_events_section`).find(`.${I}_event_subscription_name[data-is-pending-removal="${O}"]`);return ie(N)},"_getSubscriptions"),ie=e(function(c){for(var I=[],O=0;O<c.length;O+=1){var N=F(c[O].innerHTML);I.push(N)}return I},"_getEventsChosen"),ne=e(function(c){var I=c.closest("tr"),O=I.data("event-type"),N=I.data("table"),J=I.find(".delete_event"),te=J.hasClass("ts_icon_trash"),oe=_.find(u[N],function(_e,de){return de.startsWith(O)});_.extend(oe,{pending_removal:te}),u[N][O]=oe,b(N,u[N])},"_onClickToggleTaggedSubscriptionForRemoval"),se=e(function(){a("team"),a("bot"),q("team"),q("bot"),w=k.hasClass("checked"),A(),b("team",u.team),b("bot",u.bot),V(),_.forEach(u.team,function(c){c.scope&&c.scope.length>0&&Array.prototype.push.apply(C,c.scope.split(" or "))}),TS.boot_data.is_granular_bot_app&&_.forEach(u.bot,function(c){c.scope&&c.scope.length>0&&Array.prototype.push.apply(t,c.scope.split(" or "))}),TS.developer_apps.updateReinstallBanner(_.uniq(C),p,_.uniq(t))},"_onSuccessUpdateDOM"),a=e(function(c){u[c]&&_.forEach(u[c],function(I,O){if(I.pending_removal){delete u[c][O],m(c,O,I);return}I.current||(I.current=!0)})},"_updateCurrentEventSubscriptions"),m=e(function(c,I,O){var N=$(`.${c}_event_lazy_filter_select`);if(_.get(TS.boot_data.event_subscriptions,`remaining.${c}.${O.scope}.${I}`)){ae(N,I);return}var J=$(`<option value="${I}" data-event-type="${O.type}" data-scope="${O.scope}" data-additional-search-field="${O.description}">${I}</option>`),te=N.find(`[data-scope="${O.scope}"]:first`);if(te.length){te.before(J);return}if(c==="bot"){N.prepend(J);return}var oe=$(`<optgroup label="${O.scope?O.scope:"No scope required"}">`);oe.prepend(J),N.prepend(oe)},"_updateLazyFilterSelectAfterRemoval"),A=e(function(){if($('[data-js="request_url_verification_container"]').data("status")==="verified"){var c={url:$("input.request_url").val(),status:"verified",verified:!0};TS.developer_apps.request_url_verification.renderNewState(c),s=$("input.request_url").val(),f="verified"}},"_renderVerifiedURLState"),q=e(function(c){var I=$(`.${c}_events_section > div.lazy_filter_select`);I.length&&$(`.${c}_event_lazy_filter_select`).lazyFilterSelect("destroy")},"_destroyFilterSelectMenu"),j=e(function(c){z();var I=c.closest("tr"),O=I.data("event-type"),N=I.data("table");delete u[N][O],ae($(`.${N}_event_lazy_filter_select`),O),q(N),b(N,u[N])},"_onClickRemovePendingSubscription"),ae=e(function(c,I){c.val(function(O,N){return _.without(N,I)})},"_removeSelectedValueFromLazyFilterSelect"),g=e(function(c,I){var O=c.text(),N=c.data("additional-search-field"),J=c.data("scope");u[I][O]={description:N,scope:J,current:!1},b(I,u[I])},"_onEventSelect"),M=e(function(c,I){_.isUndefined(I)&&(I=k.hasClass("checked"));var O=$("input.request_url").val(),N={app:TS.boot_data.app_to_edit.encoded_id,url:O,app_event_types:JSON.stringify(c.team),bot_event_types:JSON.stringify(c.bot),enable:I,unfurl_domains:JSON.stringify(p.map(J=>J.replace(/http:\/\/|https:\/\//g,"")))};return N},"_prepareJSON"),D=e(function(c){return _.extend(c,H()),TS.developer_apps.handleAPICall({method:"developer.apps.events.subscriptions.updateSubs",data:c,error_alert_selector:"#event_subscription_error_alert"}).then(function(){se(),Ladda.stopAll(),TS.developer_apps.showSuccessBanner(),z()})},"_handleAPICall"),F=e(function(c){var I=c.replace(/\r?\n|\r/g,"").trim();return I},"_cleanUpSelection"),H=e(function(){var c={filter_teams:JSON.stringify([])};return c},"_addFilterTeams"),V=e(function(){var c=$("[data-url-table-editor]"),I=p.map(function(J){return{url:J,state:"read"}}),O=new Handlebars.SafeString(TS.interop.i18n.t("You'll receive events for any subdomain, or path of the selected domains or hosts. Ports are ignored, so requests on any port will trigger an event. Using IP addresses is not allowed. <a href='/docs/message-link-unfurling#slack_app_unfurling'>Learn more.</a>","developer_apps")()),N={start_in_create_mode:!1,title:"",add_button_text:TS.interop.i18n.t("Add Domain","developer_apps")(),save_button_text:TS.interop.i18n.t("Done","developer_apps")(),show_unload_warning:!1,validation:"isunique required isunfurldomain",footer:O,onUpdate:function(J){var te=_.chain(J).filter({state:"read"}).map(function(de){return de.url.replace(/http:\/\/|https:\/\//g,"")}).value();if(TS.boot_data.app_to_edit.is_granular_bot_app){if(!u.bot.hasOwnProperty("link_shared")&&te.length>p.length){var oe=$('[data-events-section="bot"]').find('[data-event-type="link_shared"]');g(oe,"bot")}}else if(!u.team.hasOwnProperty("link_shared")&&te.length>p.length){var _e=$('[data-events-section="team"]').find('[data-event-type="link_shared"]');g(_e,"team")}_.isEqual(te,p)||(K(),p=te),Q()}};new TS.developer_apps.UrlTableEditor(c,I,!1,N),Q()},"_renderURLTableEditor"),Q=e(function(){var c=p.length>=l;$('[data-js-url-editor="create"]').attr("disabled",c),$('[data-js-url-editor="restore"]').attr("disabled",c)},"_disableAddingDomainsIfOverLimit"),le=e(function(c,I){var O=c.val().replace(/http:\/\/|https:\/\//g,""),N={domain:O,app:TS.boot_data.app_to_edit.encoded_id},J=$('[data-js-url-editor="save-update"], [data-js-url-editor="save-create"]'),te=TS.interop.i18n.t("Sorry, this is not a valid domain.","developer_apps")(),oe=TS.interop.i18n.t("Validating...","developer_apps")(),_e=TS.interop.api.call("unfurl.external.validateDomain",N).then(function(){if(O!==N.domain)return c.blur().focus();TS.ui.validation.showSuccess(c,null,I),J.toggleClass("disabled",!1).prop("disabled",!1)}).catch(function(de){if(O!==N.domain)return c.blur().focus();TS.ui.validation.showWarning(c,de.data.error_text||te,I),J.toggleClass("disabled",!0).prop("disabled",!0)});TS.ui.validation.showCustomValidation(c,oe,I),TS.ui.inline_saver.show({target:$(`[for="${c.attr("name")}"]`).find(".validation_message"),promise:_e,hide_text:!0})},"_unfurlExternalValidateDomain"),re=e(function(){return!!TS.boot_data.app_to_edit.link_enabled},"_isSocketModeEnabled")})()},6108600565:()=>{(function(){TS.registerModule("developer_apps.general_info",{onStart:function(){TS.boot_data.active_section==="general"&&w()}});var n=3,f=4e3,s=175,E=4e3,w=e(function(){o(),$("#delete_app_button").on("click",ae),u(),k(),C(),t(),Z(),q(),j(),d(),v()},"_bindUI"),u=e(function(){var g=TS.interop.i18n.t("Thanks! You\u2019ve selected the maximum number of categories ({max_selected_categories})","developer_apps")({max_selected_categories:n});$("[name='categories_selected[]']").lazyFilterSelect({max_selected_items:n,onMaxItemsSelected:function(){TS.ui.validation.showSuccess($("[name='edit_categories']"),g,{},f)},placeholder_text:TS.interop.i18n.t("Select a category","developer_apps")()})},"_bindCategoriesSelect"),k=e(function(){$("[name='supported_languages[]']").lazyFilterSelect({placeholder_text:TS.interop.i18n.t("Select the languages your app supports","developer_apps")()})},"_bindSupportedLanguagesSelect"),C=e(function(){var g=$("[name='pricing_info']");if(g.lazyFilterSelect({placeholder_text:TS.interop.i18n.t("Select the pricing model for your app","developer_apps")(),no_default_selection:!0}),g&&g.data("originalvalue")&&g.data("originalvalue").length>0){var M=!0;g.lazyFilterSelect("setValue",g.data("originalvalue"),M)}},"_bindPricingSelect"),t=e(function(){$(".install_url_selection").map(function(g,M){return $(M).on("click",function(){var D=$(M).data().linkName,F=$(`input[data-link-name="${D}"]`);F.prop("checked",!0),F.trigger("change"),TS.ui.validation.validate($('input[name="direct_install_url"]'))})})},"_bindInstallRadioButtons"),o=e(function(){$(".section_rollup").on("click",function(g){var M=$(g.target),D=$(this);M.closest(".section_rollup_header").length?D.toggleClass("is_active"):D.hasClass("is_active")||D.toggleClass("is_active")})},"_bindWelcomeCard"),p=6,l=/image/,d=e(function(){TS.ui.drop_zone.file_received_sig.add(function(M){S(M.files)}),TS.ui.drop_zone.file_removed_sig.add(function(M){z(M.file)}),TS.ui.drop_zone.start({inline:!0,restrict_file_type_regexp:l,on_invalid_file_type_handler:T,max_attachments:p,allow_multi_upload:!0});var g=TS.boot_data.app_to_edit.directory_payload.screenshots||[];TS.ui.drop_zone.updateAttachmentCount(g.length),G(g,!1),X(!0)},"_bindScreenshotUploadUI");const v=e(()=>{TS.ui.validation.register("app_long_description",(g,M)=>{const D=TS.interop.utility.getStringLength(g.val()||"");return D?D<s?(TS.ui.validation.showError(g,TS.interop.i18n.t("This field can\u2019t be less than {minlength, plural, =1{# character}other{# characters}}","ui_validation")({minlength:s}),M),!1):D>E?(TS.ui.validation.showError(g,TS.interop.i18n.t("This field can\u2019t be more than {maxlength, plural, =1{# character}other{# characters}}","ui_validation")({maxlength:E}),M),!1):!0:(M.success_message="",!0)})},"_bindLongDescriptionValidation");var r,h=0,b=[],S=e(function(g){b=[],r=g.length,TS.ui.drop_zone.updateProgress(!1);for(var M=0;M<g.length;M+=1)y(g[M])},"_handleScreenshotsUpload"),x=1600,L=1e3,W=2e6,y=e(function(g){if(g.size>W){R("error",TS.interop.i18n.t("Images must be smaller than 2MB.","developer_apps")()),TS.ui.drop_zone.resetUI();return}var M=new FileReader;M.addEventListener("load",function(){var D=new Image;D.addEventListener("load",function(){D.width===x&&D.height===L?(b.push(g),b.length===r&&U()):(R("error",TS.interop.i18n.t("Images must be exactly 1600px by 1000px, please!","developer_apps")()),TS.ui.drop_zone.resetUI(),b=[])}),D.src=M.result}),M.readAsDataURL(g)},"_processScreenshot"),U=e(function(){R("progress",TS.interop.i18n.t("Uploading 1/{total_screenshots}...","developer_apps")({total_screenshots:b.length})),b.forEach(function(g){const M=e(function(D,F){D?P(F.profile):B()},"apiResponseHandler");TS.interop.api.call("developer.apps.screenshots.upload",{app:TS.boot_data.app_to_edit.encoded_id,image:g}).then(function(D){let{data:F,args:H,request_id:V}=D;var Q=!0;return M(Q,F,H,V),{data:F,args:H,request_id:V}}).catch(function(D){let{data:F,args:H,request_id:V}=D;var Q=!1;return M(Q,F,H,V),{data:F,args:H,request_id:V}})})},"_uploadScreenshots"),T=e(function(){R("error",TS.interop.i18n.t("One or more of your files doesn\u2019t seem to be an image. Try again?","developer_apps")())},"_invalidScreenshotFileType"),R=e(function(g,M){switch(g){case"error":case"warning":$(".screenshots_section_label span").attr("class",g).text(M);break;case"progress":$(".screenshots_section_label span").text(""),$(".drop_zone_overlay_text_inline").text(M);break;default:break}},"_updateScreenshotsStatus"),P=e(function(g){h+=1,TS.ui.drop_zone.updateAttachmentCount(),G([g],!0),X(!0),h===r?(TS.ui.drop_zone.resetUI(),h=0,TS.developer_apps.showSuccessBanner()):R("progress",TS.interop.i18n.t("Uploading {screenshot_idx}/{total_screenshots}...","developer_apps")({screenshot_idx:h+1,total_screenshots:b.length}))},"_handleScreenshotsUploadSuccess"),B=e(function(){h+=1,h===r?(TS.ui.drop_zone.resetUI(),R("warning",TS.interop.i18n.t("One or more of your images didn\u2019t save. Try again?","developer_apps")()),h=0):R("progress",TS.interop.i18n.t("Uploading {screenshot_idx}/{total_screenshots}...","developer_apps")({screenshot_idx:h+1,total_screenshots:b.length}))},"_handleScreenshotsUploadError"),z=e(function(g){g.preventDefault();var M=$(g.target.closest(".screenshot_preview")).data("screenshot_id"),D=$(`[data-screenshot_id=${M}]`);D.hide(),K(),TS.interop.api.call("developer.apps.screenshots.delete",{app:TS.boot_data.app_to_edit.encoded_id,screenshot_id:M}).catch(function(F){TS.error(F),D.show(),K(),TS.ui.drop_zone.resetUI()}).then(function(){D.remove(),X(!0),TS.ui.drop_zone.updateAttachmentCount($(".screenshot_preview").length)})},"_handleScreenshotRemove"),K=e(function(){var g=$(".screenshots_drop_zone"),M=p-$(".screenshot_preview:visible").length;M>0?($(".screenshots_drop_zone_message").text(TS.interop.i18n.t("Drag and drop up to {num_screenshots_remaining, plural, =1 {# more image} other {# more images}} here or...","developer_apps")({num_screenshots_remaining:M})),g.show()):g.hide()},"_updateDropZoneMessage"),G=e(function(g,M){var D=$(".app_screenshots_preview");M||D.empty();for(var F=0;F<g.length;F+=1){var H=$(TS.templates.developer_apps_sortable_screenshot({screenshot_id:g[F].id,screenshot_url:g[F].image_440}));H.appendTo(D),H.find(".remove_screenshot").on("click",z)}D.sortable(),D.on("sortupdate",function(V){V.stopPropagation(),X()}),K()},"_updateScreenshotsPreview"),X=e(function(g){for(var M=$(".app_screenshots_preview").children(),D=$(".screenshots_order"),F=[],H=0;H<M.length;H+=1)F.push($(M[H]).data("screenshot_id"));D.val(JSON.stringify(F)),g||D.trigger("change")},"_updateScreenshotOrder"),Z=e(function(){var g=$(".fixed_position_footer"),M=$(".save_changes_button"),D=$(".cancel_changes_button"),F=$(".save_bar_field, #notification_channel"),H=new TS.developer_apps.SaveBar({$save_bar:g,$save_button:M,$cancel_button:D,initial_data:ee(),onSaveHook:ne});F.on("change",function(V){var Q=$(V.target),le=Q.attr("name");switch(le){case"categories_selected[]":$('[name="edit_categories"]').val("1");break;case"supported_languages[]":$('[name="edit_supported_languages"]').val("1");break;case"pricing_info":$('[name="edit_pricing_info"]').val("1");break;case"developer_name":case"developer_email":case"developer_phone_number":case"notification_channel":$('[name="contact_info"]').val("1");break;default:break}H.updateData(ee())})},"_bindSaveBar"),ee=e(function(){return _.merge(TS.developer_apps.serializeFormDataToObject("#display_info_form"),TS.developer_apps.serializeFormDataToObject("#developer_contact_info_form"))},"_fetchCurrentAppInfoFormData"),Y=e(function(){var g=TS.ui.validation.validate($("#display_info_form"),{verbose:!0}),M=$("#developer_contact_info_form");return M.length?_.merge(g,TS.ui.validation.validate(M,{verbose:!0})):g},"_validateAppInfoForms"),ie="#2C2D30",ne=e(function(){$(".alert_error").toggleClass("hidden",!0);var g=ee();g.app_card_color||(g.app_card_color=ie);var M=se();if(_.isEmpty(M))return TS.developer_apps.handleFormPost({form_selector:"#display_info_form",data:g,error_alert_selector:"#display_info_error_alert"});var D=M.siblings("label");return D.length||(D=M),$("html, body").animate({scrollTop:D.offset().top-110},{complete:function(){D.focus()}}),Promise.reject(new Error("Fields validation failed"))},"_onSaveAppInfoForms"),se=e(function(){var g=Y(),M;for(var D in g)if(!g[D]){M=$(`[name="${D}"]`);break}return M},"_getFirstInvalidField"),a=/^https:\/\/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)(?:[\w\-_]+)$/,m=/youtu(?:be\.com\/watch\?v=|\.be\/)(?:[\w\-_]+)$/,A=/(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)(?:[\w\-_]+)/,q=e(function(){TS.ui.validation.register("youtube_url",function(g,M){var D=g.val();if(!D||D.match(a))return!0;var F;D.match(m)&&D.indexOf("https")!==0?F=TS.interop.i18n.t("Please use https (for security).","developer_apps")():D.match(A)?F=TS.interop.i18n.t("Please strip any extra URL parameters.","developer_apps")():F=TS.interop.i18n.t("This doesn\u2019t seem like a proper youtube link. Sorry!","developer_apps")(),TS.ui.validation.showWarning(g,F,M)})},"_bindYoutubeUrlVerification"),j=e(function(){TS.ui.validation.register("direct_install",function(g,M){M.success_message="";var D=$('input[data-link-name="direct_install"]'),F=$('input[name="direct_install_url"]');if(D.prop("checked")&&F.val()===""){var H=TS.interop.i18n.t("Please provide a direct install link.","developer_apps")();TS.ui.validation.showWarning(g,H,M)}else return TS.ui.validation.showSuccess(g,"success",M),!0})},"_bindDirectInstallValidation"),ae=e(function(){var g;TS.boot_data.num_teams>0?g=TS.interop.i18n.t("You are deleting this application from {team_count, plural, =1 {# workspace} other {# workspaces}}","developer_apps")({team_count:TS.boot_data.num_teams}):g=TS.interop.i18n.t("Your application is not installed on any workspaces","developer_apps")(),TS.generic_dialog.start({title:g,body:TS.interop.i18n.t("Deleting this application cannot be undone. All existing tokens 			will become invalid. Are you sure you want to delete it?","developer_apps")(),go_button_text:TS.interop.i18n.t("Yes, I\u2019m sure","developer_apps")(),cancel_button_text:TS.interop.i18n.t("No, go back","developer_apps")(),onGo:function(){$("#delete_application_form").submit()}})},"_confirmDeleteApp")})()},3488427269:()=>{(function(){TS.registerModule("developer_apps.incoming_webhooks",{onStart:function(){TS.boot_data.active_section==="incoming-webhooks"&&(n=_.isEmpty(TS.boot_data.selected_scopes)?{}:_.cloneDeep(TS.boot_data.selected_scopes),f=_.isEmpty(TS.boot_data.selected_bot_scopes)?{}:_.cloneDeep(TS.boot_data.selected_bot_scopes),E=TS.boot_data.current_submission,u=TS.boot_data.webhooks.length,s=TS.boot_data.is_granular_bot_app,C=$("#incoming_webhooks_table"),k=$('[data-js="webhooks_toggle"]'),t=$("#incoming_webhooks_deactivate_text"),o=$("#incoming_webhooks_new_button"),p=$("#incoming_webhooks_deactivated_banner"),l=$("#incoming_webhooks_empty_text"),d(),k.parent().add(".toggle_loading_spinner").toggleClass("hidden"))},test:function(){var b={_selected_scopes:n,_onActivateWebhooks:v,_onDeactivateWebhooks:r,_updateScopes:h};return Object.defineProperty(b,"_selected_scopes",{get:function(){return n},set:function(S){n=S}}),Object.defineProperty(b,"_updateScopes",{get:function(){return h},set:function(S){h=S}}),b}});var n,f,s,E,w,u,k,C,t,o,p,l,d=e(function(){k.change(function(b){var S=b.target.checked;S?v():r()}),C.on("click",'[data-js="remove-webhook"]',function(b){TS.generic_dialog.start({body:TS.interop.i18n.t("Are you sure you want to remove this incoming webhook?","developer_apps")(),go_button_class:"btn_danger",go_button_text:TS.interop.i18n.t("Remove","developer_apps")(),onGo:function(){var S=$(b.target),x=S.parent(),L=x.closest("tr"),W=x.find('[data-js="remove-webhook-spinner"]').add(S);W.toggleClass("hidden"),TS.developer_apps.handleFormPost({form_selector:x,error_alert_selector:"#incoming_webhooks_error_alert"}).then(function(){L.remove(),u-=1,u||l.toggleClass("hidden",!1)}).catch(function(){W.toggleClass("hidden")})}})})},"_bindUI"),v=e(function(){s?f["incoming-webhook"]={notes:""}:n["incoming-webhook"]={notes:""},w=!0,h()},"_onActivateWebhooks"),r=e(function(){s?delete f["incoming-webhook"]:delete n["incoming-webhook"],w=!1,h()},"_onDeactivateWebhooks"),h=e(function(){var b,S;_.isEmpty(E)?(b={token:TS.boot_data.api_token,id:TS.boot_data.encoded_app_id,scope:Object.keys(n),scope_bot:Object.keys(f)},S="developer.apps.scope.update"):(b={id:E.id},s?b.payload=JSON.stringify({dev_bot_scopes_requested_payload:f}):b.payload=JSON.stringify({dev_scopes_requested_payload:n}),S="developer.appdirectory.submissions.update"),TS.developer_apps.handleAPICall({method:S,data:b,error_alert_selector:"#incoming_webhooks_error_alert"}).then(function(){p.toggleClass("hidden",w),t.toggleClass("hidden",!w);var x=o.data("persistDisabled");o.toggleClass("btn_outline",w&&!x).toggleClass("disabled",!w||x),C.toggleClass("hidden",!w&&!u),TS.developer_apps.updateReinstallBanner(Object.keys(n),[],Object.keys(f))})},"_updateScopes")})()},9346465533:()=>{(function(){TS.registerModule("developer_apps.interactive_messages",{onStart:function(){TS.boot_data.active_section==="interactive-messages"&&(k=!!_.get(TS.boot_data,"app_to_edit.payload.actions.url"),C())}});var n=!1,f,s,E,w,u,k,C=e(function(){f=$("#attachment_actions form"),t(),o()},"_bindUI"),t=e(function(){s=$('[data-js="actions_toggle"]'),E=$(".toggle_loading_spinner"),L(),s.change(function(T){var R=T.target.checked;R?b(T):S(T)}),TS.boot_data.app_to_edit.link_enabled&&$("#attachment_action_section_add").removeClass("hidden")},"_bindActionToggle"),o=e(function(){w=new TS.developer_apps.SaveBar({$save_button:$(".save_changes_button"),$cancel_button:$(".cancel_changes_button"),initial_data:l(),onSaveHook:v,validate:d}),TS.redux.getStoreInstance().subscribe(()=>{var T=TS.redux.getState(),R=TS.boot_data.app_to_edit.encoded_id,P=TS.interop.redux.models.developerActions.selectUnsaved(T,R);P&&w.updateData(p())}),f.find('input[type="text"]').keyup(_.debounce(function(){w.updateData(l())},500))},"_bindSaveBar"),p=e(function(){return u=Date.now(),l()},"_stateForReduxChange"),l=e(function(){return{actionUrl:f.find("input[name=attachment_action_url]").val(),suggestionUrl:f.find("input[name=attachment_suggestion_url]").val(),actionTimeStamp:u}},"_stateForFormChange"),d=e(function(){return TS.ui.validation.validate(f)?($('[data-js="alert_no_url"]').addClass("hidden"),!0):(U(),!1)},"_validateForm"),v=e(function(){const T=TS.interop.redux.models.developerActions.saveAppConfig({appId:TS.boot_data.app_to_edit.encoded_id,actionUrl:f.find("input[name=attachment_action_url]").val(),suggestionUrl:f.find("input[name=attachment_suggestion_url]").val()});return TS.redux.dispatch(T).then(function(R){R.ok?(TS.developer_apps.showSuccessBanner(),y()):TS.utility.rAF(U)}).catch(r)},"_saveConfig"),r=e(function(T){var R=_.includes(T.method,"suggestions")?"suggestion":"action";switch(T.data.error){case"connection_failed":h(TS.interop.i18n.t("Rats, we couldn't make an HTTP request to that URL.","includes_developer_apps")(),R);break;case"ssl_verification_failed":h(TS.interop.i18n.t("Rats, we couldn't create a secure connection to that URL.","includes_developer_apps")(),R);break;case"tls_certificate_not_trusted":h(TS.interop.i18n.t("Rats, we couldn't verify the SSL certificate for that URL.","includes_developer_apps")(),R);break;default:h(TS.developer_apps.getErrorMessage(T.data.error),R);break}U()},"_handleUrlValidationError"),h=e(function(T,R){W(T,R),n=!0},"_handleApiError"),b=e(function(T){T.preventDefault(),$("#attachment_action_section_add").removeClass("hidden")},"_onClickAdd"),S=e(function(T){T.preventDefault(),TS.generic_dialog.start({body:TS.interop.i18n.t("Any interactive messages your app sends will show error messages to your 			users, including messages that you have already sent. Any shortcuts you have created will be 			removed from Slack's UI.<br><br> 			If you no longer want to use interactive components, please remove any messages using them 			from your app.","includes_developer_apps","2c1070006b5d2b92455aa74c3b322aea55887d48")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"btn_danger ladda-button",go_button_text:TS.interop.i18n.t("Remove","includes_developer_apps","9a7d4e0687b14e2b7cda406900b802782cd50a62")(),onCancel:function(){s.prop("checked",!0),s.siblings(".ts_toggle").addClass("checked")},onGo:function(){n=!1,x(),$("#attachment_action_section_add").addClass("hidden");var R=Promise.resolve();const P=TS.interop.redux.models.developerActions.deleteAllAppActions({appId:TS.boot_data.app_to_edit.encoded_id});if(TS.redux.dispatch(P),k){const B=TS.interop.redux.models.developerActions.saveAppConfig({appId:TS.boot_data.app_to_edit.encoded_id,actionUrl:f.find("input[name=attachment_action_url]").val()});R=TS.redux.dispatch(B)}return R.then(function(){return TS.interop.api.call("developer.apps.actions.delete",{app:TS.boot_data.app_to_edit.encoded_id})}).catch(function(){h(TS.interop.i18n.t("We apologize, but the url could not be removed","includes_developer_apps")(),"action")}).then(function(){return TS.interop.api.call("developer.apps.suggestions.delete",{app:TS.boot_data.app_to_edit.encoded_id})}).catch(function(){h(TS.interop.i18n.t("We apologize, but the url could not be removed","includes_developer_apps")(),"suggestion"),$("#attachment_action_section_add").removeClass("hidden")}).then(function(){n||(k=!1,TS.developer_apps.showSuccessBanner(),f.find("input").val(""),w.updateData(l()),w.resetUnsaved())}).finally(function(){L()}),!0},onShow:function(){$("#generic_dialog .ladda-button").attr("data-style","expand-right"),Ladda.bind("#generic_dialog .ladda-button")},title:TS.interop.i18n.t("Remove interactive components?","includes_developer_apps","278d47ee827c68dea75df673039ddb4f956d9941")()})},"_onClickRemove"),x=e(function(){s.parent().addClass("hidden"),E.parent().removeClass("hidden")},"_showToggleSpinner"),L=e(function(){s.parent().removeClass("hidden"),E.addClass("hidden")},"_hideToggleSpinner"),W=e(function(T,R){var P=TS.templates.api_app_edit_bots_response({error:T});$(`.attachment_${R}_url_action_response`).html(P)},"_showInteractiveMessagesFormError"),y=e(function(){$(".attachment_action_url_action_response").html(""),$(".attachment_suggestion_url_action_response").html("")},"_clearInteractiveMessagesFormError"),U=e(function(){var T=$('[aria-invalid="true"]');_.isEmpty(T)&&(T=$(".alert_error")),!_.isEmpty(T)&&$("html, body").animate({scrollTop:T.offset().top-110},{complete:function(){T.focus()}})},"_scrollToError")})()},2875441026:()=>{(function(){TS.registerModule("developer_apps.oauth_info",{onStart:function(){TS.boot_data.active_section==="oauth"&&s()}});var n,f,s=e(function(){$("#revoke_tokens_button").on("click",p),$("#revoke_all_tokens_form").on("submit",l),C(),t(),E(),o(),d()},"_bindUI"),E=e(function(){n=$('[data-js="expiring_access_tokens_toggle"] .ts_toggle'),n.click(function(r){n.toggleClass("checked"),n.hasClass("checked")?k(r):u(r)}),w()},"_bindExpiringAccessTokensToggle"),w=e(function(){n.parent().removeClass("hidden"),$(".toggle_loading_spinner").addClass("hidden")},"_hideToggleSpinner"),u=e(function(r){r.preventDefault(),TS.generic_dialog.start({title:TS.interop.i18n.t("Turn on token expiration?","includes_developer_apps")(),body:TS.interop.i18n.t("New API access tokens will expire 1 hour after they're issued. Existing tokens won't be affected.","includes_developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"ladda-button",go_button_text:TS.interop.i18n.t("Turn On","includes_developer_apps")(),ladda:!0,onGo:function(){return TS.generic_dialog.startLadda(),TS.developer_apps.handleAPICall({method:"developer.apps.oauth.enableExpiringAccessTokens",data:{app_id:TS.boot_data.app_to_edit.encoded_id}}).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl({use_expiring_access_tokens:"1"}))}).catch(function(h){TS.generic_dialog.stopLadda();var b=TS.developer_apps.getErrorMessage(h.error);TS.generic_dialog.showError(b)}),!1}})},"_enableExpiringAccessTokens"),k=e(function(r){r.preventDefault(),TS.generic_dialog.start({title:TS.interop.i18n.t("Turn off token expiration?","includes_developer_apps")(),body:TS.interop.i18n.t("New API access tokens will no longer expire. Existing tokens won't be affected.","includes_developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"btn_danger ladda-button",go_button_text:TS.interop.i18n.t("Turn Off","includes_developer_apps")(),ladda:!0,onGo:function(){return TS.generic_dialog.startLadda(),TS.developer_apps.handleAPICall({method:"developer.apps.oauth.disableExpiringAccessTokens",data:{app_id:TS.boot_data.app_to_edit.encoded_id}}).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl({use_expiring_access_tokens:"0"}))}).catch(function(h){TS.generic_dialog.stopLadda();var b=TS.developer_apps.getErrorMessage(h.error);TS.generic_dialog.showError(b)}),!1}})},"_disableExpiringAccessTokens"),C=e(function(){$(".change_access_token").click(function(r){r.preventDefault(),TS.generic_dialog.start({title:TS.interop.i18n.t("Create new token?","includes_developer_apps")(),body:TS.interop.i18n.t("We\u2019ll generate a new access token for your workspace. 					You can still use your old token, too, until you revoke it.","includes_developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"ladda-button",go_button_text:TS.interop.i18n.t("Create","includes_developer_apps")(),ladda:!0,onGo:function(){return TS.generic_dialog.startLadda(),TS.developer_apps.handleAPICall({method:"developer.apps.oauth.generateLongLivedAccessToken",data:{app_id:TS.boot_data.app_to_edit.encoded_id}}).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl())}).catch(function(h){TS.generic_dialog.stopLadda();var b=TS.developer_apps.getErrorMessage(h.error);TS.generic_dialog.showError(b)}),!1}})})},"_bindRegenerateAccessTokenButton"),t=e(function(){$(".revoke_access_token").click(function(r){r.preventDefault();var h=$(this).attr("data-access-token");TS.generic_dialog.start({title:TS.interop.i18n.t("Revoke old workspace token?","includes_developer_apps")(),body:TS.interop.i18n.t("Your old OAuth token will no longer work.","includes_developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"btn_danger ladda-button",go_button_text:TS.interop.i18n.t("Revoke","includes_developer_apps")(),onGo:function(){TS.developer_apps.handleAPICall({method:"auth.revoke",data:{token:h},error_alert_selector:"#oauth_error_alert"}).then(function(){$("#old_access_token_section").addClass("hidden"),$("#access_token_section .change_access_token").removeClass("hidden")})}})})},"_bindRevokeAccessTokenButton"),o=e(function(){$(".reveal_token").click(function(r){r.preventDefault();var h=$(r.target),b=$(`#${h.attr("for")}`);if(b.length){h.hide();var S=b.data("token");b.val(S).attr("type","text"),$(this).parent().children(".btn_copy").removeClass("hidden")}})},"_bindRevealTokenButton"),p=e(function(){TS.generic_dialog.start({title:TS.interop.i18n.t("Are you sure?","developer_apps")(),body:TS.interop.i18n.t("All existing tokens will become invalid. Are you sure you want to 				revoke all tokens? This operation can take some time. Please 				wait a few moments before re-installing the app.","developer_apps","4bef1549dcbe7986a9c5b501f27837fca3efb1ee")(),go_button_text:TS.interop.i18n.t("Yes, I\u2019m sure","developer_apps")(),cancel_button_text:TS.interop.i18n.t("No, go back","developer_apps")(),onGo:function(){$("#revoke_all_tokens_form").submit()}})},"_confirmRevokeTokens"),l=e(function(r){r.preventDefault(),TS.developer_apps.handleFormPost({form_selector:"#revoke_all_tokens_form",error_alert_selector:"#revoke_tokens_error_alert",onSuccess:function(){$('[data-js="tokens_container"]').addClass("hidden"),$('[data-js="no_token_text"]').removeClass("hidden")}})},"_onSubmitRevokeTokens"),d=e(function(){f=$('[data-js="token_rotation_button"]'),f.on("click",function(r){v(r)})},"_bindTokenRotationButton"),v=e(function(r){r.preventDefault(),TS.generic_dialog.start({title:TS.interop.i18n.t("Your app will permanently use token rotation","includes_developer_apps")(),body:TS.interop.i18n.t('Your tokens will expire & regenerate for better data security - you\u2019ll set this up in your app code using our <a href="https://api.slack.com/authentication/rotation" target="_blank">documentation</a>.<br/><br/>You won\u2019t be able to change your app tokens back to long-lived tokens after opting in.',"includes_developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"ladda-button",go_button_text:TS.interop.i18n.t("Opt in","includes_developer_apps")(),ladda:!0,onGo:function(){return TS.generic_dialog.startLadda(),TS.developer_apps.handleAPICall({method:"developer.apps.migration.tokenRotationReady",data:{app:TS.boot_data.app_to_edit.encoded_id}}).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl({use_oauth2_refresh_tokens:"1"}))}).catch(function(h){TS.generic_dialog.stopLadda();var b=TS.developer_apps.getErrorMessage(h.error);TS.generic_dialog.showError(b)}),!1}})},"_enableTokenRotation")})()},9795149097:()=>{(function(){TS.registerModule("developer_apps.oauth_redirect_urls",{onStart:function(){var E,w;n=$('[data-js="oauth-redirect-urls"]'),f=TS.boot_data.app_to_edit.redirect_uri?TS.boot_data.app_to_edit.redirect_uri.split(`
`):[],E=_.map(f,function(u){return{url:u.trim(),state:"read"}}),w={title:TS.interop.i18n.t("Redirect URLs","developer_apps")(),add_button_text:TS.interop.i18n.t("Add New Redirect URL","developer_apps")(),edit_button_text:TS.interop.i18n.t("Done","developer_apps")(),soft_deletes:!1,show_empty_message:!0,empty_message:TS.interop.i18n.t("You haven\u2019t added any Redirect URLs","developer_apps")(),validation:"isouathredirecturl=https isunique required"},new TS.developer_apps.UrlTableEditor(n,E,s,w)}});var n,f,s=e(function(E){var w=$("#redirect_url_form"),u=_.map(_.filter(E,{state:"read"}),"url"),k=w.find('input[name="crumb"]').val(),C={crumb:k,redirect_uri:u.join(`
`)};return TS.developer_apps.handleFormPost({form_selector:w,data:C,error_alert_selector:"#oauth_redirect_error_alert"})},"_saveOauthRedirectUrls")})()},3089270192:()=>{(function(){TS.registerModule("developer_apps.published_settings",{onStart:function(){TS.boot_data.active_section==="published-settings"&&n()}});var n=e(function(){$('[name="enable_events_toggle"]').on("change",f),$('[name="always_active_toggle"]').on("change",s),$('[name="in_app_directory"]').on("change",E),w()},"_bindUI"),f=e(function(k){var C=$(k.target).prop("checked"),t=_.get(TS.boot_data,"developer_app.payload"),o=_.get(TS.boot_data,"app_to_edit.payload.unfurl_domains",[]),p={app:TS.boot_data.developer_app.encoded_id,url:_.get(t,"event_subscription.url")||_.get(t,"bot_event_subscription.url"),app_event_types:JSON.stringify(_.get(t,"event_subscription.event_types",[])),bot_event_types:JSON.stringify(_.get(t,"bot_event_subscription.event_types",[])),unfurl_domains:JSON.stringify(o.map(l=>l.replace(/http:\/\/|https:\/\//g,""))),filter_teams:JSON.stringify([]),enable:C};TS.developer_apps.handleAPICall({method:"developer.apps.events.subscriptions.updateSubs",data:p,error_alert_selector:"#enable_events_alert"}).then(TS.developer_apps.showSuccessBanner)},"_toggleEventsEnabled"),s=e(function(k){var C=$(k.target).prop("checked"),t={app:TS.boot_data.developer_app.encoded_id,always_active:C};TS.developer_apps.handleAPICall({method:"developer.apps.botusers.alwaysActive",data:t,error_alert_selector:"#always_active_alert"}).then(TS.developer_apps.showSuccessBanner)},"_toggleAlwaysActive"),E=e(function(){TS.developer_apps.handleFormPost({form_selector:"#toggle_directory_status_form",error_alert_selector:"#toggle_directory_status_alert"})},"_toggleDirectoryListedStatus"),w=e(function(){$('[data-js="published_token_rotation_button"]').on("click",function(k){u(k)})},"_bindTokenRotationButton"),u=e(function(k){k.preventDefault(),TS.generic_dialog.start({title:TS.interop.i18n.t("Your app will permanently use token rotation","includes_developer_apps")(),body:TS.interop.i18n.t('Your tokens will expire & regenerate for better data security - you\u2019ll set this up in your app code using our <a href="https://api.slack.com/authentication/rotation" target="_blank">documentation</a>.<br/><br/>You won\u2019t be able to change your app tokens back to long-lived tokens after opting in.',"includes_developer_apps")(),cancel_button_text:TS.interop.i18n.t("Cancel","includes_developer_apps")(),go_button_class:"ladda-button",go_button_text:TS.interop.i18n.t("Opt in","includes_developer_apps")(),ladda:!0,onGo:function(){return TS.generic_dialog.startLadda(),TS.developer_apps.handleAPICall({method:"developer.apps.migration.tokenRotationReady",data:{app:TS.boot_data.app_id}}).then(function(){window.location.assign(TS.developer_apps.getUpdateUrl({use_oauth2_refresh_tokens:"1"}))}).catch(function(C){TS.generic_dialog.stopLadda();var t=TS.developer_apps.getErrorMessage(C.error);TS.generic_dialog.showError(t)}),!1}})},"_enableTokenRotation")})()},2901912055:()=>{(function(){TS.registerModule("developer_apps.request_install_on_team",{onStart:function(){n=TS.boot_data.app_to_edit,TS.boot_data.user_is_guest||$(document).on("click","[data-request-install-to-team]",function(w){f=$(w.target),s(w)})},test:function(){var w={};return Object.defineProperty(w,"_bindInstallButton",{get:function(){return s},set:function(u){s=u}}),w}});var n={},f=null,s=e(function(w){w.preventDefault();var u={title:TS.interop.i18n.t("Request to install {app_name}","developer_apps")({app_name:TS.interop.i18n.safeString(_.escape(n.name))}),submit:TS.interop.i18n.t("Submit Request","developer_apps")(),cancel:TS.interop.i18n.t("Cancel","developer_apps")()};TS.generic_dialog.start({title:u.title,body:TS.templates.apps_request_app_modal_body({require_comment:TS.boot_data.app_whitelist_requests_require_comment_enabled||!1}),dialog_class:"p-request_install_modal",show_go_button:!0,show_cancel_button:!0,go_button_text:u.submit,cancel_button_text:u.cancel,ladda:!0,onGo:function(){var k=$("#whitelist_request_msg").val();return TS.generic_dialog.startLadda(),TS.generic_dialog.hideError(),E(n.encoded_id,k),!1}})},"_bindInstallButton"),E=e(function(w,u){var k=f.is("#incoming_webhooks_new_button"),C=k?TS.interop.i18n.t("Request to Add New Webhook Submitted","developer_apps")():TS.interop.i18n.t("Request Submitted","developer_apps")(),t=$("#install_app_to_team_alert");return TS.interop.api.call("apps.approvals.requests.create",{app:w,reason:u}).then(function(){f.toggleClass("disabled",!0).text(C),k&&f.toggleClass("btn_outline",!1),f.attr("data-request-submitted","1"),TS.developer_apps.showSuccessBanner(),TS.generic_dialog.div.modal("hide")}).catch(function(o){TS.generic_dialog.stopLadda(),o.data.error==="comment_required"?($("#whitelist_request_comment_required").removeClass("hidden"),$("#whitelist_request_msg").addClass("validation_warning").focus()):(TS.developer_apps.showErrorAlert(t),TS.generic_dialog.div.modal("hide"))}).finally(Ladda.stopAll)},"_requestInstallApp")})()},9516755371:()=>{(function(){TS.registerModule("developer_apps.request_url_verification",{completed_sig:new signals.Signal,onStart:function(){n=!TS.boot_data.app_is_distributed,s=TS.templates.developer_apps_url_verification,E(),w()},renderNewState:function(l){var d;l.allow_non_https=n,d=s(l),$("[data-js='request_url_verification_container']").replaceWith(d)}});var n,f,s,E=e(function(){var l={status:null,url:null};f=$("[data-js='request_url_verification_container']"),l.status=f.data("status"),l.url=f.attr("data-url"),l.url&&l.status==="unverified"&&(l.status="failed_verification",l.failed_connection=!0),TS.boot_data.app_is_distributed&&f.attr("data-is-https")!=="true"&&(l.skip_verification_notification=!0),o(l)},"_setUpInitialUI"),w=e(function(){var l=$("[data-js='request_url_verification_container']").parent();l.on("keyup","input#request_url",TS.utility.debounce(function(d){var v=$(d.target),r=TS.ui.validation.validate(v);if(r&&_.some($(d.target).val())){if(v.hasClass("new_request_url")){var h={changing_url:!0,prev_url:$("input.previous_request_url").val(),new_url:$("input.new_request_url").val()};u(h);return}u()}},1500)).on("keyup","input#request_url",function(){var d=$("#retry_url_verification");d.length&&d.addClass("hidden"),$("p.verification_help_text").addClass("hidden")}).on("click","#retry_url_verification",function(d){d.preventDefault();var v=$(d.target).attr("for"),r=$(`.${v}`),h=TS.ui.validation.validate(r);if(h&&_.some(r.val())){if(v==="new_request_url"){var b={changing_url:!0,prev_url:$("input.previous_request_url").val(),new_url:$("input.new_request_url").val()};u(b);return}u()}}).on("click","#change_request_url",function(){t()}).on("click","#cancel_change_url",function(){C()})},"_bindUI"),u=e(function(l){var d=l?l.new_url:$("input#request_url").val();l=l||{},_.isEmpty(l)&&(l.first_verification=!0),k();var v=e(function(r){let{error_message:h}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r&&l.changing_url===!0&&(l.new_url_verified=!0,l.skip_verification_notification=!0),l.status=r?"verified":"failed_verification",h==="connection_failed"&&(l.failed_connection=!0),l.url=d,o(l),TS.developer_apps.request_url_verification.completed_sig.dispatch()},"finish");TS.developer_apps.handleAPICall({method:"developer.apps.events.subscriptions.verifyURL",data:p(d),error_alert_selector:"#event_subscription_error_alert"}).then(function(){v(!0)}).catch(function(r){if(r.error==="challenge_failed"){var h=r.response,b=_.pick(r,["error","challenge","token"]),S=_.pick(h,["url","code","method","body"]);l.response=_.merge(b,S)}v(!1,{error_message:r.error})})},"_onGoodInputVerifyURL"),k=e(function(){var l=TS.interop.i18n.t("Verifying","developer_apps")();$(".alert_error").addClass("hidden"),$("[data-js='request_url_verification_container']").find(".validation_message").addClass("hidden"),$(".verification_help_text").removeClass("hidden").addClass("verifying").text(l),$(".verification_spinner").removeClass("hidden")},"_updateUIForVerification"),C=e(function(){var l={status:"verified",url:$("input.previous_request_url").val()};TS.boot_data.app_is_distributed&&f.attr("data-is-https")!=="true"&&(l.skip_verification_notification=!0),o(l)},"_onClickCancelChangeURL"),t=e(function(){var l={changing_url:!0,prev_url:$("input.request_url").val()};TS.boot_data.app_is_distributed&&f.attr("data-is-https")!=="true"&&(l.skip_verification_notification=!0),o(l)},"_onClickDisplayChangeURL"),o=e(function(l){var d=_.clone(l);l.changing_url===!0?d.verified=!0:l.status==="failed_verification"&&(d.unverified=!0),d.allow_non_https=n,d[l.status]=!0,TS.boot_data.app_to_edit.link_enabled&&(d.link_enabled=!0);var v=s(d);$("[data-js='request_url_verification_container']").replaceWith(v)},"_render"),p=e(function(l){return{app:TS.boot_data.app_to_edit.encoded_id,url:l}},"_prepareJSON")})()},7598504406:()=>{(function(){TS.registerModule("developer_apps.slash_commands",{onStart:function(){TS.boot_data.active_section==="slash-commands"&&(E(),t())}});var n=25,f,s=!1,E=e(function(){f=TS.boot_data.num_commands>=n},"_init"),w=e(function(){var r=$(".app_slack_commands_form");h({$input:r.find('input[name="name"]'),$output:r.find(".preview_popup_command_text"),format:function(S,x){return(!S||S==="/")&&(S=x.attr("placeholder")),S.replace("/","")}}),h({$input:r.find('input[name="usage"]'),$output:r.find(".preview_popup_usage_text")}),h({$input:r.find('input[name="desc"]'),$output:r.find(".preview_popup_desc_text"),format:function(S,x){return S||(S=x.attr("placeholder")),S}}),r.find('input[name="parse_full"]').on("change",function(){r.find("#unescaped_parse_hint, #escaped_parse_hint").toggleClass("hidden")}),r.find("input.overflow_ellipsis").on("focus",function(){$(this).removeClass("overflow_ellipsis")}).on("blur",function(){$(this).addClass("overflow_ellipsis")});function h(S){b(S),S.$input.on("input propertychange paste",function(){b(S)})}e(h,"mirrorInputValue");function b(S){var x=S.$input.val();S.format&&(x=S.format(x,S.$input)),S.$output.text(x)}e(b,"syncInputValue")},"_bindLivePreviewEvents"),u=e(function(r,h){var b=r.closest(".slack_command_dialog"),S=r.find("#app_slack_commands_error_alert"),x=S.find("#app_slack_commands_error_message");x.text(TS.developer_apps.getErrorMessage(h)),S.removeClass("hidden"),b.animate({scrollTop:"0px"})},"_showFormError"),k=e(function(r){var h=$.extend({app_id:TS.boot_data.app_to_edit.encoded_id,token:TS.boot_data.api_token,reserved_commands:TS.boot_data.reserved_commands.join(","),app_name:TS.boot_data.app_to_edit.name,socket_mode_enabled:TS.boot_data.app_to_edit.link_enabled,socket_mode_url:v(),show_url:!TS.boot_data.app_to_edit.link_enabled||!!r.url},r);h.https_only=!_.isEmpty(TS.boot_data.current_submission),TS.ui.fs_modal.start({title:h.title,modal_class:"fs_modal_header fs_modal_footer slack_command_dialog",body_template_html:TS.templates.app_slack_commands_modal(h),go_button_text:TS.interop.i18n.t("Save","developer_apps")(),onGo:function(){var b=$(".app_slack_commands_form"),S=$(".fs_modal_footer .dialog_go"),x=TS.ui.validation.validate(b,{quiet:!0,fast:!0});if(x){S.toggleClass("disabled",!0);var L=TS.developer_apps.serializeFormDataToObject(".app_slack_commands_form");L.name.indexOf("/")!==0&&(L.name=`/${L.name}`),TS.interop.api.call(`developer.apps.commands.${h.api_function}`,L).then(function(){window.location=TS.developer_apps.getUpdateUrl({saved:"1"})}).catch(function(R){R.data.error==="_parse_error"?window.location=TS.developer_apps.getUpdateUrl({saved:"1"}):(u(b,R.data.error),S.toggleClass("disabled",!1))})}else{TS.ui.validation.validate(b);var W=b.find('input[name="name"]'),y=b.find('input[name="url"]'),U=b.find('input[name="desc"]'),T="";!W.val()||!y.val()||!U.val()?T="missing_field":W.val()[0]!=="/"&&(T="invalid_command_name"),T!==""&&u(b,T)}return!1}}),w()},"_openSlackCommandDialog"),C=e(function(){var r=TS.interop.i18n.t("Each app can have up to {app_command_limit} commands associated with it.","developer_apps")({app_command_limit:n});TS.generic_dialog.start({title:TS.interop.i18n.t("Too many commands already","developer_apps")(),body:r,show_cancel_button:!1,go_button_text:TS.interop.i18n.t("Got it","developer_apps")()})},"_openCommandLimitReachedDialog"),t=e(function(){$("#add_slack_command").on("click",o).removeClass("disabled"),$("#import_slack_command").on("click",p).removeClass("disabled"),$("#commands_table").on("click",".app_slack_commands_edit",l),$("#commands_table").on("click",".app_slack_commands_delete",d)},"_bindUI"),o=e(function(){f?C():k({title:TS.interop.i18n.t("Create New Command","developer_apps")(),api_function:"add"})},"_onClickAddSlackCommand"),p=e(function(r){if(r.target===r.currentTarget)if(r.stopImmediatePropagation(),f)C();else{if(!s){s=!0;var h=$("#import_slack_command_lazy_filter_select"),b={no_default_selection:!0,placeholder_text:TS.interop.i18n.t("Find a command","developer_apps")(),classes:"import_slack_command_lazy_filter_select_container",onItemAdded:function(S){var x=$(S);k({title:TS.interop.i18n.t("Edit Imported Command","developer_apps")(),api_function:"add",name:x.data("name"),url:x.data("url"),desc:x.data("desc"),usage:x.data("usage"),parse_full:x.data("parse_full")})}};h.lazyFilterSelect(b)}$(this).find(".lazy_filter_select").trigger("click")}},"_onClickImportSlackCommand"),l=e(function(){var r=$(this).closest(".app_slack_commands_actions");r&&k({title:TS.interop.i18n.t("Edit Command","developer_apps")(),api_function:"edit",name:r.data("name"),command:r.data("command"),url:r.data("url"),desc:r.data("desc"),usage:r.data("usage"),parse_full:r.data("parse_full")})},"_onClickSlackCommandsEdit"),d=e(function(){var r=$(this).closest(".app_slack_commands_actions"),h,b;r&&(h=TS.interop.i18n.t("You are deleting this command across {num_teams, plural, =1 {# workspace} other {# workspaces}}","developer_apps")({num_teams:TS.boot_data.num_teams}),b=TS.interop.i18n.t("Are you sure you want to remove <b>{command_name}</b> from this application?","developer_apps")({command_name:TS.interop.i18n.safeString(_.escape(r.data("name")))}),TS.generic_dialog.start({title:h,body:b,show_cancel_button:!0,show_go_button:!0,go_button_text:TS.interop.i18n.t("Yes, delete it","developer_apps")(),go_button_class:"btn_danger",cancel_button_text:TS.interop.i18n.t("No, Cancel","developer_apps")(),onGo:function(){return TS.interop.api.call("developer.apps.commands.delete",{app:TS.boot_data.app_to_edit.encoded_id,token:TS.boot_data.api_token,command:r.data("command")}).then(function(){TS.reload(!1,"TS.developer_apps.slash_commands.onClickSlackCommandsDelete.dialog.onGo")}).catch(function(S){TS.generic_dialog.end();var x=TS.developer_apps.getErrorMessage(S.data.error),L=TS.interop.i18n.t("<b>{command_name}</b> was not removed from this application.","developer_apps")({command_name:TS.interop.i18n.safeString(_.escape(r.data("name")))});TS.generic_dialog.start({title:x,body:L,show_cancel_button:!1,go_button_text:TS.interop.i18n.t("Ok","developer_apps")()})}),!1}}))},"_onClickSlackCommandsDelete"),v=e(function(){return`https://app.${TS.boot_data.abs_root_url.split("https://")[1]}app-settings/${TS.boot_data.team_id}/${TS.boot_data.app_to_edit.encoded_id}/socket-mode`},"_getSocketModeUrl")})()},8795914058:()=>{(function(){TS.registerModule("developer_apps",{onStart:function(){f(),s(),k(),C()},onScopesChange:function(t){let{installUrl:o,hasChanges:p,hasNonIdentityChanges:l,isEmpty:d}=t;var v=$("[data-install-to-team]");TS.developer_apps.showSuccessBanner(),$("#missing_scopes_alert").remove(),!_.isEmpty(v)&&!v.attr("data-request-submitted")&&(v.attr("href",o).toggleClass("disabled",d),v.parent().toggleClass("ts_tip_hide",!0),!TS.boot_data.user_can_install_app&&l&&v.attr("href",void 0).attr("data-request-install-to-team","true").text(TS.interop.i18n.t("Request to Install","developer_apps")),$('[data-js="reinstall_banner_link"]').attr("href",o),$('[data-js="install_org_button"]').attr("href",o),d?$('[data-js="api_alert_page_scope_changed"]').addClass("hidden"):(!_.isEmpty(TS.boot_data.token_scope)||!_.isEmpty(TS.boot_data.token_scope_bot))&&($('[data-js="api_alert_page_scope_changed"]').toggleClass("hidden",!p),$("#page_contents").toggleClass("super_large_alert",p),p&&$('[data-js="api_alert_page_update_scopes"]').remove()))},getUpdateUrl:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=u(),p=TS.interop.url.queryStringEncode({...o,...t});return window.location.pathname+p},handleAPICall:function(t){return new Promise(function(o,p,l){var d=TS.interop.api.call(t.method,t.data).then(function(v){v.data.ok?o(v.data):(w(t,v.data.error),p(v.data))}).catch(function(v){return w(t,v.data.error),p(v.data),null});l(function(){d.cancel()})})},handleFormPost:function(t){return new Promise(function(o,p){if(!t.form_selector){p(new Error("default_error"));return}var l=$(t.form_selector),d=t.data||{};t.data||(d=TS.developer_apps.serializeFormDataToObject(t.form_selector)),$.post(l.attr("action"),d).done(function(v){v.ok?(t.dont_show_success_banner||TS.developer_apps.showSuccessBanner(),t.error_alert_selector&&TS.developer_apps.hideErrorAlert(t.error_alert_selector),t.onSuccess&&t.onSuccess(),o(v)):(w(t,v.error),p(v.error))}).fail(function(v,r,h){w(t,h),p(h)})})},serializeFormDataToObject:function(t){var o=$(t);return o.serializeArray().reduce(function(p,l){var d=p[l.name],v=l.name,r=l.value;return _.isArray(d)?p[v]=_.concat(d,r):d?p[v]=[d,r]:p[v]=r,p},{})},showErrorAlert:function(t,o){var p=$(t),l=TS.developer_apps.getErrorMessage(o);p.find(".error_message").html(l),p.toggleClass("hidden",!1),$("body").animate({scrollTop:p.offset().top-110})},hideErrorAlert:function(t){var o=$(t);o.addClass("hidden")},showSuccessBanner:function(){var t=$('[data-js="api_alert_page"]');t.replaceWith(t.clone()),$('[data-js="api_alert_page"]').removeClass("hidden").addClass("fade")},getErrorMessage:function(t,o){switch(t){case"missing_command_name":case"missing_url":case"missing_description":t="missing_field";break;case"missing_name":t="no_name";break;case"next_command_token_not_found":t="token_not_found";break;default:break}return _.isObject(n[t])?n[t].string:n[t]||n[o]||n.default_error},updateReinstallBanner:function(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],p=arguments.length>2?arguments[2]:void 0;$('[data-js="reinstall_banner_link"]').attr("href",function(x,L){if(TS.boot_data.is_granular_bot_app){let W=L;return _.isEmpty(t)||(W=TS.interop.url.setUrlQueryStringValue(W,"user_scope",t.join(","))),_.isEmpty(p)||(W=TS.interop.url.setUrlQueryStringValue(W,"scope",p.join(","))),W}return L.replace(/(scope=)(.*)$/,`$1${t.join(",")}`)});var l=TS.boot_data.token_scope,d=TS.boot_data.token_scope_bot,v=_.get(TS.boot_data,"app_to_edit.payload.unfurl_domains")||[];if(!_.isEmpty(l)||!_.isEmpty(d)){var r=_.difference(t,l),h=_.difference(p,d)||[],b=_.difference(o,v),S=!_.isEmpty(r)||!_.isEmpty(b)||!_.isEmpty(h);$('[data-js="api_alert_page_scope_changed"]').toggleClass("hidden",!S),$("#page_contents").toggleClass("super_large_alert",S),S&&$('[data-js="api_alert_page_update_scopes"]').remove()}},onAppClick:t=>{if(!t)return;const o=window.origin+t,p=e(d=>{TS.developer_apps.showErrorAlert("#developer_apps_alert"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error({error:d,link:o},"Developer Apps Error")},"handleError"),l=new XMLHttpRequest;l.open("GET",o),l.setRequestHeader("X-B3-Sampled","1"),l.onload=()=>{l.status===200?window.location.href=o:p(`X-B3-Sampled Error: ${l.status}`)},l.onerror=()=>{p(`X-B3-Sampled On Error: ${l.status}`)},l.send()}});var n={},f=e(function(){n={default_error:TS.interop.i18n.t("Hmm, something\u2019s gone wrong.","developer_apps")(),app_not_found:TS.interop.i18n.t("Sorry, this app does not exist.","developer_apps")(),not_authed:TS.interop.i18n.t("Sorry, no authentication token was provided.","developer_apps")(),invalid_auth:new Handlebars.SafeString(TS.interop.i18n.t('Sorry, your authentication token is invalid. Please <a href="https://slack.com/workspace-signin?redir=/api/apps" target="_blank">sign in</a> to continue.',"developer_apps")()),account_inactive:TS.interop.i18n.t("Whoops, this authentication token is for a deleted workspace or user.","developer_apps")(),user_is_bot:TS.interop.i18n.t("Apologies, but this action can\u2019t be performed by a bot user.","developer_apps")(),app_creation_rate_limited:TS.interop.i18n.t("Looks like you\u2019re trying to create apps too quickly. Please try again later.","developer_apps")(),missing_field:TS.interop.i18n.t("Darn, some required fields are still empty.","developer_apps")(),bad_url:TS.interop.i18n.t("Your application&rsquo;s URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),bad_support_url:TS.interop.i18n.t("Your application&rsquo;s support URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),bad_direct_install_url:TS.interop.i18n.t("Your application&rsquo;s redirect URL must return a status code of 302 to a slack.com url.","developer_apps")(),privacy_link_bad_format:TS.interop.i18n.t("Please enter a URL starting with <code>https://</code>.","developer_apps")(),no_name:TS.interop.i18n.t("Please choose a name for your app.","developer_apps")(),name_too_long:TS.interop.i18n.t("Drat, app names must be shorter than 35 characters.","developer_apps")(),reserved_name:TS.interop.i18n.t("Oh dear--we don\u2019t allow names that use Slack or Slackbot. Try another?","developer_apps")(),desc_too_long:TS.interop.i18n.t("Short descriptions must be shorter than 140 characters.","developer_apps")(),long_desc_too_long:TS.interop.i18n.t("Long descriptions can\u2019t be longer than 4000 characters.","developer_apps")(),icon_bad_dimensions:TS.interop.i18n.t("Please upload an icon that&rsquo;s at least 512px by 512px.","developer_apps")(),icon_too_large:TS.interop.i18n.t("Please upload an icon that is smaller than 2MB and 2000px by 2000px.","developer_apps")(),icon_not_an_image:TS.interop.i18n.t("Only .jpg, .png, or .gif files are allowed. Try another?","developer_apps")(),icon_general:TS.interop.i18n.t("Hmm, we ran into a problem uploading your image. Try again?","developer_apps")(),token_not_found:TS.interop.i18n.t("Darn, we couldn\u2019t find your token.","developer_apps")(),developer_email_bad_format:TS.interop.i18n.t("Please enter a valid email.","developer_apps")(),developer_email_too_long:TS.interop.i18n.t("We greatly regret that your email can\u2019t be longer than 140 characters. Try a shorter one?","developer_apps")(),support_email_bad_format:TS.interop.i18n.t("Please enter a valid email.","developer_apps")(),error_too_many_categories:TS.interop.i18n.t("Rats \u2014 right now you can only choose 3 categories.","developer_apps")(),error_no_languages_selected:TS.interop.i18n.t("Please select at least {minimum_number_languages} supported language","developer_apps",{fallbackHash:"5467d4b7e72e67a382568f96c6a32f0a85e7663a"})({minimum_number_languages:1}),error_no_price_selected:TS.interop.i18n.t("Please select a price for your app","developer_apps")(),youtube_url_bad_format:TS.interop.i18n.t("The YouTube URL is in an invalid format.","developer_apps")(),app_card_color_bad_format:TS.interop.i18n.t("Please enter a valid 6-digit hex color.","developer_apps")(),distributed_app_must_use_token_expiration:TS.interop.i18n.t("Oops, you have to deactivate distribution for your app before you can turn off token expiration.","developer_apps")(),redirect_uri_required:TS.interop.i18n.t("Please provide at least one redirect URL.","developer_apps")(),error_updating_app_submission:TS.interop.i18n.t("Crud, that update didn\u2019t work. Try again?","developer_apps")(),command_limit_reached:TS.interop.i18n.t("Regrettably, you can only add 25 commands per app.","developer_apps")(),command_not_found:TS.interop.i18n.t("We couldn\u2019t find this command. Try again?","developer_apps")(),connection_failed:TS.interop.i18n.t("The server couldn\u2019t be reached at your request URL. Try again?","developer_apps")(),duplicate_command_name:TS.interop.i18n.t("That command name is already in use. Choose another?","developer_apps")(),invalid_command_name:TS.interop.i18n.t("Drat, your command name must be shorter than 32 characters, and it can\u2019t contain spaces.","developer_apps")(),missing_command_id:TS.interop.i18n.t("Hmm, looks like this command doesn\u2019t exist.","developer_apps")(),ssl_verification_failed:TS.interop.i18n.t("Darn, that URL doesn\u2019t have a valid SSL certificate.","developer_apps")(),tls_certificate_not_trusted:TS.interop.i18n.t("Yikes! It looks like your TLS certificate isn\u2019t trusted.","developer_apps")(),error_creating_app_submission:TS.interop.i18n.t("Rats, there was an error submitting your app. Try again?","developer_apps")(),error_already_has_active_submission:TS.interop.i18n.t("You already have a submission pending for this app. Cancel pending submission?","developer_apps")(),checklist_not_saved:TS.interop.i18n.t("There was a problem saving the checklist.","developer_apps")(),error_dev_checklist_incomplete:TS.interop.i18n.t("Almost there! A few items are missing or have errors. Please correct them and try submitting again.","developer_apps")(),not_a_valid_https_url:TS.interop.i18n.t("The url is not a valid https URL.","developer_apps")(),challenge_failed:TS.interop.i18n.t("Your request URL didn\u2019t respond with the correct challenge value. Update your URL to receive a new request and value.","developer_apps")(),invalid_json:TS.interop.i18n.t("The method was called via a POST request with Content-Type application/json, but the body was not valid JSON.","developer_apps")(),json_not_object:TS.interop.i18n.t("The method was called via a POST request with a valid JSON body, but the JSON value was not an object.","developer_apps")(),invalid_arg_name:TS.interop.i18n.t("The method was passed an argument whose name falls outside the bounds of common decency. This includes very long names and names with non-alphanumeric characters other than _. If you get this error, it is typically an indication that you have made a very malformed API call.","developer_apps")(),invalid_array_arg:TS.interop.i18n.t("The method was passed a PHP-style array argument (e.g. with a name like foo[7]). These are never valid with the Slack API.","developer_apps")(),invalid_charset:TS.interop.i18n.t("The method was called via a POST request, but the charset specified in the Content-Type header was invalid. Valid charset names are: utf-8 iso-8859-1","developer_apps")(),invalid_form_data:TS.interop.i18n.t("The method was called via a POST request with Content-Type application/x-www-form-urlencoded or multipart/form-data, but the form data was either missing or syntactically invalid.","developer_apps")(),invalid_post_type:TS.interop.i18n.t("The method was called via a POST request, but the specified Content-Type was invalid. Valid types are: application/json application/x-www-form-urlencoded multipart/form-data text/plain.","developer_apps")(),missing_post_type:TS.interop.i18n.t("The method was called via a POST request and included a data payload, but the request did not include a Content-Type header.","developer_apps")(),request_timeout:TS.interop.i18n.t("The method was called via a POST request, but the POST data was either missing or truncated.","developer_apps")(),upgrade_required:TS.interop.i18n.t("The calling application needs to be upgraded.","developer_apps")(),http_failed:TS.interop.i18n.t("Your request URL responded with an HTTP error. Update your URL to receive a new request and challenge value.","developer_apps")(),http_timeout:TS.interop.i18n.t("Hmm, our verification request timed out before we received a response. Try again?","developer_apps")(),bot_user_not_found:TS.interop.i18n.t("Whoops! Looks like your app doesn\u2019t have a bot user. You\u2019ll need one to subscribe to bot events.","developer_apps")(),event_subscription_exists:TS.interop.i18n.t("Whoops! Looks like your app has existing event subscriptions.","developer_apps")(),missing_bot_user:TS.interop.i18n.t("The bot_user argument is missing.","developer_apps")(),missing_event_types:TS.interop.i18n.t("The event_types argument is missing.","developer_apps")(),invalid_event_types:TS.interop.i18n.t("The event_types parameter is not a JSON encoded array of strings.","developer_apps")(),missing_filter_teams:TS.interop.i18n.t("The filter_teams argument is missing.","developer_apps")(),invalid_filter_teams:TS.interop.i18n.t("The filter_teams parameter is not a JSON encoded array of at most 20 team ID strings.","developer_apps")(),event_subscription_not_found:TS.interop.i18n.t("Sorry, no event subscriptions were found for your app.","developer_apps")(),translation_already_on:TS.interop.i18n.t("It looks like User ID translation is already on for this app","developer_apps")(),translation_already_off:TS.interop.i18n.t("It looks like User ID translation is already off for this app","developer_apps")(),invalid_blueprint_clone_url:TS.interop.i18n.t("Whoops, looks like your app's web address is invalid.","developer_apps")(),blueprint_clone_url_verification_error:TS.interop.i18n.t("Oops, we couldn't communicate successfully with your app. Please check that your web address is entered correctly, and that you've configured your software with the credentials below.","developer_apps")(),short_desc_too_long:TS.interop.i18n.t("Whoops, your description is too long.","developer_apps")(),security_compliance_bad_tos_url:TS.interop.i18n.t("Terms of service URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_cert_comply_soc_cert_url:TS.interop.i18n.t("SOC attestation URL must start with <code>http://</code> or <code>https://</code>.","developer_apps","7e5129bace319b1d6b184edba9e2c4933f56f6f7")(),security_compliance_bad_cert_comply_coppa_compliance_url:TS.interop.i18n.t("COPPA compliance URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_cert_comply_iso_iec_27001_cert_url:TS.interop.i18n.t("ISO/IEC-27001 certification URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_cert_comply_iso_iec_27017_cert_url:TS.interop.i18n.t("ISO/IEC-27017 attestation URL must start with <code>http://</code> or <code>https://</code>.","developer_apps","2a15a9e42a0987c692f7e6ff979005f43b95a6f2")(),security_compliance_bad_cert_comply_iso_iec_27018_cert_url:TS.interop.i18n.t("ISO/IEC-27018 attestation URL must start with <code>http://</code> or <code>https://</code>.","developer_apps","25b0e122ee9bf2dd7d2cee7873d46a2338fc5612")(),security_compliance_bad_cert_comply_fedramp_cert_url:TS.interop.i18n.t("FedRAMP ATO URL must start with <code>http://</code> or <code>https://</code>.","developer_apps","7c20e7543ba1f8c263841570da1f0e46f4d4ebff")(),security_compliance_bad_cert_comply_csa_star_level_cert_url:TS.interop.i18n.t("CSA Star Level certification URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_cert_comply_privacy_shield_notice_url:TS.interop.i18n.t("Privacy shield notice URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_cert_comply_gdpr_commitment_url:TS.interop.i18n.t("GDPR commitment URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_cert_comply_guidelines_sub_processors_url:TS.interop.i18n.t("Guidelines for sub-processors URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_security_vulnerability_url:TS.interop.i18n.t("Vulnerability disclosure program URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_security_bug_bounty_url:TS.interop.i18n.t("Bug bounty program URL must start with <code>http://</code> or <code>https://</code>.","developer_apps")(),security_compliance_bad_security_email:TS.interop.i18n.t("Please enter a valid email for how users can contact you with security issues.","developer_apps")(),security_compliance_data_retention_policy_too_long:TS.interop.i18n.t("Data retention policy can\u2019t be longer than 4000 characters.","developer_apps")(),security_compliance_data_archival_removal_policy_too_long:TS.interop.i18n.t("Data archival/removal policy can\u2019t be longer than 4000 characters.","developer_apps")(),security_compliance_data_storage_policy_too_long:TS.interop.i18n.t("Data storage policy can\u2019t be longer than 4000 characters.","developer_apps")(),security_compliance_data_how_host_too_long:TS.interop.i18n.t("How do you host your data can\u2019t be longer than 4000 characters.","developer_apps")(),security_compliance_cert_comply_data_deletion_requests_handling_too_long:TS.interop.i18n.t("What is your procedure for handling requests for data deletion can\u2019t be longer than 4000 characters.","developer_apps")(),security_compliance_security_third_party_services_too_long:TS.interop.i18n.t("What third party services does your app use can\u2019t be longer than 4000 characters.","developer_apps")(),security_compliance_company_location_required:TS.interop.i18n.t("Company headquarters location is required.","developer_apps")()}},"_initErrors"),s=e(function(){Ladda.bind(".ladda-button"),$("body").on("click","[data-toggle-visibility]",function(){var r=$(this).data("toggle-visibility").split(",").map($.trim);r.forEach(function(h){$(`#${h}`).toggleClass("hidden")})}),(window.location.search.indexOf("saved=1")!=-1||window.location.search.indexOf("success=1")!=-1)&&$('[data-js="api_alert_page"]').removeClass("hidden").addClass("fade"),$(".submit_enable_on_load").attr("disabled",!1),$(".apps_nav_select.menu_launcher").on("click",E),$('[data-js="api_alert_page_scope_changed_close"]').click(function(){$('[data-js="api_alert_page_scope_changed"]').addClass("hidden")}),$('[data-js="user_oauth_token_visibility_toggle"]').on("click",function(){$(this).toggleClass("p-oauth_access_token_header__collapsed");var r=$('[data-js="user_oauth_token_container"]');r.toggleClass("hidden")}),$('[data-js="bot_oauth_token_visibility_toggle"]').on("click",function(){$(this).toggleClass("p-oauth_access_token_header__collapsed");var r=$('[data-js="bot_oauth_token_container"]');r.toggleClass("hidden")}),$('[data-js="api_alert_page_update_scopes_close"]').click(function(){$('[data-js="api_alert_page_update_scopes"]').remove(),window.createCookie("update_scopes_banner_dismissed","1")});const t=[...document.querySelectorAll('[data-js="show_workspace_tokens_trigger"]')||[]],o=document.querySelector('[data-js="show_workspace_tokens_container"]');t&&o&&t.forEach(r=>{r.addEventListener("click",h=>{h.preventDefault(),[...t,o].forEach(b=>b.classList.toggle("hidden"))})});const p=document.getElementById("nav_manifest_coachmark"),l=document.getElementById("nav_manifest_element");TS.interop.mountAppManifestCoachmark&&p&&l?p.getAttribute("data-has-coachmark")==="true"&&TS.interop.mountAppManifestCoachmark(TS.boot_data.team_id,p,{anchorElement:l}):TS.error("Cannot mount app manifest coachmark");const d=document.getElementById("nav_ai_apps_coachmark"),v=document.getElementById("nav_ai_apps_element");TS.interop.mountAiAppsCoachmark&&d&&v?d.getAttribute("data-has-coachmark")==="true"&&TS.interop.mountAiAppsCoachmark(TS.boot_data.team_id,d):TS.error("Cannot mount ai apps coachmark")},"_bindUI"),E=e(function(t){var o=$("#apps_select_list");TS.menu.startWithList(t,o,{close_on_click:!0,menu_class:"avatar_menu"})},"_onClickAppsMenuLauncher"),w=e(function(t,o){o==="bad_direct_install_url"&&(t.error_alert_selector="#installation_url_error_alert"),t.error_alert_selector&&TS.developer_apps.showErrorAlert(t.error_alert_selector,o),TS.log(1900,"Developer apps error:"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error({error:o,settings:t},"Developer Apps Error")},"_generalErrorHandler");const u=e(function(){const t=TS.interop.url.urlQueryStringParse(location.href);return _.pickBy(t,(o,p)=>_.startsWith(p,"feature_"))},"_getUrlFeatureFlags"),k=e(function(){if(TS.telemeter&&TS.boot_data&&TS.boot_data.active_section){TS.interop.telemeter.start();const t=`developer_apps_edit_${TS.boot_data.active_section}_`;TS.telemeter.measure("navigationStart",`${t}server`,"responseStart"),TS.telemeter.measure("navigationStart",`${t}interactive`,"domInteractive"),TS.telemeter.measure("navigationStart",`${t}dom_content_loaded`,"domContentLoadedEventEnd"),TS.telemeter.measure("navigationStart",`${t}load`,"loadEventEnd")}},"_logPerfMetrics"),C=e(function(){TS.interop.clog.track(TS.interop.clogTypes.EventId.APP_SETTINGS,{app_id:TS.boot_data.app_id,contexts:{ui_context:{action:TS.interop.clogTypes.UiAction.IMPRESSION,ui_page:TS.boot_data.active_section}}})},"_logUsageMetrics")})()},1291479263:()=>{(function(){TS.registerModule("developer_apps.uninstall_button",{onStart:function(){n=$('[data-js="developer_apps_uninstall_button"]'),f=$('[data-js="developer_apps_installed_message"]'),s=$("[data-install-to-team]"),E()},test:function(){var u={_$uninstall_button:n,_$installed_message:f,_$install_button:s,_bindUI:E,_updateUI:w};return Object.defineProperty(u,"_$uninstall_button",{get:function(){return n},set:function(k){n=k}}),Object.defineProperty(u,"_$installed_message",{get:function(){return f},set:function(k){f=k}}),Object.defineProperty(u,"_$install_button",{get:function(){return s},set:function(k){s=k}}),Object.defineProperty(u,"_bindUI",{get:function(){return E},set:function(k){E=k}}),u}});var n,f,s,E=e(function(){n.toggleClass("btn_outline",!0).toggleClass("disabled",!1),n.click(function(u){u.preventDefault(),n.toggleClass("btn_outline",!1),TS.developer_apps.handleAPICall({method:"developer.apps.oauth.uninstallApp",data:{app_id:TS.boot_data.app_to_edit.encoded_id},error_alert_selector:"#install_app_to_team_alert"}).then(function(){w()}).catch(function(k){throw TS.interop.utility.getLogger({getState:TS.redux.getState}).error(k,"Error calling developer.apps.oauth.uninstallApp from Developer Apps install-on-team page"),k}).finally(function(){TS.developer_apps.showSuccessBanner(),n.toggleClass("btn_outline",!0),Ladda.stopAll()})})},"_bindUI"),w=e(function(){f.toggleClass("hidden"),n.toggleClass("hidden"),s.toggleClass("hidden")},"_updateUI")})()},4814704933:()=>{(function(){TS.registerModule("developer_apps.user_ids_toggle",{onStart:function(){TS.boot_data.active_section&&TS.boot_data.active_section!=="user-ids"||(k(),s=w.prop("checked"))}});var n=750,f="#user_ids_toggle_error",s,E,w,u,k=e(function(){E=$(".user_ids_toggle_container .ts_toggle"),w=$('[name="enable_translation_check"]'),u=$('[name="enable_translation"]'),w.on("change",t)},"_bindUI"),C=e(function(){E.toggleClass("checked",s),w.prop("checked",s)},"_toggleUI"),t=e(function(){var p,l;s?(p=TS.interop.i18n.t("Turn off user ID translation?","developer_apps")(),l=TS.interop.i18n.t("Turn off translation only if your app is now compatible with global (W) user IDs (otherwise things may break).","developer_apps")(),TS.generic_dialog.start({title:p,body:l,onGo:o,onCancel:C})):(p=TS.interop.i18n.t("Enable user ID translation?","developer_apps")(),l=TS.interop.i18n.t("Turning on translation will translate global (W) user IDs to local user IDs and send those in API responses and webhooks. If your app already supports global IDs, this may break things.","developer_apps")(),TS.generic_dialog.start({title:p,body:l,onGo:o,onCancel:C}))},"_maybeToggleUserIdTranslation"),o=e(function(){var p=!s;if(TS.boot_data.app!=="api"){s=p,u.attr("value",p?"1":"0");return}var l=new Promise(function(d,v){var r=!0;E.addClass("no_pointer_events"),setTimeout(function(){r&&E.addClass("disabled")},n),TS.developer_apps.handleAPICall({method:"developer.apps.migration.usersTranslate",error_alert_selector:f,data:{app:TS.boot_data.app_to_edit.encoded_id,enable:p}}).then(function(){$(f).addClass("hidden"),s=p,d()}).catch(function(h){switch(h.error){case"translation_already_on":s=!0;break;case"translation_already_off":s=!1;break;default:break}C(),v()}).finally(function(){E.removeClass("no_pointer_events").removeClass("disabled"),r=!1})});TS.ui.inline_saver.show({target:".user_ids_toggle_heading",promise:l})},"_actuallyToggleUserIdTranslation")})()},241659237:()=>{(function(){TS.registerModule("developer_apps.verification_token",{onStart:function(){n(),s()}});var n=e(function(){$(".next_command_token").each(function(){var t=$(this);if(t.val()){var o=t.attr("data-app-id");$(this).val()&&f(!0,o)}})},"_init"),f=e(function(t,o){$(`#command_token_${o}`).toggleClass("col",t),$(`#command_token_${o}`).toggleClass("span_3_of_4",t),$(`.token_regeneration_ui_collapsed_${o}`).toggleClass("hidden",t),$(`.token_regeneration_ui_expanded_${o}`).toggleClass("hidden",!t)},"_showNextTokenUI"),s=e(function(){$(".verification_token_container").on("click",".regenerate_command_token",E).on("click",".promote_command_token",w).on("click",".clear_command_token",u)},"_bindUI"),E=e(function(){var t=$(this).attr("data-app-id"),o=$(`#command_token_${t}`),p=$(`#next_command_token_${t}`);TS.interop.api.call("developer.apps.commands.createToken",{app:t}).then(function(l){p.val(l.data.next_command_token),f(!0,t),o.removeClass("token_promoted")}).catch(k)},"_onClickRegenerateCommandToken"),w=e(function(){var t=$(this).attr("data-app-id");TS.generic_dialog.start({title:TS.interop.i18n.t("Are you sure you want to use this token?","developer_apps")(),body:TS.interop.i18n.t("Your previous token will become invalid.","developer_apps")(),go_button_text:TS.interop.i18n.t("Activate","developer_apps")(),onGo:function(){var o=$(`#command_token_${t}`),p=$(`#next_command_token_${t}`);TS.interop.api.call("developer.apps.commands.promoteToken",{app:t,command_token:p.val()}).then(function(l){o.val(l.data.command_token),p.val(""),f(!1,t),o.addClass("token_promoted")}).catch(k)}})},"_onClickPromoteCommandToken"),u=e(function(){var t=$(this).attr("data-app-id"),o=$(`#next_command_token_${t}`);f(!1,t),TS.interop.api.call("developer.apps.commands.clearToken",{app:t,command_token:o.val()}).then(function(){o.val("")}).catch(C)},"_onClickClearCommandToken"),k=e(function(t){t.data.error==="sudo_required"?window.location=TS.boot_data.sudo_url:C(t)},"_redirectOrShowErrorDialog"),C=e(function(t){var o=TS.developer_apps.getErrorMessage(t.data.error);TS.generic_dialog.start({title:o,body:TS.interop.i18n.t("Your verification token has not changed.","developer_apps")(),show_cancel_button:!1,go_button_text:TS.interop.i18n.t("Ok","developer_apps")()})},"_showErrorDialog")})()},6543328327:()=>{(function(){TS.registerModule("ui.drop_zone",{file_received_sig:new signals.Signal,file_removed_sig:new signals.Signal,start:function(d){s=0,u=$.extend({},w,d),k()},updateProgress:function(d,v){v=v||{};var r=$(".drop_zone_progress");if(!r.length){t("progress",{is_attaching_logs:v.is_attaching_logs||!1}),r=$(".drop_zone_progress");var h=u.inline?28:64;if(r.circleProgress({value:0,size:h,animation:d!==!1,fill:{gradient:["#50acf4","#41a6f5"]},startAngle:Math.PI/-2}),d===!1){var b=0;E=setInterval(function(){r.circleProgress({value:b%100/100}),b+=1},50)}}d&&r.circleProgress({value:d})},showPreviewImage:function(d,v){if(v||(v=Date.now(),TS.warn("No attachment_id passed for preview - generating new attachment_id")),typeof d=="string"&&t("preview",{img_src:d,attachment_id:v}),d instanceof File){var r=new FileReader;r.onload=function(h){TS.ui.drop_zone.showPreviewImage(h.target.result,v)},r.readAsDataURL(d)}},showPreviewIcon:function(d,v,r){r||(r=Date.now(),TS.warn("No attachment_id passed for preview - generating new attachment_id")),t("preview",{icon:d,description:v,attachment_id:r})},updateAttachmentCount:function(d){typeof d=="number"?s=d:s+=1,l()?($(".drop_zone").addClass("disabled"),$("[data-drop-zone-input]").prop("disabled",!0),$(".browse_file_button").hide()):($(".drop_zone").removeClass("disabled"),$("[data-drop-zone-input]").prop("disabled",!1),$(".browse_file_button").show())},resetUI:function(){t()},stop:function(){C()},test:function(){var d={_actual_drop_zone:f};return Object.defineProperty(d,"_actual_drop_zone",{get:function(){return f},set:function(v){f=v}}),d}});var n,f,s,E,w={fullscreen:!1,inline:!1,restrict_file_type_regexp:null,restrict_file_type_message:TS.interop.i18n.t("Please use a valid file and try again","drop_zone")(),max_attachments:1,allow_multi_upload:!1},u,k=e(function(){var d,v=["drop_zone_mask"],r=$("[data-drop-zone-trigger]"),h=$("[data-drop-zone-input]");n=$(".drop_zone");var b=`file_input_${Date.now()}`;h.attr("id",b),r.attr("for",b),u.fullscreen?(f=$("body"),v.push("drop_zone_fullscreen")):f=n,d=$("<div>",{class:v.join(" ")}),d.appendTo(f).hide(),h.on("click",function(S){S.target.value=null}),h.on("change",function(S){p(S.target.files,S.originalEvent),S.preventDefault()}),f.on("dragover",function(S){!l()&&!$(".drop_zone").hasClass("disabled")&&(n.addClass("dragover"),d.show(),t("prompt"),S.originalEvent.dataTransfer.dropEffect="copy"),S.preventDefault()}),d.on("dragend dragleave drop",function(S){n.removeClass("dragover"),d.hide(),t(),S.preventDefault()}),d.on("drop",function(S){p(S.originalEvent.dataTransfer.files,S.originalEvent),S.preventDefault()})},"_bindUI"),C=e(function(){f.off("dragover"),$(".drop_zone_mask, .drop_zone_fullscreen").remove()},"_unbindUI"),t=e(function(d,v){switch(v=v||{},$(".drop_zone").removeClass("disabled"),$(".drop_zone_overlay").remove(),clearInterval(E),d){case"prompt":$(TS.templates.drop_zone_overlay({fullscreen:u.fullscreen,inline:u.inline,state:{prompt:!0,is_attaching_logs:v.is_attaching_logs||!1}})).appendTo(f);break;case"progress":$(TS.templates.drop_zone_overlay({fullscreen:u.fullscreen,inline:u.inline,state:{progress:!0,is_attaching_logs:v.is_attaching_logs||!1}})).appendTo(f),$(".drop_zone").addClass("disabled");break;case"preview":$(TS.templates.drop_zone_attachment(v)).prependTo(n).find(".drop_zone_remove_attachment").on("click",o.bind(null,v.attachment_id));break;default:break}},"_updateUI"),o=e(function(d,v){$(`[data-drop-zone-attachment-id="${d}"]`).remove(),TS.ui.drop_zone.file_removed_sig.dispatch({attachment_id:d,originalEvent:v.originalEvent}),s-=1,t(),v.preventDefault()},"_removeAttachment"),p=e(function(d,v){if(d=u.allow_multi_upload?d:d[0],!d){TS.generic_dialog.alert(TS.interop.i18n.t("Whoops! Looks like you didn\u2019t upload a file.","drop_zone")());return}if(l()){TS.generic_dialog.alert(TS.interop.i18n.t("Sorry, you can\u2019t upload any more files.","drop_zone")());return}if(s+d.length>u.max_attachments){var r=u.max_attachments-s;TS.generic_dialog.alert(TS.interop.i18n.t("Sorry, you can only upload {num_screenshots_allowed, plural, =1 {# more file} other {# more files}}.","drop_zone")({num_screenshots_allowed:r}));return}for(var h=0;h<d.length;h+=1)if(u.restrict_file_type_regexp&&!u.restrict_file_type_regexp.test(d[h].type)){u.on_invalid_file_type_handler&&_.isFunction(u.on_invalid_file_type_handler)?u.on_invalid_file_type_handler(u.restrict_file_type_message,d[h]):TS.generic_dialog.alert(u.restrict_file_type_message);return}var b={file:d,originalEvent:v,files:d};TS.ui.drop_zone.file_received_sig.dispatch(b)},"_rideIntoTheDropZone"),l=e(function(){return u.max_attachments<=0?!1:u.max_attachments<=s},"_reachedAttachmentLimit")})()},5883185953:(n,f,s)=>{"use strict";var E=s(1652324658),w=s.n(E),u=s(8942369482),k=s.n(u),C=s(8888488183),t=s.n(C),o=s(5749927766),p=s.n(o),l=s(3904330330),d=s.n(l),v=s(8182707451),r=s.n(v),h=s(6108600565),b=s.n(h),S=s(1606144682),x=s.n(S),L=s(3488427269),W=s.n(L),y=s(9346465533),U=s.n(y),T=s(2875441026),R=s.n(T),P=s(9795149097),B=s.n(P),z=s(3089270192),K=s.n(z),G=s(2901912055),X=s.n(G),Z=s(9516755371),ee=s.n(Z),Y=s(9593635862),ie=s.n(Y),ne=s(7598504406),se=s.n(ne),a=s(8795914058),m=s.n(a),A=s(1291479263),q=s.n(A),j=s(6525150068),ae=s.n(j),g=s(4814704933),M=s.n(g),D=s(241659237),F=s.n(D),H=s(6543328327),V=s.n(H)}},n=>{var f=e(E=>n(n.s=E),"__webpack_exec__"),s=f(5883185953)}]);})();
